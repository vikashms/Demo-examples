/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> !*/
var g_strAmp = "&";
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+g_strAmp+"MMplayerType="+ad+g_strAmp+"MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=g_strAmp+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=g_strAmp+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();

var SpeechStream = new function(){};var baa ="r\x77DontA\x6cter";var caa ="r\x77T\x48c\x6fmp";var daa ="r\x77THgen";var eaa ="r\x77THpgen";var faa = ["ScanSoft Emily_Full_22kHz","ScanSoft Samantha_Full_22kHz","ScanSoft Paulina_Full_22kHz","ScanSoft Isabel_Full_22kHz","ScanSoft Virginie_Full_22kHz","ScanSoft Julie_Full_22kHz","ScanSoft Steffi_Full_22kHz","ScanSoft Silvia_Full_22kHz","ScanSoft Claire_Full_22kHz","ScanSoft Ingrid_Full_22kHz","ScanSoft Karen_Full_22kHz","ScanSoft Raquel_Full_22kHz","ScanSoft Joana_Full_22kHz"]; var gaa = [ ["\x43lick\x20\x54\x6f\x20Spe\x61k\x20M\x6fde","\x53elect\x20this\x20then\x20cli\x63k\x20anywher\x65\x20in\x20the\x20bo\x6fk\x20t\x6f\x20st\x61rt\x20rea\x64ing\x20text","\x48az\x20cli\x63\x20para\x20el\x20mo\x64\x6f\x20\x68abla\x64o"], ["\x53peak\x20The\x20Current\x20Select\x69on","\x53p\x65ak\x20t\x68e\x20c\x75rrent\x20s\x65lection","\x4ceer\x20en\x20voz\x20alta\x20e\x6c\x20texto\x20s\x65\x6c\x65\x63cionad\x6f"], ["\x50aus\x65\x20Sp\x65ech","\x50ause\x20\x53peech","\x44isc\x75rso\x20\x64e\x20paus\x61"], ["\x53top\x20S\x70ee\x63h","\x53tops\x20speec\x68\x20playba\x63k","\x50\x61rar\x20v\x6fz"], ["\x54ranslat\x65\x20W\x6frd","\x44oub\x6ce-c\x6ci\x63k\x20a\x20word\x20in\x20t\x68e\x20book\x20and\x20\x63lick\x20this\x20\x69con\n"+"t\x6f\x20translat\x65\x20t\x68e\x20\x77ord\x20into\x20\x53panish","\x54raducir\x20pa\x6cabr\x61"], ["\x46act\x20Fin\x64er","\x53elect\x20som\x65\x20text\x20\x69n\x20the\x20book\x20and\x20click\x20t\x68\x69s\x20i\x63on\x20to\n"+"\x70\x65rform\x20a\x20Goo\x67le\x20search","\x42usc\x61dor\x20d\x65\x20datos"], ["\x44iction\x61ry","\x44ou\x62\x6ce-cl\x69ck\x20a\x20\x77\x6fr\x64\x20in\x20t\x68e\x20book\x20and\x20click\x20th\x69s\x20icon\x20to\n"+"s\x65e\x20d\x69ctionar\x79\x20\x64efinit\x69ons","\x44i\x63c\x69onario"], ["\x48ig\x68\x6cig\x68t\x20C\x79an","\x4da\x6be\x20a\x20sele\x63tion\x20in\x20the\x20book\x20and\x20click\x20this\x20ic\x6fn\x20to\n"+"\x63reate\x20a\x20b\x6cue\x20\x68ig\x68l\x69ght","\x52ealc\x65\x20azul\x20v\x65r\x64\x6fso"], ["\x48i\x67hli\x67ht\x20\x4dagent\x61","\x4da\x6be\x20a\x20sel\x65ction\x20in\x20the\x20\x62oo\x6b\x20and\x20click\x20this\x20icon\x20to\n"+"\x63reate\x20\x61\x20pink\x20\x68\x69gh\x6cight","\x52e\x61l\x63e\x20morado"], ["\x48ig\x68light\x20Yello\x77","\x4dak\x65\x20a\x20se\x6cection\x20in\x20th\x65\x20boo\x6b\x20and\x20clic\x6b\x20this\x20ic\x6fn\x20t\x6f\n"+"\x63reat\x65\x20a\x20yel\x6co\x77\x20highli\x67\x68t","\x52ealce\x20\x61m\x61rillo"], ["\x48ighlig\x68t\x20Gr\x65en","\x4dake\x20a\x20select\x69on\x20in\x20th\x65\x20book\x20\x61n\x64\x20click\x20this\x20\x69con\x20to\n"+"\x63reate\x20\x61\x20gr\x65en\x20\x68ighlig\x68t","\x52\x65alce\x20v\x65rde"], ["\x52\x65move\x20H\x69g\x68lights","\x52\x65move\x20\x61ll\x20your\x20\x68\x69\x67\x68l\x69g\x68ts\x20\x66ro\x6d\x20th\x69s\x20page","\x42orrar\x20re\x61lc\x65"], ["\x43o\x6cle\x63t\x20High\x6cights","\x43ollect\x20\x61\x6cl\x20\x79our\x20hig\x68l\x69ghts\x20\x61nd\x20d\x69splay\x20them\n"+"\x69n\x20a\x20\x77indow,\x20\x67roup\x65d\x20\x62y\x20\x63\x6flor","\x52ecopil\x61r\x20re\x61l\x63es"], ["\x43lick\x20\x68ere\x20to\x20s\x65l\x65ct\x20th\x65\x20text","\x43\x6c\x69ck\x20here\x20to\x20select\x20th\x65\x20t\x65xt","clic aqu"+ String.fromCharCode(237) +"\x20para\x20destac\x61r"], ["\x4dP3\x20Maker","\x4dP3\x20Mak\x65r","\x4d\x503\x20Maker"], ["\x43\x61lculator","\x43\x61lculat\x6fr","\x43alcu\x6cator"], ["\x47en\x65rate\x20Ca\x63h\x65","\x47\x65nerat\x65\x20Cac\x68e","\x47ener\x61te\x20Cach\x65"], ["\x43\x68\x65\x63k\x20C\x61che","\x43hec\x6b\x20Cach\x65","\x43h\x65ck\x20Cache"], ["\x50i\x63ture\x20Dicti\x6fn\x61ry","\x50\x69cture\x20Dict\x69onary","\x44iccion\x61rio\x20visual"], ["\x53\x70el\x6c\x20Check\x65r","\x53p\x65l\x6c\x20Chec\x6ber","\x53pell\x20\x43\x68\x65cker"], ["\x48\x6fmoph\x6fne\x20Checker","\x48omop\x68\x6fne\x20Checker","\x48omo\x70hone\x20Che\x63\x6ber"], ["\x50re\x64iction\x20C\x68eck\x65r","\x50redict\x69on\x20C\x68ec\x6b\x65r","\x50redi\x63tion\x20Checker"], ["\x53ubmit","\x53ub\x6dit","\x53ub\x6dit"], ["\x53tic\x6by\x20note","\x53tic\x6b\x79\x20note","\x53tick\x79\x20not\x65"], ["\x43reate\x20pr\x6fnunciat\x69\x6fn","\x43r\x65\x61te\x20pr\x6fnunciat\x69on","\x43re\x61t\x65\x20\x70ron\x75n\x63iation"], ["\x45\x64it\x20pronun\x63iat\x69on","\x45dit\x20pron\x75nci\x61ti\x6fn","\x45d\x69t\x20pronunc\x69ation"], ["\x56oc\x61bulary\x20lookup","\x56\x6fcab\x75l\x61r\x79\x20lookup","\x56oc\x61bulary\x20\x6coo\x6bup"], ["\x53trike\x20t\x68rough","\x4dake\x20a\x20s\x65lect\x69on\x20in\x20the\x20book\x20and\x20click\x20t\x68is\x20\x69con\x20to\n"+"s\x65t\x20strike-t\x68rough\x20styl\x65","\x53tri\x6b\x65\x20throug\x68"]];var haa = 0;var iaa = haa++;var jaa = haa++;var kaa = haa++;var laa = haa++;var maa = haa++;var naa = haa++;var oaa = haa++;var paa = haa++;var qaa = haa++;var raa =haa++;var saa = haa++;var taa = haa++;var uaa = haa++;var vaa = haa++;var waa = haa++;var xaa = haa++;var yaa = haa++;var zaa = haa++;var Aba = haa++;var Bba = haa++;var Cba = haa++;var Dba = haa++;var Eba = haa++;var Fba = haa++;var Gba = haa++;var Hba = haa++;var Iba = haa++;var Jba = haa++;var Kba = haa++; var Lba = haa++; var Mba = 0;var Nba = 1;var Oba = 2;var Pba = 3;var Qba = 4;var Rba = 5;var Sba = 6;var Tba = 7;var Uba = 8;var Vba = 9;var Wba = 10;var Xba = 11;var Yba = [ 0, 33, 66, 99, 132, 165, 198, 264, 297, 330, 363, 396, 429, 0, 528, 462, 561, 594, 231, 0, 0, 0, 0, 495, 627, 660, 759, 792, 693, 726 ];var Zba ="t\x65xth\x65lpSto\x70Cont\x69nuous";var aba ="t\x65xt\x68elp\x53ki\x70";var FAST_SPEED = 55;var MEDIUM_SPEED = 40;var DEFAULT_SPEED = MEDIUM_SPEED;var SLOW_SPEED = 25;var VERY_SLOW_SPEED = 15;var READING_AGE_4 = 25;var READING_AGE_5 = 25;var READING_AGE_6 = 26;var READING_AGE_7 = 27;var READING_AGE_8 = 28;var gba = 29;var READING_AGE_10 = 30;var READING_AGE_11 = 35;var READING_AGE_12 = 40;var READING_AGE_13 = 44;var READING_AGE_14 = 46;var READING_AGE_15 = 48;var READING_AGE_16 = 50;var hba ="eba_language ENG_UK  ENGLISH UK ENG_US ENGLISH_US SPANISH SPANISH_US ESPANOL SPANISH_ES "+"FRENCH FRENCH_CN GERMAN ITALIAN DUTCH SWEDISH AUSTRALIAN PORTUGUESE PORTUGUESE_BR "+"PORTUGUES PORTUGUES_PT"; var ENG_UK = 0;var UK = 0; var ENGLISH = 0; var ENGLISH_UK = 0; var ENG_US = 1;var ENGLISH_US = 1;var SPANISH = 2;var SPANISH_US = 2;var ESPANOL = 3; var SPANISH_ES = 3;var FRENCH = 4;var FRENCH_CN = 5;var GERMAN = 6;var ITALIAN = 7;var DUTCH = 8;var SWEDISH = 9;var AUSTRALIAN = 10;var PORTUGUESE = 11;var PORTUGUESE_BR = 11;var PORTUGUES = 12; var Bca = 12;var Cca ="eba_locale LOCALE_UK LOCALE_US ";var LOCALE_UK ="UK";var LOCALE_US ="US";var clicktospeak_icon = 1;var play_icon = 2;var search_icons = 28;var translation_icon = 4;var translate_icon = 4; var translator_icon = 4; var factfinder_icon = 8;var dictionary_icon = 16;var language_icons = 224;var spelling_icon = 32;var homophone_icon = 64;var prediction_icon = 128;var highlight_icons = 3840;var highlightcyan_icon = 256;var highlightmagenta_icon = 512;var highlightyellow_icon = 1024;var highlightgreen_icon = 2048;var collect_icon = 4096;var sticky_icon = 16384;var funplay_icon = 32768;var proncreate_icon = 65536;var createpron_icon = 65536; var pronCreate_icon = 65536; var pronedit_icon = 131072;var pronEdit_icon = 131072; var editpron_icon = 131072; var selectspeed_icon = 262144;var selectSpeed_icon = 262144; var pause_icon = 524288;var mp3_icon = 1048576;var calculator_icon = 2097152;var generatecache_icon = 4194304;var checkcache_icon = 8388608;var picturedictionary_icon = 16777216;var imagedictionary_icon = 16777216;var vocabulary_icon = 33554432;var strike_icon = 67108864;var fullbrowsealoud_icons = 7967;var standardbrowsealoud_icons = 31;var minbrowsealoud_icons = 1;var submit_icon = 8192;var no_bar = 0;var main_icons = 7967;var standard_icons = 31;var min_icons = 1;var title_rw = 0;var title_ba = 1;var title_ebooks = 2;var title_th = 3;var title_portal = 4;if (!Array.prototype.indexOf){ Array.prototype.indexOf = function(elt) { var Vpa = this.length; var from = Number(arguments[1]) || 0; from = (from < 0) ? Math.ceil(from) : Math.floor(from); if (from < 0) { from += Vpa; } for (; from < Vpa; from++) { if (from in this && this[from] === elt) { return from; } } return -1; };}/* Copyright 2005-2008 Texthelp Systems Ltd
*/var Hca = false;var Ica = false; var Jca = true;var Kca = true;var Lca ="dtdType ls_teacherFlag FAST_SPEED DEFAULT_SPEED MEDIUM_SPEED SLOW_SPEED VERY_SLOW_SPEED pause_icon mp3_icon calculator_icon generatecache_icon checkcache_icon picturedictionary_icon";var Mca;var Nca = false;var Oca ="color:#000000; background:#FFFF00";var Pca ="color:#FFFFFF; background:#0000FF";var Qca = null;var Rca = false; var Sca = false;var Tca = false;var eba_actual_version ="190";var Uca ="4";var Vca ="190"; var Wca ="162"; var Xca = -1;var Yca ="speechus.texthelp.com";var Zca = fullbrowsealoud_icons;var aca = -1;var bca = 0;var cca = Yca;var dca = Yca;var eca = null; var fca = null;var gca = null;var hca = null;var ica ="SpeechStream"; var jca ="/SpeechStream/"; var kca ="ScanSoft Samantha_Full_22kHz";var lca = null; var mca = null; var nca = null; var oca = -1;var pca ="rwonline"; var qca ="rwonline";var rca = 0; var sca = false; var tca ="US"; var uca = 40; var vca = -1; var wca = false;var xca = false; var yca = false;var zca = false;var Ada = false;var Bda = false;var Cda = false;var Dda = false;var Eda = null;var Fda = 1;var Gda = false;var Hda = false;var Ida = 3; var Jda = 10; var Kda = false;var Lda = false; var Mda = false; var Nda ="*"; var Oda ="*"; var Pda ="*"; var Qda ="*"; var Rda = false; var Sda = false; var Tda = true; var Uda ="portal.texthelp.com"; var Vda = null; var Wda = null; var Xda =""; var Yda = true;var Zda = null;var ada = null;var bda = false;var cda = false;var dda = null;var eda = 10 * 1024;var fda = false;var gda = false;var hda = false;var ida = -1;var jda = -1;var kda = -1;var lda = -1;var mda = -1;var nda = false;var oda = false;var pda = false;var qda = false;var rda = true;var sda = null;var tda = false;var uda = false;var vda = true;var wda = false;var xda = false;var yda = false;var zda = false;var Aea = false;var Bea = false;var Cea = true;var Dea = true;var Eea = true;var Fea = null;var Gea = null;var Hea = false;var Iea = null;var Jea = null; var Kea = 0; var Lea = 0; var Mea = 0; var Nea = new Array(); var Oea = -1; var Pea = 0; var Qea = 0; var Rea = false;var Sea = false;var Tea = false;var Uea = null;var Vea = false;var Wea = 0;var Xea ="";function $rw_getAutoCacheMissingCount(){ return Wea;};function $rw_getAutoCacheError(){ return Xea ||"";};var Yea;var Zea = false;var dtdType; var bea = false;var cea = false;var g_icons = new Array();var dea = new Array();var eea = 0;var fea = 0;var gea = 300;var hea = { x:0,y:0 };var iea = { x:0,y:0 };var jea = null;var kea = false;var lea = 5;var mea = false;var nea = 0;var oea ="";var pea = 1.0;var qea = 0.01;var rea = true;var sea = 8;var tea = 60;var uea = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00];var vea = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00];var wea = [300, 300, 300, 300, 600, 250, 220, 660, 240, 300, 300, 100];var xea = [40, 40, 40, 40, 40, 250, 40, 60, 256, 30, 30, 30];var yea = [false, false, false, false, false, false, false, false, false, false, false, false];var $g_bMouseSpeech = false;var zea ="";var Afa = false;var Bfa = false;var Cfa = navigator.appName =="\x4di\x63rosoft\x20Internet\x20Explor\x65r";var Dfa = navigator.appVersion.indexOf("MSIE 6.") > -1;var Efa = navigator.appVersion.indexOf("MSIE 7.") > -1;var Ffa = navigator.appVersion.indexOf("MSIE 8.") > -1;var Gfa = navigator.appVersion.indexOf("MSIE 9.") > -1;var Hfa = false;var Ifa = -1;var Jfa;var Kfa;if(Cfa){ if(Dfa) { if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Hfa = true; } } } else if(Efa) { Ffa = true; if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Hfa = true; } else { Afa = true; } } if(document.documentMode) { Ifa = document.documentMode; } } else { Afa = true; Ifa = document.documentMode; }};if(Cfa){ if(Ifa >= 9) { Kfa = true; Jfa = false; } else { Kfa = false; Jfa = true; }}var Lfa = navigator.appVersion.indexOf("\x43hro\x6d\x65") > -1;var Mfa = navigator.appVersion.indexOf("\x53afar\x69") > -1; var Nfa = !(Cfa || Mfa); var Ofa = navigator.userAgent.toLowerCase();var Pfa = (Ofa.indexOf("ipad") > -1 || Ofa.indexOf("ipod") > -1 || Ofa.indexOf("iphone") > -1 || Ofa.indexOf("android") > -1);var Qfa = Ofa.indexOf("ipad") > -1 || Ofa.indexOf("ipod") > -1 || Ofa.indexOf("iphone") > -1 ;var Rfa;var Sfa ="\x6cocalh\x6fst";var $g_strFileLoc =""; var Tfa ="";var g_speakableTextAreaTarget = null;var g_nSpeakableTextAreaTimerId = 0;var Wfa = 1;var Xfa = false;var Yfa = false;var Zfa = false;var afa = false;var bfa = new Array();var cfa = new Object();var dfa ="-:minus;+:plus;/:divided by;*:multiplied by;<:less than;>:greater than;=:equals;^:raised to the power of;<=:less than or equal to;>=:greater than or equal to;";dTb(dfa);var efa = false;var ffa = false;var gfa = false;var hfa = false;var ifa ="mp3";var jfa = false;var kfa = null;var lfa = 20;var mfa ="~p~br~head~body~hr~div~h1~h2~h3~h4~h5~h6~blockquote~table~tbody~tr~td~th~";var nfa = mfa; var ofa ="~em~strong~b~i~u~tt~font~kbd~dfn~cite~sup~sub~a~embed~span~small~nobr~wbr~acronym~"+"abbr~code~s~chunk~th:pron~img~/th:pron~w~/w~lic/lic~";var pfa = ofa; var qfa = true;var rfa = false;var eba_server_version;var eba_serverVersion; var eba_client_version;var eba_clientVersion; var eba_login_name; var eba_login_password; var eba_loginName; var eba_loginPassword; var eba_server; var eba_speech_server; var eba_speechServer; var eba_speech_server_backup;var eba_speechServerBackup; var eba_folder;var eba_client_folder;var eba_clientFolder; var eba_speech_stream_server_version = -1;var eba_voice; var eba_hover_flag; var eba_bubble_mode; var eba_bubble_freeze_on_shift_flag; var eba_voice_from_lang_flag; var eba_voice_language_map; var eba_speed_value; var eba_speedValue; var eba_speed_offset; var eba_volume_value; var eba_initial_speech_on; var eba_continuous_reading; var eba_play_start_point; var eba_speech_started_callback; var eba_rendering_speech_callback; var eba_speech_complete_callback; var eba_page_complete_callback; var eba_speak_selection_by_sentence; var eba_page_complete_after_selection; var eba_dont_extend_selection; var eba_use_container; var eba_override_x; var eba_override_y; var eba_icons;var eba_no_display_icons; var eba_no_title; var eba_noTitleFlag;var eba_hidden_bar; var eba_speech_range_colours; var eba_speech_word_colours; var eba_allow_alerts_flag; var eba_alerts;var eba_language; var eba_locale; var eba_ignore_buttons;var eba_max_word_count;var eba_logo_url = null; var eba_inline_img; var eba_cache_buster; var eba_dictionary_server; var eba_custom_dictionary_url; var eba_alt_dictionary_url; var eba_picturedictionary_server; var eba_translate_server; var eba_translation_server; var eba_translate_source; var eba_translate_target; var eba_mp3_id; var eba_mp3_limit; var eba_mp3_callback; var eba_cust_id; var eba_custId; var eba_book_id; var eba_bookId; var eba_page_id; var eba_pageId; var eba_annotate_confirm_delete_note; var eba_annotate_persist_notes; var eba_annotate_persist_highlights; var eba_annotate_note_editor_id; var eba_annotate_highlight_editor_id; var eba_annotate_storage_url; var eba_annotate_note_storage_url; var eba_annotate_highlight_storage_url; var eba_annotate_note_reader_id; var eba_annotate_highlight_reader_id; var eba_annotate_highlight_store_text; var eba_speechCacheGenerateFlag;var eba_cache_building_mode;var eba_speechCacheFlag;var eba_speech_cache_flag;var eba_cache_mode; var eba_cache_live_generation;var eba_autoCachePage;var eba_cacheResult =""; var eba_cache_retry; var eba_cache_retry_timeout; var eba_cache_selection; var eba_cache_user_text; var eba_split_cache_path; var eba_autocache_generate;var eba_autocache_check;var eba_autocache_allspeeds;var eba_autocache_callback;var eba_autocache_no_alert;var eba_clientside_pronunciation; var eba_check_pronunciation_before_cache; var eba_skip_on_error; var eba_alter_browser_for_consistency;var eba_ssl_flag; var eba_ssl_speech; var eba_ssl_toolbar; var eba_search_speech_server; var eba_replace_speech_server; var eba_no_flash; var eba_handle_radio_checkbox_click; var eba_bypass_dom_check = false; var eba_limit_cookies; var eba_ignore_frames; var eba_math; var eba_maths; var eba_symbol_text; var eba_abbr_array = null; var eba_date_filter_mode;var eba_build_cache_for_external_use;var eba_use_html5;var eba_speech_file_type;var eba_use_vocab; var eba_use_vocabulary;var eba_vocabulary_server;var eba_vocabulary_limit;var eba_break_list;var eba_use_commands;var eba_tinymce;var eba_tinymce_id;var ls_teacherFlag = false; var eba_reading_age;function $rw_getVersion(){ return eba_actual_version;}function $rw_getRevision(){ return Uca;}function $rw_setIconsToLoad(p_nIcons){ var tfa = false; if((p_nIcons & clicktospeak_icon) == clicktospeak_icon) { if(!uda) { ida = nsa('hover', gaa[iaa][rca],Yba[iaa],true); } tfa = true; } if((p_nIcons & play_icon) == play_icon) { if(! (Ada && !zca && !Bda) ) { if(!uda) { nsa('play', gaa[jaa][rca], Yba[jaa],false); } tfa = true; } } if((p_nIcons & pause_icon) == pause_icon) { nsa('pause', gaa[kaa][rca], Yba[kaa],false); } if(tfa) { nsa('stop', gaa[laa][rca], Yba[laa],false); } var ufa = false; if((p_nIcons & funplay_icon) == funplay_icon) { nsa('funplay', gaa[jaa][rca], Yba[Kba],false); ufa = true; } if(ufa) { nsa('funstop', gaa[laa][rca], Yba[Lba],false); } if((p_nIcons & translation_icon) == translation_icon) { nsa('trans', gaa[maa][rca], Yba[maa],false); } if((p_nIcons & factfinder_icon) == factfinder_icon) { nsa('ffinder', gaa[naa][rca], Yba[naa],false); } if((p_nIcons & dictionary_icon) == dictionary_icon) { nsa('dictionary', gaa[oaa][rca], Yba[oaa],false); } if((p_nIcons & picturedictionary_icon) == picturedictionary_icon) { nsa('picturedictionary', gaa[Aba][rca], Yba[Aba],false); } if((p_nIcons & spelling_icon) == spelling_icon) { kda = nsa('spell', gaa[Bba][rca],Yba[Bba],true); } if((p_nIcons & homophone_icon) == homophone_icon) { lda = nsa('homophone', gaa[Cba][rca],Yba[Cba],true); } if((p_nIcons & prediction_icon) == prediction_icon) { mda = nsa('pred', gaa[Dba][rca],Yba[Dba],true); } var vfa = false; if((p_nIcons & highlightcyan_icon) == highlightcyan_icon) { nsa('cyan', gaa[paa][rca], Yba[paa], false); vfa = true; } if((p_nIcons & highlightmagenta_icon) == highlightmagenta_icon) { nsa('magenta', gaa[qaa][rca], Yba[qaa], false); vfa = true; } if((p_nIcons & highlightyellow_icon) == highlightyellow_icon) { nsa('yellow', gaa[raa][rca],Yba[raa], false); vfa = true; } if((p_nIcons & highlightgreen_icon) == highlightgreen_icon) { nsa('green', gaa[saa][rca],Yba[saa], false); vfa = true; } if((p_nIcons & strike_icon) == strike_icon) { nsa('strike', gaa[Jba][rca], Yba[Jba], false); vfa = true; } if(vfa) { nsa('clear', gaa[taa][rca], Yba[taa],false); } if((p_nIcons & collect_icon) == collect_icon) { nsa('collect', gaa[uaa][rca],Yba[uaa] ,false); } if((p_nIcons & vocabulary_icon) == vocabulary_icon) { nsa('vocabulary', gaa[Iba][rca], Yba[Iba],false); } if((p_nIcons & mp3_icon) == mp3_icon) { nsa('mp3', gaa[waa][rca],Yba[waa] ,false); } if((p_nIcons & calculator_icon) == calculator_icon) { nsa('calculator', gaa[xaa][rca],Yba[xaa] ,false); } if((p_nIcons & generatecache_icon) == generatecache_icon) { nsa('generate_cache', gaa[yaa][rca], Yba[yaa],false); } if((p_nIcons & checkcache_icon) == checkcache_icon) { nsa('check_cache', gaa[zaa][rca],Yba[zaa] ,false); } if((p_nIcons & submit_icon) == submit_icon) { nsa('submit', gaa[Eba][rca], Yba[Eba],false); } if((p_nIcons & sticky_icon) == sticky_icon) { jda = nsa('sticky', gaa[Fba][rca],Yba[Fba] ,true); } if(lca != null && mca != null && nca != null) { if((p_nIcons & pronCreate_icon) == pronCreate_icon) { nsa('pronCreate', gaa[Gba][rca],Yba[Gba] ,false); } if((p_nIcons & pronEdit_icon ) == pronEdit_icon ) { nsa('pronEdit', gaa[Hba][rca],Yba[Hba] ,false); } }}var wfa = 0;function $rw_setVoice(kPb){ if(typeof(kPb) =="string") { if(kPb != null && kPb.length > 0 && kPb != kca) { eba_voice = kPb; kca = kPb; try { var Lga = ZZb.getConnector(); if(Lga != null) { Lga.setVoiceName(kca); } } catch(err) { thLogE(err); } } }}function $rw_setVoiceForLanguage(kPb, p_languageCode){ var bBb; if(typeof(p_languageCode) =="string") { bBb = Aga(p_languageCode); if(bBb == -1) { try { bBb = parseInt(p_languageCode, 10); } catch(err) { thLogE(err); return; } } } else if(typeof(p_languageCode) =="number") { bBb = p_languageCode; } else { return; } if(typeof(kPb) =="string"&& kPb != null && kPb.length > 0 && bBb >= 0 && bBb < faa.length) { faa[bBb] = kPb; }}function Aga(Bga){ var thb = Bga.toLowerCase(); if(thb =="english"|| thb =="english_uk") { return ENG_UK; } else if(thb =="english_us") { return ENG_US; } else if(thb =="spanish") { return SPANISH; } else if(thb =="espanol") { return ESPANOL; } else if(thb.substr(0, 4) =="espa"&& thb == ("espa"+ String.fromCharCode(241) +"ol")) { return ESPANOL; } else if(thb =="french") { return FRENCH; } else if(thb.substr(0, 4) =="fran"&& thb == ("fran"+ String.fromCharCode(231) +"ais")) { return FRENCH; } else if(thb =="french_cn") { return FRENCH_CN; } else if(thb =="german") { return GERMAN; } else if(thb =="italian") { return ITALIAN; } else if(thb =="dutch") { return DUTCH; } else if(thb =="swedish") { return SWEDISH; } else if(thb =="australian") { return AUSTRALIAN; } else if(thb =="portuguese") { return PORTUGUESE; } else if(thb =="portugues") { return PORTUGUES; } else { return -1; }}function Dga(ogb){ try { var dia = ogb.split("~"); var Nnb = dia.length; var i; var thb; var XLb; for(i=0; i<Nnb; i+=2) { XLb = dia[i]; thb = dia[i+1]; $rw_setVoiceForLanguage(XLb, thb); } } catch(e) {}}function $rw_setSpeedValue(p_nSpeedValue){ if(typeof(p_nSpeedValue) =="number") { if(p_nSpeedValue > -4 && p_nSpeedValue < 101 && p_nSpeedValue != uca) { eba_speedValue = p_nSpeedValue; eba_speed_value = p_nSpeedValue; eba_reading_age = p_nSpeedValue; uca = p_nSpeedValue; try { if(bea) { var Lga = ZZb.getConnector(); if(Lga != null) { Lga.setSpeedValue(""+ uca); } } } catch(err) { thLogE(err); } } } else if(typeof(p_nSpeedValue) =="string") { var Emb = p_nSpeedValue.toUpperCase(); if(Emb =="VERY_SLOW_SPEED") { $rw_setSpeedValue(VERY_SLOW_SPEED); } else if(Emb =="SLOW_SPEED") { $rw_setSpeedValue(SLOW_SPEED); } else if(Emb =="MEDIUM_SPEED") { $rw_setSpeedValue(MEDIUM_SPEED); } else if(Emb =="FAST_SPEED") { $rw_setSpeedValue(FAST_SPEED); } else { var dOb = parseInt(p_nSpeedValue, 10); $rw_setSpeedValue(dOb); } }}function $rw_setVolumeValue(p_nVolumeValue){ if(typeof(p_nVolumeValue) =="number") { if(p_nVolumeValue >= -1 && p_nVolumeValue <= 100 && p_nVolumeValue != vca) { eba_volume_value = p_nVolumeValue; vca = p_nVolumeValue; try { if(bea) { var Lga = ZZb.getConnector(); if(Lga != null) { Lga.setVolumeValue(""+ vca); } } } catch(err) { thLogE(err); } } }}function $rw_setBarVisibility(gCb){ if(typeof(gCb) =="\x62oole\x61n") { var Mga = document.getElementById("r\x77Dr\x61g"); if(gCb) { Mga.style.visibility ="\x76\x69s\x69bl\x65"; Mga.style.display ="\x69nline"; } else { Mga.style.visibility ="\x68\x69dden"; Mga.style.display ="n\x6fn\x65"; } xca = !gCb; JCb(); }}function $rw_enableClickToSpeak(p_bEnable){ if(p_bEnable && !$g_bMouseSpeech) { $rw_event_hover(null, ida); } else if(!p_bEnable && $g_bMouseSpeech) { $rw_event_hover(null, ida); if(ida > -1) { var mma = nea; nea = 0; jya("hover"+"", ida, true); nea = mma; } }}function $rw_enableSpeachByBubbleMode(uxa){ if(typeof(aab) =="undefinded") { if(uxa) { alert("Bubble speech mode is not available."); } return; } if(Hca) { uda = uxa; if(!uda) { Ibb(); Jbb(); $rw_stopSpeech(); } } else { wda = !uxa; }}function $rw_enableContinuousReading(uxa){ rda = uxa; eba_continuous_reading = uxa; if(!rda) { sda = null; Cea = false; } else { if(typeof(eba_speak_selection_by_sentence) =="boolean") { Cea = eba_speak_selection_by_sentence; } else { Cea = true; } if($rw_isSpeaking() && ODb != null && sda == null) { oCb(); tCb(ODb); } }}var Oga = null;var eba_ignore_hidden;var Pga = true;var Qga ="The SpeechStream object will contain parameter objects in the future. It holds actionOnError cacheMode and pronunciation";var Rga = function(){ this.STOP = 0; this.SKIP = 1; this.action = this.STOP;};var Sga = function(){ this.NONE = 0; this.CACHE_WITH_LIVE_SERVER = 1; this.CACHE_ONLY = 2; this.CACHE_BUILDING_MODE = 3; this.mode = this.NONE; this.getLiveServer = function() { if(this.mode == this.NONE) { return dca; } else if(this.mode == this.CACHE_ONLY) { return null; } else if(this.mode == this.CACHE_WITH_LIVE_SERVER) { return eca; } else if(this.mode == this.CACHE_BUILDING_MODE) { if(eca != null) { return eca; } else { return dca; } } }; this.setCacheMode = function(p_nMode) { try { var flash = ZZb.getConnector(); if(flash != null) { switch(p_nMode) { case this.NONE: this.mode = this.NONE; eba_cache_mode = false; eba_cache_building_mode = false; eba_cache_live_generation = false; Ada = false; zca = false; Bda = false; flash.setCacheMode(false, false); break; case this.CACHE_WITH_LIVE_SERVER: this.mode = this.CACHE_WITH_LIVE_SERVER; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = true; Ada = true; zca = false; Bda = true; flash.setCacheMode(true, true); break; case this.CACHE_ONLY: this.mode = this.CACHE_ONLY; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = false; Ada = true; zca = false; Bda = false; flash.setCacheMode(true, false); break; case this.CACHE_BUILDING_MODE: this.mode = this.CACHE_BUILDING_MODE; eba_cache_mode = false; eba_cache_building_mode = true; eba_cache_live_generation = false; Ada = false; zca = true; Bda = false; flash.setCacheMode(true, true); break; default: Qra("Tried to set to an invalid mode, "+ p_nMode +" is not recognised."); } } } catch(err) { } };};SpeechStream.actionOnError = new Rga();SpeechStream.cacheMode = new Sga();function $rw_stopSpeech(){ $rw_event_stop();}var Uga = 200;function $rw_speakFromId(id){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var target = pga(id); if(target != null) { $rw_stopSpeech(); if(Cea) { var uma; uma = Fna(target, false); Fea = null; if(uma != null) { target = uma; } } Oga = target; rw_speakHoverTarget(target); } else { var ulb = document.getElementById(id); if(ulb != null) { ulb = gKb(ulb, false, null); $rw_speakCurrentSentence(ulb, 0); } }}function $rw_speakById(id){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var target = pga(id); if(target != null) { $rw_stopSpeech(); var uma; if(Cea) { uma = Fna(target, false); if(uma == null) { Fea = target; } } else { uma = target; } if(uma != null) { target = uma; rw_speakHoverTarget(target); } else { target.blockCache = !Gda; rw_speakHoverTarget(target); } Oga = target; }}function $rw_speakByIdFromFile(id, nEb){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var target = pga(id); if(target != null) { $rw_stopSpeech(); Oga = target; jEb(target, nEb); }}function $rw_speakByIdHighlightOnly(id){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var target = pga(id); if(target != null) { $rw_stopSpeech(); Oga = target; rw_speechHighlightOnly(target); }}function $rw_speakByIdWithSpeaker(id){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var target = pga(id); if(target != null) { $rw_stopSpeech(); Iea = id; Oga = target; rw_speakHoverTarget(target); }}function pga(id){ var bgb = document.getElementById(id); if(bgb != null) { var ega = bgb.innerHTML; if(ega.length > 0) { var WGb = BJb(bgb, true); if(WGb == null || WGb.nodeType != 3) { return null; } var XGb = FJb(bgb, true); if(XGb == null || XGb.nodeType != 3) { return null; } var Ggb = qSb(WGb, 0); var Hgb = (XGb.nodeType == 3)? qSb(XGb, XGb.nodeValue.length) : qSb(XGb, 0); var Mcb = new THRange(bgb.ownerDocument.body, Ggb, Hgb); var target = new THHoverTarget(null, null, Mcb); return target; } } return null;}function $rw_setSentenceFromSelection(){ try { var wab = $rw_getTHCaretRangeFromSelection(); if(wab == null) { return; } var Pgb = TJb(wab.Pgb); var Qgb = hJb(wab.Qgb); if(Pgb != null && Qgb != null) { var nga = new Bka(Pgb, Qgb); var Mcb = yHb(nga); if(Mcb != null) { Oga = new THHoverTarget(null, null, Mcb); } } } catch(err) { thLogE(err); }}function $rw_speakCurrentSentence(Wjb, kmb){ var fBb = (new Date).getTime(); var rga = (fBb - wfa); if(rga < Uga ) { return; } var Zha = xga(Wjb, kmb); if(Zha != null) { if(Zha.equals(Oga)) { if(rga < Uga * 5) { return; } } $rw_stopSpeech(); Oga = Zha; rw_speakHoverTarget(Zha); } wfa = fBb;}function $rw_speakCurrentSentenceHighlightOnly(Wjb, kmb){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } wfa = fBb; var Zha = xga(Wjb, kmb); if(Zha != null) { $rw_stopSpeech(); Oga = Zha; rw_speechHighlightOnly(Zha); }}function xga(Wjb, kmb){ var Mcb; var Zha; if(typeof(Wjb) =="undefined"|| Wjb == null) { if(Oga == null) { var wab = CLb(document.body); if(wab == null) { return null; } Mcb = yHb(wab); Zha = new THHoverTarget(null, null, Mcb); } else { Zha = Oga; } } else { if(Wjb instanceof Bka) { Mcb = yHb(Wjb); } else { var Hhb; if(typeof(kmb) =="undefined") { Hhb = new THCaret(Wjb, 0, true); } else { Hhb = new THCaret(Wjb, kmb, true); } var Pgb = TJb(Hhb); var Qgb = hJb(Hhb); if(Pgb == null || Qgb == null) { return null; } var wab = new Bka(Pgb, Qgb); if(wab == null) { return null; } Mcb = yHb(wab); } Zha = new THHoverTarget(null, null, Mcb); } return Zha;}function $rw_getCurrentTarget(){ return Oga;}function $rw_setCurrentTarget(pEb){ Oga = pEb;}function $rw_speakFirstSentence(){ var Kgb = null; if( Qca != null && Qca !="") { Kgb = document.getElementById(Qca); } if(Kgb == null) { Kgb = document.body; } Kgb = gKb(Kgb, false, null); $rw_speakCurrentSentence(Kgb, 0);}function $rw_speakNextSentence(){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } wfa = fBb; if(Oga == null) { $rw_speakCurrentSentence(); return; } var Wha = Oga.getCaretRange(); var yCb = hLb(Wha); if(yCb == null) { return; } if(uEb(Wha.Pgb.node, yCb.Pgb.node)) { return; } var Mcb = yHb(yCb); var Zha = new THHoverTarget(null, null, Mcb); $rw_stopSpeech(); Oga = Zha; rw_speakHoverTarget(Zha);}function $rw_speakNextSentenceHighlightOnly(){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } wfa = fBb; if(Oga == null) { $rw_speakCurrentSentenceHighlightOnly(); return; } var Wha = Oga.getCaretRange(); var yCb = hLb(Wha); if(yCb == null) { return; } var Mcb = yHb(yCb); var Zha = new THHoverTarget(null, null, Mcb); $rw_stopSpeech(); Oga = Zha; rw_speechHighlightOnly(Zha);}function $rw_speakPreviousSentence(){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } wfa = fBb; if(Oga == null) { $rw_speakCurrentSentence(); return; } var Wha = Oga.getCaretRange(); var Xha = tLb(Wha); if(Xha == null) { return; } if(uEb(Xha.Qgb.node, Wha.Qgb.node)) { return; } var Mcb = yHb(Xha); var Zha = new THHoverTarget(null, null, Mcb); $rw_stopSpeech(); Oga = Zha; rw_speakHoverTarget(Zha);}function $rw_speakPreviousSentenceHighlightOnly(){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } wfa = fBb; if(Oga == null) { $rw_speakCurrentSentenceHighlightOnly(); return; } var Wha = Oga.getCaretRange(); var Xha = tLb(Wha); if(Xha == null) { return; } var Mcb = yHb(Xha); var Zha = new THHoverTarget(null, null, Mcb); $rw_stopSpeech(); Oga = Zha; rw_speechHighlightOnly(Zha);}function $rw_getTHCaretRangeFromSelection(){ var lRb = jRb(); if(lRb != null && lRb.range instanceof THRange) { return KIb(lRb.range); } return null;}function $rw_isTextSelectedForPlay(){ if(bea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { return true; } if(g_nSpeakableTextAreaTimerId != 0) { return false; } return true; } else { if($rw_isPaused()) { return true; } var pma = jRb(); if(pma != null && pma.range != null) { var Mcb = pma.range; if(Mcb instanceof String) { return true; } else { var target = new THHoverTarget(null, null, Mcb); var Kjb = target.getTextPreparedForSpeech(); if(Kjb != null && Kjb.length > 0) { return true; } } } } } catch(err) { thLogE(err); } } return false;}function $rw_getNumberOfHighlights(){ if(typeof(Hcb) !="undefined") { return Hcb.length; } else { return 0; }}function $rw_getHighlightText(index){ if(typeof(Hcb) !="undefined"&& index > -1 && index < Hcb.length) { if (Jfa) { return Hcb[index].text; } else { return Hcb[index].toString(); } } return"";}function $rw_getHighlightColor(index){ if(typeof(Icb) !="undefined"&& index > -1 && index < Icb.length) { return Icb[index]; } return"";}function $rw_getHighlightColour(index){ return $rw_getHighlightColor(index);}function $rw_isPageLoaded(){ return (Hca && bea);}function $rw_highlightOnlyWTSFailed(){}function $rw_log(zmb){ Qra(zmb);}function $rw_setReadingAge(p_nAge){ if(typeof(p_nAge) =="string") { try { p_nAge = parseInt(p_nAge, 10); } catch(e) { thLogE(e); return; } } if(typeof(p_nAge) =="number") { switch(p_nAge) { case 1: case 2: case 3: case 4: $rw_setSpeedValue(READING_AGE_4); break; case 5: $rw_setSpeedValue(READING_AGE_5); break; case 6: $rw_setSpeedValue(READING_AGE_6); break; case 7: $rw_setSpeedValue(READING_AGE_7); break; case 8: $rw_setSpeedValue(READING_AGE_8); break; case 9: $rw_setSpeedValue(gba); break; case 10: $rw_setSpeedValue(READING_AGE_10); break; case 11: $rw_setSpeedValue(READING_AGE_11); break; case 12: $rw_setSpeedValue(READING_AGE_12); break; case 13: $rw_setSpeedValue(READING_AGE_13); break; case 14: $rw_setSpeedValue(READING_AGE_14); break; case 15: $rw_setSpeedValue(READING_AGE_15); break; case 16: $rw_setSpeedValue(READING_AGE_16); break; default: $rw_setSpeedValue(READING_AGE_10); } }}function $rw_getVoice(){ return eba_voice;}function $rw_getSpeed(){ return eba_speed_value;}function $rw_setCustomerId(p_strVal){ try { if(typeof(p_strVal) =="string") { var kha = QUb(p_strVal.trimTH()); if(lca != kha) { lca = kha; eba_cust_id = lca; var flash = ZZb.getConnector(); if(flash != null) { flash.setCustomerId(lca); } var ulb = document.getElementById("editPageMsg"); if(ulb != null) { ulb.innerHTML =""; } if(Zfa ) { rVb.deleteAll(); uWb(); } nha(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setBookId(p_strVal){ try { if(typeof(p_strVal) =="string") { var kha = QUb(p_strVal.trimTH()); if(mca != kha) { mca =kha; eba_book_id = mca; var flash = ZZb.getConnector(); if(flash != null) { flash.setBookId(mca); } var ulb = document.getElementById("editPageMsg"); if(ulb != null) { ulb.innerHTML =""; } if(Zfa ) { rVb.deleteAll(); uWb(); } nha(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setPageId(p_strVal){ try { if(typeof(p_strVal) =="string") { var kha = QUb(p_strVal.trimTH()); if(nca != kha) { nca = kha; eba_page_id = nca; var flash = ZZb.getConnector(); if(flash != null) { flash.setPageId(nca); } var ulb = document.getElementById("editPageMsg"); if(ulb != null) { ulb.innerHTML =""; } if(Zfa ) { rVb.deleteAll(); uWb(); } nha(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setSymbolText(Qnb){ if(Qnb != null && typeof(Qnb) =="string"&& Qnb.length > 0) { afa = true; bfa = new Array(); cfa = new Object(); dTb(dfa); dTb(Qnb); }}function nha(){ if(Mda) { if(Oda !="*"&& typeof(Rhb) !="undefined") { var Qfb = Mda; Mda = false; ydb(true); Mda = Qfb; } if(Nda !="*"&& typeof(xkb) !="undefined") { Jkb(); } if(Oda !="*"&& typeof(Rhb) !="undefined") { Rhb(); } else { if(Nda !="*"&& typeof(xkb) !="undefined") { xkb(); } } }}function pha(){ Nea = vha(); Kea = 0; Lea = 1; if(Rea) { Fda = 1; $rw_setSpeedValue(SLOW_SPEED); } Jea = CLb(document.body); Kea = rha(Jea); Mea = Nea.length; Oea = -1; Fia(true);}function rha(sha){ var rBb = sha; var i = 0; while(rBb != null) { i++; rBb = hLb(rBb); } i += Nea.length; if(Rea) { return i * 3; } else { return i; }}function vha(){ var tha = new Array(); if(tda) { return tha; } var uha = document.getElementsByTagName("img"); var Nnb = uha.length; var i; for(i=0; i<Nnb;i++) { var xha = uha[i]; if(xha.style.display =="none"&& Pga) { continue; } if(yMb(xha)) { continue; } if(xha.getAttribute("msg")!= null) { continue; } var RNb = xha.getAttribute("title"); if(RNb != null && RNb.length > 0) { if(RNb.trimTH().length > 0) { tha.push(xha); } } else { RNb = xha.getAttribute("alt"); if(RNb != null && RNb.length > 0) { if(RNb.trimTH().length > 0) { tha.push(xha); } } } } return tha;}function zha(Wjb){ if(Wjb == null) { return""; } var oab = Wjb.getAttribute("title"); if(oab != null && oab.length > 0) { return oab; } else { var pab = Wjb.getAttribute("alt"); if(pab != null && pab.length > 0) { return pab; } else { var qab = Wjb.getAttribute("msg"); if(qab != null && qab.length > 0) { return qab; } } } return"";}function Fia(Gia){ var Xmb =""; var Hia =""; var Iia = null; if(Jea == null) { var lTb = false; if(Oea < Mea ) { if(Oea > -1 && Oea < Nea.length) { var Kia = zha(Nea[Oea]); if(Kia.trimTH().length > 0) { if(sca) { Iia = CBb(Nea[Oea]); } var cFb = new SpeechStream.SpeechRequest(); cFb.setString(Kia, SpeechStream.SpeechRequestBookmarks.OUTER); Hia = cFb.getText(); Xmb = cFb.getFinalText(); lTb = true; } } } if(!lTb) { if(Gia) { $rw_autogenSpeechFilesCallback("Success"); } else { $rw_checkAutogenCachedFilesCallback("Success"); } return; } } else { var UHb = RFb(Jea, new Array()); Iia = UHb.voice; if(UHb.Ghb != null) { Jea = UHb.Ghb; Kea++; } Xmb = UHb.Kjb; Hia = UHb.gEb; } var flash = ZZb.getConnector(); if(flash != null) { var bHb = nHb(); var tna; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { tna = jQb(Xmb); } else { tna = jQb(Hia); } if(Cda) { var hHb = oHb(tna); bHb = bHb +"/"+ hHb; } if(Gia) { var wna = jsa(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.autogenSpeechFiles(Xmb, bHb, tna, !Yfa, wna); } else { var cgb = bHb +"/"+ tna; flash.checkAutogenCachedFiles(cgb); } }}function $rw_autogenSpeechFilesCallback(Xia){ if(Xia =='Success') { var Yia = false; if(Rea ) { if(Fda == 1 || Fda == 2) { Fda++; } else { Fda = 1; Yia = true; } switch(Fda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Yia = true; } if(Yia) { Jea = hLb(Jea, null); if(Jea != null) { Lea++; if(Kea >= Lea) { $rwj('#pb1').progressBar((Lea / Kea) * 100); Fia(true); } else { $rwj.unblockUI(); Xea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!Vea) { alert(Xea); } if(typeof(Uea) =="string") { spa(Uea); } } } else { if(Mea > 0 && Oea < (Mea - 1)) { ++Lea; $rwj('#pb1').progressBar((Lea / Kea) * 100); ++Oea; Fia(true); } else { $rwj.unblockUI(); var wna = jsa(true) + SpeechStream.cacheMode.getLiveServer() +"/"; var flash = ZZb.getConnector(); flash.autoGenComplete(wna); if(Uea == null && !Vea) { alert("Page Cached Successfully!"); } } } } else { Lea++; Fia(true); } } else { $rwj.unblockUI(); Xea = Xia; if(!Vea) { alert(Xia); } if(typeof(Uea) =="string") { spa(Uea); } }}function Wia(){ Nea = vha(); Kea = 0; Lea = 1; Pea = 0; Qea = 0; if(Rea) { Fda = 1; $rw_setSpeedValue(SLOW_SPEED); } Jea = CLb(document.body); Kea = rha(Jea); Mea = Nea.length; Oea = -1; Fia(false);}function $rw_checkAutogenCachedFilesCallback(Xia){ if(Xia =='Success') { ++Pea; } else { ++Qea; } var Yia = false; if(Rea) { if(Fda == 1 || Fda == 2) { Fda++; } else { Fda = 1; Yia = true; } switch(Fda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Yia = true; } if(Yia) { Jea = hLb(Jea, null); if(Jea != null) { Lea++; if(Kea >= Lea) { $rwj('#pb1').progressBar((Lea / Kea) * 100); Fia(false); } else { $rwj.unblockUI(); Xea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!Vea) { alert(Xea); } if(typeof(Uea) =="string") { spa(Uea); } } } else { if(Mea > 0 && Oea < (Mea-1)) { ++Lea; $rwj('#pb1').progressBar((Lea / Kea) * 100); ++Oea; Fia(false); } else { $rwj.unblockUI(); if(Qea > 0) { Xea ="Missing files!  Checked page and found that "+ Qea +" sentences out of "+ Lea +" where not cached."; Wea = Qea; if(!Vea) { alert(Xea); } } if(typeof(Uea) =="string") { spa(Uea); } else { if(Qea == 0 && !Vea) { alert("Checked page and found that all "+ Lea +" sentences were cached."); } } } } } else { Lea++; Fia(false); }}function $rw_autogenCompleteCallback(Xia){ if(Xia !="Success") { Xea = Xia; if(!Vea) { alert("Finished autogeneration process.  "+ Xia); } } if(typeof(Uea) =="string") { spa(Uea); } }function $rw_setTranslateSource(AZb){ nhb.setSource(AZb);}function $rw_setTranslateTarget(p_strTarget){ nhb.setTarget(p_strTarget);}var Zia = null;var aia = null;function $rw_getTouchSelection(){ if (window.getSelection().rangeCount>0 && !window.getSelection().isCollapsed) { Zia = window.getSelection().getRangeAt(0).cloneRange(); aia = window; } else { Zia = null; aia = null; var Deb = dQb(window); if(Deb) { var dbb = Deb.getSelection(); if (dbb.rangeCount>0 && !dbb.isCollapsed) { Zia = dbb.getRangeAt(0).cloneRange(); aia = Deb; } } }}function $rw_setBreakList(p_strList){ var dia = p_strList.split("~"); var i; for(i=0; i<dia.length; i++) { var rkb = dia[i]; if(rkb.length > 0) { if(rkb.charAt(0) =="!") { rkb = rkb.substring(1); if(nfa.indexOf("~"+ rkb +"~") != -1) { var omb = nfa.indexOf("~"+ rkb +"~"); var pmb = omb + 1 + rkb.length; nfa = nfa.substring(0, omb) + nfa.substring(pmb); } if(pfa.indexOf("~"+ rkb +"~") == -1) { pfa += rkb +"~"; } } else { if(nfa.indexOf("~"+ rkb +"~") == -1) { nfa += rkb +"~"; } if(pfa.indexOf("~"+ rkb +"~") != -1) { var omb = pfa.indexOf("~"+ rkb +"~"); var pmb = omb + 1 + rkb.length; pfa = pfa.substring(0, omb) + pfa.substring(pmb); } } } }}function $rw_parseNewSection(Wjb){ try { if(Wjb != null) { $rw_tagSentencesForDynamicSection(Wjb); if(Nda !="*"&& typeof(xkb) !="undefined") { if(uib != -1) { ljb(uib); var Zlb = function(){$rw_parseNewSection(Wjb);}; setTimeout(Zlb, 100); return; } Jkb(); } if(typeof($rw_refreshHighlights) =="function"&& Mda) { if(yfb == 1) { yfb = 2; } $rw_refreshHighlights(); } else { if(typeof(xkb) =="function"&& Mda) { xkb(); } } } } catch(err) { Qra(err.message); }}var Twa ="[\\x21\\x2E\\x3F\\x3A]";var Uwa = /[\n\r\t ]{2,}/g;function $rw_tagSentencesForDynamicSection(Wjb){ if(Wjb == null) { return; } try { var Vwa = false; var oNb = hIb(Wjb, false, Wjb); while(oNb != null) { if(oNb.nodeType == 3) { var sNb = oNb.parentNode.tagName.toLowerCase(); if(sNb =="textarea") { oNb = UIb(oNb, false, Wjb); continue; } var Kjb = oNb.nodeValue; var awa = Kjb.trimSpaceTH(); var Dxa = awa.length > 0; if(cda && sNb =="a") { Dxa = false; } if(!Dxa) { if(Mda || Ada && (oda || Lda || Bea) ) { if(Vwa) { if(!cda) { oNb.nodeValue =" "; } Vwa = false; oNb = UIb(oNb, false, Wjb); } else { var Vhb = oNb; oNb = UIb(oNb, false, Wjb); if(!cda) { Vhb.parentNode.removeChild(Vhb); } } } else { oNb = UIb(oNb, false, Wjb); } } else { if(!cda) { if(Mda || Ada && (oda || Lda || Bea) ) { if(awa.length < Kjb.length) { var Vcb = false; awa = Kjb.trimSpaceStartTH(); if((Kjb.length - awa.length) > 0) { if(Vwa) { Kjb =" "+ awa; } else { Kjb = awa; } Vcb = true; } awa = Kjb.trimSpaceEndTH(); if((Kjb.length - awa.length) > 1) { Kjb = awa +" "; Vwa = false; Vcb = true; } awa = Kjb.replace(Uwa," "); if(awa.length < Kjb.length) { Kjb = awa; Vcb = true; } if(Vcb) { oNb.nodeValue = Kjb; } } } } var Rnb; Rnb = Kjb.search(Twa); var fwa = (oNb.parentNode.getAttribute("texthelpSkip") != null); var gwa = oNb; if(Rnb > -1 && Rnb < (Kjb.length - 1)) { var hwa = true; while(true) { var xgb = Mxa(Kjb, Rnb, oNb); if(xgb) { break; } else { var jwa = Kjb.substring(Rnb + 1); var Mbb = jwa.search(Twa); if(Mbb > -1) { Rnb = Rnb + 1 + Mbb; } else { hwa =false; break; } } } if(hwa) { var Umb = Kjb.substring(0, Rnb + 1); var dMb = Kjb.substring(Rnb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Umb); var hMb = document.createTextNode(dMb); var wwa = oNb.parentNode; wwa.insertBefore(hMb, oNb); wwa.insertBefore(span, hMb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = hMb; gwa = gMb; } else { if(oNb.previousSibling != null || oNb.nextSibling != null || fwa) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Kjb); var wwa = oNb.parentNode; wwa.insertBefore(span, oNb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = gMb; } gwa = oNb; oNb = UIb(oNb, false, null); } } else { if(oNb.previousSibling != null || oNb.nextSibling != null || fwa) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Kjb); var wwa = oNb.parentNode; wwa.insertBefore(span, oNb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = gMb; } gwa = oNb; oNb = UIb(oNb, false, null); } if(Mda || Ada && (oda || Lda || Bea) ) { var xwa = gwa.nodeValue; var ywa = gwa.nodeValue.length; if(ywa > 0 && xwa.charCodeAt(ywa - 1) == 32) { Vwa = false; } else { Vwa = true; } } } } else if(oNb.nodeType == 1) { if(Mda) { if(!kMb(oNb)) { if(BNb(oNb)) { Vwa = false; } } else if(oNb.tagName.toLowerCase() =="img") { Vwa = true; } } if(oda) { if(oNb.tagName.toLowerCase() =="img") { var RNb = oNb.getAttribute("title"); oNb.setAttribute("msg", RNb); } } else if(tda) { if(oNb.tagName.toLowerCase() =="img") { var RNb = oNb.getAttribute("msg"); if(!(RNb != null && RNb.length > 0)) { RNb = oNb.getAttribute("title"); if(RNb != null && RNb.length > 0) { oNb.setAttribute("msg", RNb); } else { RNb = oNb.getAttribute("alt"); oNb.setAttribute("msg", RNb); } } } } var Hxa = oNb.getAttribute(caa); var Ixa = oNb.getAttribute(baa); if(oNb.tagName.toLowerCase() =="pre"|| (Hxa != null && Hxa.length > 0) || (Ixa != null && Ixa.length > 0)) { oNb = vIb(oNb, false, Wjb); } else { oNb = UIb(oNb, false, Wjb); } } else { oNb = UIb(oNb, false, Wjb); } } if(Mda) { oNb = hIb(Wjb, false, Wjb); while(oNb != null) { if(oNb.nodeType==3) { var Dxa = oNb.nodeValue.trimTH().length > 0; if(Dxa) { var Exa = oNb.parentNode; var Gxa = Exa.getAttribute("rwthgen"); while((Gxa != null && Gxa.length > 0)) { Exa = Exa.parentNode; Gxa = Exa.getAttribute("rwthgen"); } var Fxa = Exa.getAttribute("id"); if(Fxa != null && Fxa.substr(0,14) =="rwTHnoteMarker") { var gkb = Fxa; Exa.id =""; Fxa = null; if(Exa.nextSibling == null && Exa.previousSibling == null && (Exa.parentNode.id==null||Exa.parentNode.id=="") ) { Exa.parentNode.id = gkb; } else { var Ava = Exa.ownerDocument.createElement("span"); Exa.id = gkb; while(Exa.firstChild != null) { Ava.appendChild(Exa.firstChild); } Exa.appendChild(Ava); Exa = Ava; } } if(Fxa == null || Fxa.length == 0 ) { var Blb = jja(oNb); if(Blb != null) { Exa.id = Blb; } } } oNb = UIb(oNb, false, Wjb); } else if(oNb.nodeType == 1) { if(Vjb(oNb)) { if(oNb.tagName.toLocaleLowerCase() =="img") var Gxa = oNb.getAttribute("id"); if(Gxa != null && Gxa.substr(0,14) =="rwTHnoteMarker") { var gkb = Gxa; oNb.id =""; Gxa = null; if(oNb.nextSibling == null && oNb.previousSibling == null && (oNb.parentNode.id==null||oNb.parentNode.id=="") ) { oNb.parentNode.id = gkb; } else { var Ava = oNb.ownerDocument.createElement("span"); Ava.id = gkb; oNb.parentNode.insertBefore(Ava, oNb); Ava.appendChild(oNb); } } if(Gxa == null || Gxa.length == 0) { var Blb = nja(oNb); if(Blb != null) { oNb.id = Blb; } } } var Hxa = oNb.getAttribute(caa); var Ixa = oNb.getAttribute(baa); if( oNb.tagName.toLowerCase() =="pre"|| (Hxa != null && Hxa.length > 0) || (Ixa != null && Ixa.length > 0)) { oNb = vIb(oNb, false, Wjb); } else { oNb = UIb(oNb, false, Wjb); } } else { oNb = UIb(oNb, false, Wjb); } } } } catch(exception) { Qra("Error in $rw_tagSentences: "+ exception); } nda = true;}function jja(Wjb){ if(Wjb != null && Wjb.nodeType == 3) { var Iab = Wjb.ownerDocument; var ajb = Iab.body; var Kjb = Wjb.nodeValue; if(Kjb != null) { Kjb = Kjb.replace(/\s+/g,""); var nAb = Wjb.parentNode; while(nAb != null && nAb.parentNode != null) { nAb = nAb.parentNode; if(nAb.id != null&&nAb.id.length>0) { if(nAb.id.substr(0, 4) !="rwTH") { Kjb = nAb.id + Kjb; break; } } if(nAb == ajb) { break; } } var Blb ="rwTH"+ uGb(Kjb); if(Iab.getElementById(Blb) != null) { var n = 1; while(Iab.getElementById(Blb + n) != null) { ++n; } Blb = Blb + n; } return Blb; } } return null;}function nja(Wjb){ if(Wjb != null && Wjb.nodeType == 1 && Wjb.tagName.toLocaleLowerCase() =="img") { var Iab = Wjb.ownerDocument; var ajb = Iab.body; var Kjb = Wjb.src; if(Kjb != null) { Kjb = Kjb.replace(/\s+/g,""); var nAb = Wjb; while(nAb != null && nAb.parentNode != null) { nAb = nAb.parentNode; if(nAb.id != null&&nAb.id.length>0) { if(nAb.id.substr(0, 4) !="rwTH") { Kjb = nAb.id + Kjb; break; } } if(nAb == ajb) { break; } } var Blb ="rwTH"+ uGb(Kjb); if(Iab.getElementById(Blb) != null) { var n = 1; while(Iab.getElementById(Blb + n) != null) { ++n; } Blb = Blb + n; } return Blb; } } return null;}var uja = -10;function THCaret(Wjb, kmb, GPb){ this.node = Wjb; this.offset = kmb; this.forwardBias = GPb; if(dFb(this.node)) { this.offset = uja; }}THCaret.prototype.isSpecialCase = function(){ return (this.offset == uja);};THCaret.prototype.check = function(){ var xgb = true; if(this.node == null || this.node.parentNode == null) { xgb = false; } else { if( this.node.nodeType != 3) { if(this.node.nodeType == 1 && this.offset == uja) { } else { xgb = false; } } else if(this.offset < 0 || this.offset >this.node.nodeValue.length) { xgb = false; } } return xgb;};THCaret.prototype.toString = function(){ var Kjb ="THCaret "; if(this.node != null) { if(this.node.nodeType == 3) { Kjb += this.node.nodeValue +" "+ this.node.parentNode.tagName +" "; } else if(this.node.nodeType == 1) { Kjb += this.node.tagName +" "; } } Kjb += this.offset; return Kjb;};THCaret.prototype.equals = function(Wgb){ if(Wgb == null) { return false; } return this.node == Wgb.node && this.offset == Wgb.offset && this.forwardBias == Wgb.forwardBias;};function Bka(gLb, MGb){ this.Pgb = gLb; this.Qgb = MGb;}Bka.prototype.equals = function(HMb){ if(HMb == null) { return false; } return this.Pgb.equals(HMb.Pgb) && this.Qgb.equals(HMb.Qgb);};Bka.prototype.toString = function(){ return rw_getTextOverCaretRange(this);};function Fka(Gka){ this.command = null; this.nxa = null; if(Gka != null) { var Rnb = Gka.indexOf(":"); if(Rnb > -1) { this.command = Gka.substr(0, Rnb).toLowerCase(); this.nxa = Gka.substr(Rnb + 1); } else { this.command = Gka.toLowerCase(); } }}Fka.prototype.CMD_LIST ="list";Fka.prototype.CMD_STOP ="stop";Fka.prototype.CMD_STOPAFTER ="stopafter";Fka.prototype.CMD_JUMP ="jump";Fka.prototype.CMD_VOICE ="voice";Fka.prototype.CMD_PAGEID ="pageid";Fka.prototype.CMD_BOOKID ="bookid";Fka.prototype.CMD_EXEC ="exec";Fka.prototype.CMD_EXECAFTER ="execafter";function Kka(Wjb){ var Hka = []; if(Wjb != null) { var ajb = Wjb.ownerDocument.body; var Vhb = Wjb; if(Vhb.nodeType == 3) { Vhb = Vhb.parentNode; } if(Vhb.nodeType != 1) { return Hka; } while(Vhb != null && Vhb != ajb) { if(Vhb.getAttribute("texthelpCmd") != null) { var sfb = Vhb.getAttribute("texthelpCmd").trimTH(); if(sfb == Fka.prototype.CMD_LIST || sfb == (Fka.prototype.CMD_LIST +":")) { var yeb = 1; sfb = Vhb.getAttribute(("texthelpCmd"+ yeb)); while(sfb != null) { Hka.push(new Fka(sfb)); ++yeb; sfb = Vhb.getAttribute(("texthelpCmd"+ yeb)); } } else { Hka.push(new Fka(sfb)); } break; } Vhb = Vhb.parentNode; } } return Hka;}function Qka(Wjb){ if(Wjb != null) { var ajb = Wjb.ownerDocument.body; var Vhb = Wjb; if(Vhb.nodeType == 3) { Vhb = Vhb.parentNode; } if(Vhb.nodeType != 1) { return null; } while(Vhb != null && Vhb != ajb) { if(Vhb.getAttribute("texthelpCmd") != null) { return Vhb; } Vhb = Vhb.parentNode; } } return null;}function Xka(pEb){ if(qfa) { var dEb = pEb.getCaretRange(); if(dEb != null) { var Tka = Kka(dEb.Qgb.node); if(Tka.length > 0) { var Uka = false; for(var i=0; i<Tka.length; i++) { var cmd = Tka[i]; if(cmd.command == cmd.CMD_STOP) { Uka = true; } else if(cmd.command == cmd.CMD_STOPAFTER) { pEb.allowContinuous = false; } else if(cmd.command == cmd.CMD_JUMP) { pEb.jumpId = cmd.nxa; } else if(cmd.command == cmd.CMD_VOICE) { pEb.voice = cmd.nxa; } else if(cmd.command == cmd.CMD_PAGEID) { pEb.pageId = cmd.nxa; } else if(cmd.command == cmd.CMD_BOOKID) { pEb.bookId = cmd.nxa; } else if(cmd.command == cmd.CMD_EXEC) { try { eval(cmd.nxa); } catch(err) { thLogE(err.message); } } else if(cmd.command == cmd.CMD_EXECAFTER) { var Wka ="try{eval(\""+ cmd.nxa +"\");}catch(err){thLogE(err.message);}"; nCb.push(Wka); } } if(Uka) { pEb.valid = false; } } } }}SpeechStream.DateFilterModes = {DATE:2,NUMBER:1,NONE:0};SpeechStream.DateFilter = function(){ var Zka = 2; var aka = SpeechStream.DateFilterModes; var bka = /^[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+|[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+$/g;this.setMode = function(p_nMode) { var cka = parseInt(p_nMode, 10); if(cka == aka.NONE || cka == aka.NUMBER || cka == aka.DATE) { Zka = cka; } else if(typeof(p_nMode) =="string") { if(p_nMode =="NONE") { Zka = aka.NONE; } else if(p_nMode =="NUMBER") { Zka = aka.NUMBER; } else if(p_nMode =="DATE") { Zka = aka.DATE; } } };this.getMode = function() { return Zka; };this.checkDatesFromString = function(Qnb) { var Vcb = false; var wordList = Qnb.split(" "); Vcb = this.checkDatesFromList(wordList); if(Vcb) { var Nnb = wordList.length; var yTb =""; for(i=0; i<Nnb - 1; i++) { yTb += wordList[i]; yTb +=" "; } yTb += wordList[Nnb - 1]; return yTb; } else { return Qnb; } };this.checkDatesFromList = function(VWb) { var rkb; var Vcb = false; var Nnb = VWb.length; var i; for(i=0; i<Nnb; i++) { rkb = ska(VWb[i]); if(rkb != VWb[i]) { VWb[i] = rkb; Vcb = true; } } return Vcb; };function lka(zFb) { var gib; switch(Zka) { case 0: gib = zFb; break; case 1: if(pka(zFb)) { gib =" "+ zFb.substring(0, 1) +","+ zFb.substring(1, 4) +" "; } else { gib = zFb; } break; case 2: if(pka(zFb)) { var ghb = parseInt(zFb, 10); var oka = parseInt(zFb.substring(2,4), 10); if(ghb < 1000) { gib = zFb; } else if( ( (ghb >= 1000 && ghb < 2000) || ghb >= 2100 ) && oka == 0 ) { gib =" "+ zFb.substring(0, 2) +" hundred "; } else if( ( (ghb >= 1000 && ghb < 2000) || ghb >= 2100 ) && ( oka > 0 && oka < 10 ) ) { gib =" "+ zFb.substring(0, 2) +" oh "+ zFb.substring(3, 4) +" "; } else if( ( (ghb >= 1000 && ghb < 2000) || ghb >= 2010 ) && oka >= 10 ) { gib =" "+ zFb.substring(0, 2) +" "+ zFb.substring(2, 4) +" "; } else if(ghb == 2000) { gib =" two thousand "; } else if(ghb > 2000 && ghb < 2010) { gib =" two thousand and "+ zFb.substring(3, 4) +" "; } else { gib = zFb; } } else { gib = zFb; } break; default: gib = zFb; break; } return gib; }; function pka(zFb) { if(zFb.length == 4) { if(!isNaN(zFb)) { if(parseInt(zFb, 10) >= 1000) { return true; } } } return false; };function ska(Qnb) { if(Qnb == null) { return Qnb; } var Xmb = Qnb.replace(bka,''); if(Xmb.length == 4) { var yTb = lka(Xmb); if(yTb != Xmb) { var n = Qnb.indexOf(Xmb); return Qnb.substring(0, n) + yTb + Qnb.substring(n + 4); } } return Qnb; };};var vka = new SpeechStream.DateFilter();var wka = -1;var xka = 0;var yka = 1;var zka = 2;var Ala = 3;var Bla = 4;var Cla = 5;var Dla = 6;var Ela = 7;var Fla = 8;function Gla(vEb, Nla, cSb, Ola){ this.body = vEb.ownerDocument.body; this.Hhb = new THCaret(vEb, Nla, true); this.Ihb = new THCaret(cSb, Ola, false); this.Ggb = qSb(vEb, Nla); this.Hgb = qSb(cSb, Ola);};Gla.prototype.refresh = function(){ with (this) { if(Hhb.check() == false || Ihb.check() == false) { var Ghb = JPb(this.body, this.Ggb.path, this.Ggb.offset, this.Hgb.path, this.Hgb.offset); var Hhb = Ghb.Pgb; var Ihb = Ghb.Qgb; if(Hhb == null && Ihb == null) { Hhb = new THCaret(document.body, 0, true); Ihb = new THCaret(document.body, 0, false); } else if(Hhb == null || Ihb == null) { if(Hhb == null) { Hhb = new THCaret(Ihb.node, Ihb.offset, true); } else { Ihb = new THCaret(Hhb.node, Hhb.offset, false); } } } }};Gla.prototype.toString = function(){ this.refresh(); var range = Fra(this.body); range.setStart(this.Hhb.node, this.Hhb.offset); range.setEnd(this.Ihb.node, this.Ihb.offset); return range.toString();};Gla.prototype.getStartAsRange = function(){ var range = Fra(this.body); range.setStart(this.Hhb.node, this.Hhb.offset); range.setEnd(this.Hhb.node, this.Hhb.offset); return range;};Gla.prototype.getEndAsRange = function(){ var range = Fra(this.body); range.setStart(this.Ihb.node, this.Ihb.offset); range.setEnd(this.Ihb.node, this.Ihb.offset); return range;};Gla.prototype.equals = function(pEb){ return (this.Ggb.path == pEb.Ggb.path && this.Ggb.offset == pEb.Ggb.offset && this.Hgb.path == pEb.Hgb.path && this.Hgb.offset == pEb.Hgb.offset);};Gla.prototype.compareRange = function(pEb){ if(this.equals(pEb)) { return xka; } this.refresh(); pEb.refresh(); var Sla = this.getStartAsRange(); var Tla = this.getEndAsRange(); var Ula = pEb.getStartAsRange(); var Vla = pEb.getEndAsRange(); var Wla = Sla.compareBoundaryPoints("START_TO_START", Ula); var Xla = Sla.compareBoundaryPoints("START_TO_START", Vla); var Yla = Tla.compareBoundaryPoints("START_TO_START", Ula); var Zla = Tla.compareBoundaryPoints("START_TO_START", Vla); var lmb = wka; if(Xla > -1) { lmb = yka; } else if(Yla < 1) { lmb = zka; } else if(Wla == -1) { if(Zla == -1) { lmb = Dla; } else { lmb = Ala; } } else if(Wla == 0) { if(Zla == -1) { lmb = Ela; } else if(Zla == 0) { lmb = xka; } else { lmb = Ala; } } else { if(Zla == -1) { lmb = Bla; } else if(Zla == 0) { lmb = Fla; } else { lmb = Cla; } } return lmb;};function THDomRefPt(uOb, kmb){ this.path = uOb; this.offset = kmb;};THDomRefPt.prototype.isSpecialCase = function(){ return (this.offset == uja);};THDomRefPt.prototype.toString = function(){ return"THDomRefPt "+ this.path +" "+ this.offset;};function THHoverTarget(cVb, uOb, hla){ this.body = cVb; this.path = uOb; this.range = hla; this.uTb = null; this.blockCache = false; this.textToSpeak = null; this.textToSpeakNoChanges = null; this.allowContinuous = true; this.useHighlighting = true; this.prepared = false; this.valid = true; this.jumpId = null; this.voice = null; this.pageId = null; this.bookId = null;}THHoverTarget.prototype.isRange = function(){ return this.range != null; };THHoverTarget.prototype.isValid = function(){ return this.valid;};THHoverTarget.prototype.isOverridingGlobal = function(){ return this.voice != null || this.pageId != null || this.bookId != null;};THHoverTarget.prototype.getCaretRange = function(){ var Ghb; if(this.isRange()) { Ghb = JPb(this.range.body, this.range.Ggb.path, this.range.Ggb.offset, this.range.Hgb.path, this.range.Hgb.offset); } else { var caret = pOb(this.body, this.path, -1, true); Ghb = new Bka(caret, caret); } return Ghb;};THHoverTarget.prototype.getTextPreparedForSpeech = function(){ this.prepareTextForSpeech(); return this.textToSpeak;};THHoverTarget.prototype.prepareTextForSpeech = function(){ if(this.prepared) { return; } var kla; var lla; if(this.isRange()) { this.uTb = new Array(); var mla = EFb(this.range.body, this.range.Ggb, this.range.Hgb, this.uTb); this.voice = mla.voice; if(mla.Ghb != null) { var XFb = mla.Ghb; this.range = yHb(XFb); } kla = mla.Kjb; lla = mla.gEb; } else { var caret = pOb(this.body, this.path, -1, true); if(caret != null && caret.node != null) { var pla = JTb(caret.node); if(pla.trimTH().length == 0) { kla =""; lla =""; } else { if(sca) { this.voice = CBb(caret.node); } else { this.voice = null; } var cFb = new SpeechStream.SpeechRequest(); cFb.setString(pla, SpeechStream.SpeechRequestBookmarks.OUTER); kla = cFb.getFinalText(); lla = cFb.getText(); } } else { kla =""; lla =""; } } this.textToSpeak = kla; this.textToSpeakNoChanges = lla; this.prepared = true;};THHoverTarget.prototype.highlightRange = function(){ try { if(this.range != null) { var Ghb = JPb(this.range.body, this.range.Ggb.path, this.range.Ggb.offset, this.range.Hgb.path, this.range.Hgb.offset); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Qgb != null) { rw_setSpeechRangeImpl(Pgb.node, Pgb.offset, Qgb.node, Qgb.offset,"sp"); } else { } } } catch(err) { Qra("Error in THHoverTargetClass:highlightRange: "+ err.message); }};THHoverTarget.prototype.unhighlightRange = function(){ try { if(this.range != null) { var Ghb = JPb(this.range.body, this.range.Ggb.path, this.range.Ggb.offset, this.range.Hgb.path, this.range.Hgb.offset); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Qgb != null) { rw_removeSpeechHighlight(Gqa(Pgb, Qgb), false); } else { } } } catch(err) { Qra("Error in THHoverTarget:unhighlightRange: "+err.message); }};THHoverTarget.prototype.equals = function(Dbb){ if(Dbb == null) { return false; } if(this.isRange() != Dbb.isRange()) { return false; } if(this.isRange()) { return this.range.equals(Dbb.range); } else { return this.path.equalsTH(Dbb.path); }};THHoverTarget.prototype.equalsAprox = function(Dbb){ if(Dbb == null) { return false; } if(this.isRange() != Dbb.isRange()) { return false; } if(this.isRange()) { if(this.range.equals(Dbb.range)) { return true; } var r1 = this.getCaretRange(); var r2 = Dbb.getCaretRange(); r1 = Sna(r1); r2 = Sna(r2); return r1.equals(r2); } else { return this.path.equalsTH(Dbb.path); }};THHoverTarget.prototype.toString = function(){ var Kjb ="THHoverTarget "; if(this.path != null) { Kjb+="path="+ this.path; } else if(this.range != null) { Kjb+= this.range.toString(); } return Kjb;};SpeechStream.pronunciation = new function(){ this.NONE = 0; this.SERVER_PRONUNCIATION = 1; this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE = 2; this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER = 3; this.mode = this.SERVER_PRONUNCIATION; this.checkPronunciation = function() { return (this.mode != this.NONE && SpeechStream.cacheMode.mode != SpeechStream.cacheMode.CACHE_ONLY && this.mode != this.SERVER_PRONUNCIATION); }; this.fetchData = function() { if(this.mode == this.NONE || SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { return false; } if(this.mode != this.SERVER_PRONUNCIATION) { return true; } else { if( (Zca & pronCreate_icon) == pronCreate_icon || (Zca & pronEdit_icon) == pronEdit_icon ) { return true; } } return false; }; this.encodeData = function() { return (this.mode != this.NONE && this.mode != this.SERVER_PRONUNCIATION); }; this.setPronunciation = function(p_nMode) { if(p_nMode == this.NONE || p_nMode == this.SERVER_PRONUNCIATION || p_nMode == this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE || p_nMode == this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { this.mode = p_nMode; } };}; SpeechStream.Dictionary = function(){function yla(Pma) { return(this["+"+ Pma]); }function Bma(Pma) { var Gma ="+"+ Pma; this[Gma] = null; delete this[Gma]; var Rnb = this.Keys$__.indexOf(Pma); if(Rnb > -1) { this.Keys$__.splice(Rnb, 1); } Rnb = this.AllPageKeys$__.indexOf(Pma); if(Rnb > -1) { this.AllPageKeys$__.splice(Rnb, 1); } if(Pma.indexOf(" ") > -1) { var Rnb = Pma.indexOf(" "); var fHb = Pma.substring(0, Rnb); Rnb = this.MultiwordStart$__.indexOf(fHb); if(Rnb > -1) { this.MultiwordStart$__.splice(Rnb, 1); } } }function Hma(Pma, bpa, Kma) { var Gma ="+"+ Pma; if(Pma.substr(Pma.length - 3) =="$__") { Pma = Pma.substr(0, Pma.length - 1); } if(Pma != null && Pma.length > 0 && bpa != null && bpa.length > 0) { var Lma = false; if(this[Gma] != null) { Lma = true; if(Kma && !this.isAllPage$__(Pma)) { return; } } this[Gma] = bpa; if(this.Keys$__.indexOf(Pma) == -1) { this.Keys$__[this.Keys$__.length] = Pma; } if(Kma) { if(this.AllPageKeys$__.indexOf(Pma) == -1) { this.AllPageKeys$__[this.AllPageKeys$__.length] = Pma; } } else { if(this.AllPageKeys$__.indexOf(Pma) > -1) { this.AllPageKeys$__.splice(this.AllPageKeys$__.indexOf(Pma), 1); } } if(!Lma) { if(Pma.indexOf(" ") > -1) { var Rnb = Pma.indexOf(" "); var fHb = Pma.substring(0, Rnb); this.MultiwordStart$__.push(fHb); } } } }function Oma(Pma) { return this.AllPageKeys$__.indexOf(Pma) > -1; } this.add$__ = Hma; this.get$__ = yla; this.remove$__ = Bma; this.isAllPage$__ = Oma; this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array();};SpeechStream.Dictionary.prototype.deleteAll = function(){ if(typeof(this.Keys$__) !="undefined") { var rkb; var i; for(i=0; i< this.Keys$__.length; i++) { rkb = this.Keys$__[i]; this["+"+ rkb] = null; delete this["+"+ rkb]; } this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array(); }};function THRange(cVb, Tma, Uma){ this.body = cVb; this.Ggb = Tma; this.Hgb = Uma;}THRange.prototype.equals = function(pEb){ return ( this.body == pEb.body && this.Ggb.path == pEb.Ggb.path && this.Ggb.offset == pEb.Ggb.offset && this.Hgb.path == pEb.Hgb.path && this.Hgb.offset == pEb.Hgb.offset);};THRange.prototype.toString = function(){ var range = this.getAsRange(); if(range != null) { if(Jfa) { return this.getAsRange().text; } else { return this.getAsRange().toString(); } } else { return""; }};THRange.prototype.getAsRange = function(){ var range = null; if(Jfa) { range = rw_getAsTextRange(this.body, this.Ggb.path, this.Ggb.offset, this.Hgb.path, this.Hgb.offset); } else { range = Fra(this.body); var Ghb = JPb(this.body, this.Ggb.path, this.Ggb.offset, this.Hgb.path, this.Hgb.offset); var Hhb = Ghb.Pgb; var Ihb = Ghb.Qgb; if(Hhb != null && Ihb != null) { range.setStart(Hhb.node, Hhb.offset); range.setEnd(Ihb.node, Ihb.offset); } else { range = null; Qra("Error in THRange:getAsRange: Failed to get the start or end caret."); } } return range;};THRange.prototype.clone = function(){ return new THRange(this.body, this.Ggb, this.Hgb);};var Yma ="SpeechMode DISABLED CLICK_SPEAK HOVER_SPEAK BUBBLE_SPEAK KEY_PRESS_SPEAK";SpeechStream.SpeechMode = new function(){ this.mode = -1; this.DISABLED = 0; this.CLICK_SPEAK = 1; this.HOVER_SPEAK = 2; this.BUBBLE_SPEAK = 4; this.KEY_PRESS_SPEAK = 8;};SpeechStream.SpeechMode.setPlayMode = function(p_nMode){ if(typeof(p_nMode) =="number") { switch(p_nMode) { case SpeechStream.SpeechMode.DISABLED: $g_bMouseSpeech = false; ixa = false; $rw_enableSpeachByBubbleMode(false); break; case SpeechStream.SpeechMode.CLICK_SPEAK: Jca = true; $g_bMouseSpeech = true; ixa = true; $rw_enableSpeachByBubbleMode(false); break; case SpeechStream.SpeechMode.HOVER_SPEAK: Jca = false; $g_bMouseSpeech = true; ixa = true; $rw_enableSpeachByBubbleMode(false); break; case SpeechStream.SpeechMode.BUBBLE_SPEAK: $g_bMouseSpeech = false; ixa = false; $rw_enableSpeachByBubbleMode(true); break; case SpeechStream.SpeechMode.KEY_PRESS_SPEAK: $g_bMouseSpeech = false; ixa = false; $rw_enableSpeachByBubbleMode(false); break; default: return; } SpeechStream.SpeechMode.mode = p_nMode; }};SpeechStream.SpeechMode.getPlayMode = function(){ if(SpeechStream.SpeechMode.mode == -1) { if(uda) { g_nSpeechMode = SpeechStream.SpeechMode.BUBBLE_SPEAK; } else if($g_bMouseSpeech && Jca) { g_nSpeechMode = SpeechStream.SpeechMode.CLICK_SPEAK; } else if($g_bMouseSpeech && !Jca) { g_nSpeechMode = SpeechStream.SpeechMode.HOVER_SPEAK; } else { g_nSpeechMode = SpeechStream.SpeechMode.KEY_PRESS_SPEAK; } } return SpeechStream.SpeechMode.mode;};SpeechStream.SpeechRequestBookmarks = {NONE:0, OUTER:1, ALL:2};SpeechStream.SpeechRequest = function(){ this.m_strText = null; this.m_strFinalText = null; this.m_bChanged = false; this.m_wordList = null;};SpeechStream.SpeechRequest.prototype.setString = function(Qnb, p_nBookmarks){ var wordList = Qnb.split(" "); var i; var Nnb = wordList.length - 1; for(i=0; i<Nnb; i++) { wordList[i] = wordList[i] +" "; } this.setWordList(wordList, p_nBookmarks);};SpeechStream.SpeechRequest.prototype.setWordList = function(VWb, p_nBookmarks){ var bma = null; if(typeof(eba_build_cache_for_external_use) =="boolean"&& eba_build_cache_for_external_use) { var Vhb =""; var Nnb = VWb.length; for(i=0; i<Nnb; i++) { Vhb += VWb[i]; } bma = Vhb; } var Vcb = false; if(afa) { if(DUb(VWb)) { Vcb = true; } } if(vka != null && vka.getMode() != SpeechStream.DateFilterModes.NONE) { if(vka.checkDatesFromList(VWb)) { Vcb = true; } } this.m_strText = this.buildString(VWb, p_nBookmarks); if(SpeechStream.pronunciation.checkPronunciation()) { if(UWb(VWb)) { Vcb = true; this.m_strFinalText = this.buildString(VWb, p_nBookmarks); } } this.m_bChanged = Vcb; if(this.m_strFinalText == null) { this.m_strFinalText = this.m_strText; } if(bma != null) { this.m_strText = bma; }};SpeechStream.SpeechRequest.prototype.buildString = function(VWb, p_nBookmarks){ if(VWb.length == 0) { return""; } var Hmb = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.ALL); var gma = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.OUTER); var Vhb =""; var Nnb = VWb.length; if(gma) { Vhb += LDb +"0"+ MDb; } for(i=0; i<Nnb; i++) { if(Hmb) { Vhb += LDb + i + MDb; } Vhb += yFb(VWb[i]); } if(gma || Hmb) { Vhb += LDb + Nnb + MDb; } return Vhb;};SpeechStream.SpeechRequest.prototype.isChanged = function(){ return this.m_bChanged;};SpeechStream.SpeechRequest.prototype.getFinalText = function(){ return this.m_strFinalText;};SpeechStream.SpeechRequest.prototype.getText = function(){ return this.m_strText;};var jma = null;var kma = null;function $rw_event_click(event, i){ return $rw_event_hover(event, i);}function $rw_event_hover(event, i){ if(fda && Mfa) { $rw_tagSentences(); } if(!bea) { return; } if(!nda) { if(zca) { throw"The page has not fully loaded, click and speak is not available yet."; } else { hsa("The page has not fully loaded, click and speak is not available yet."); } return; } $g_bMouseSpeech = !$g_bMouseSpeech; var dlb = SpeechStream.lsa; if(i > -1) { g_icons[i][dlb.ICON_TOGGLE_STATE] = $g_bMouseSpeech; if(Pfa && !$g_bMouseSpeech) { fta(g_icons[i][dlb.ICON_NAME],"flat", g_icons[i][dlb.ICON_OFFSET], true); } else { fta(g_icons[i][dlb.ICON_NAME],"toggleOn", g_icons[i][dlb.ICON_OFFSET], true); } } if(Xfa && $g_bMouseSpeech) { if(jda > -1 && typeof($rw_event_sticky) !="undefined") { $rw_event_sticky(event, jda); var mma = nea; nea = 0; jya("sticky"+"", jda, true); nea = mma; } } if(!$g_bMouseSpeech) { ZZb.enableTouchEvents(false); $rw_event_stop(); pxa(false); rxa(false); ZZb.enableTouchEvents(false); } else { pxa(true); ZZb.enableTouchEvents(true); }}function $rw_isPaused(){ return (bea && ZZb.getConnector && $rw_isSpeaking() && ZZb.getConnector() != null && ZZb.getConnector().isPaused());}var nma = String.fromCharCode(160);function $rw_event_play(){ if(bea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { $rw_event_pause(); return; } if(g_nSpeakableTextAreaTimerId != 0) { clearTimeout(g_nSpeakableTextAreaTimerId); g_nSpeakableTextAreaTimerId = 0; if(g_speakableTextAreaTarget == null) { $rw_event_play(); return; } } var oma = g_speakableTextAreaTarget; oma.focus(); g_speakableTextAreaTarget = null; $rw_event_stop(); rw_speakHoverTarget(new THHoverTarget(oma.ownerDocument.body, MOb(oma), null)); } else { if($rw_isPaused()) { $rw_event_pause(); return; } var pma = jRb(); if(pma != null && pma.range != null) { var Mcb = pma.range; if(Mcb instanceof String) { $rw_event_stop(); rw_speakHoverTarget(Mcb); } else { if(Jfa) { var range = xqa(); if(range != null) { range.collapse(); range.select(); } } else { var range = xqa(); if(range != null) { range.collapseToStart(); } } var target = new THHoverTarget(null, null, Mcb); var Oeb = Mcb.clone(); var Kjb = target.getTextPreparedForSpeech(); var tma = false; if(!Oeb.equals(target.range)) { tma = true; } if(Kjb == null || Kjb.length == 0) { return; } $rw_event_stop(); var uma; if(Cea) { if(tma) { uma = Fna(new THHoverTarget(null, null, Oeb), true); } else { uma = Fna(target, true); } if(uma == null) { Fea = target; } } else { uma = target; } if(uma != null) { target = uma; rw_speakHoverTarget(target); } else { target.blockCache = !Gda; rw_speakHoverTarget(target); } } } else { if(Qca != null) { $rw_event_stop(); if(Oga == null || Rca) { Rca = false; $rw_speakFirstSentence(); } else { $rw_speakCurrentSentence(); } } } } } catch(err) { thLogE(err); } }}function Fna(pEb, Hna){ if(pEb == null) { return null; } Gea = null; var Ghb = pEb.getCaretRange(); Ghb = Sna(Ghb); var QHb = Hna ? bLb(Ghb.Pgb) : ULb(Ghb.Pgb); if(QHb.Qgb.node == Ghb.Qgb.node) { if(QHb.Qgb.offset == Ghb.Qgb.offset) { return null; } var Rgb = QHb.Qgb.node; if(Rgb.nodeType == 3) { var yma = Rgb.nodeValue.substring(QHb.Qgb.offset, Ghb.Qgb.offset).trimTH(); if(yma.length == 0) { return null; } } } var zma = Hna ? bLb(Ghb.Qgb) : ULb(Ghb.Qgb); if(QHb.equals(zma)) { return null; } else { var Ana; if(!Dea) { Ana = QHb; QHb = new Bka(Ghb.Pgb, QHb.Qgb); } if(!csa(QHb)) { QHb = hLb(QHb, zma.Qgb.node); if(QHb == null) { return null; } if(QHb.equals(zma)) { return null; } } if(!csa(zma)) { zma = tLb(zma, null); if(zma == null) { return null; } if(QHb.equals(zma)) { return null; } if(Ana) { if(Ana.equals(zma)) { return null; } } } if(!Dea) { var Bna = new Bka(zma.Pgb, Ghb.Qgb); Gea = new THHoverTarget(null, null, yHb(Bna)); } var Cna; var Dna; var Mcb = yHb(QHb ); Cna = new THHoverTarget(null, null, Mcb); zma = new Bka(Sna(zma).Pgb, zma.Qgb); Mcb = yHb(zma ); Dna = new THHoverTarget(null, null, Mcb); Fea = Dna; return Cna; }}function Sna(HMb){ var Vcb = false; var mNb; var wgb; var ySb; var tgb; try { var Rgb; var Ona; if(!HMb.Qgb.isSpecialCase()) { mNb = HMb.Qgb.node; wgb = HMb.Qgb.offset; var Pna = mNb.nodeValue; while(true) { if(wgb == 0) { Rgb = wJb(mNb, false, ySb); if(Rgb == null) { break; } if(Rgb.nodeType == 1) { mNb = Rgb; wgb = 0; Vcb = true; break; } mNb = Rgb; Pna = mNb.nodeValue; wgb = Pna.length; Vcb = true; } if(wgb > 0) { Ona = Pna.charAt(wgb - 1); if(Hsa(Ona)) { --wgb; Vcb = true; } else { break; } } else { break; } } } if(!HMb.Pgb.isSpecialCase()) { ySb = HMb.Pgb.node; tgb = HMb.Pgb.offset; var Qna = ySb.nodeValue; var Nnb = Qna.length; while(true) { if(tgb == Nnb) { Rgb = XKb(ySb, false, mNb); if(Rgb == null) { break; } if(Rgb.nodeType == 1) { ySb = Rgb; tgb = 0; Nnb = 0; Vcb = true; break; } ySb = Rgb; Qna = ySb.nodeValue; tgb = 0; Nnb = Qna.length; Vcb = true; } if(tgb < Nnb) { Ona = Qna.charAt(tgb); if(Hsa(Ona)) { ++tgb; Vcb = true; } else { break; } } else { break; } } } } catch(err) { thLogE(err); } if(!Vcb) { return HMb; } else { return (new Bka(new THCaret(ySb, tgb, true), new THCaret(mNb, wgb, false))); }}function $rw_event_funplay(){ $rw_event_play();}var Una = null;function $rw_speakText(Qnb){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; $rw_event_stop(); var cFb = new SpeechStream.SpeechRequest(); cFb.setString(Qnb, SpeechStream.SpeechRequestBookmarks.NONE); var Xmb = cFb.getText(); var cna = cFb.getFinalText(); dna(cna, !Hda, Xmb);}function $rw_speak(Qnb, p_bNoCache, p_bFilter){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; $rw_event_stop(); if(p_bFilter) { var cFb = new SpeechStream.SpeechRequest(); cFb.setString(Qnb, SpeechStream.SpeechRequestBookmarks.NONE); var Xmb = cFb.getText(); var cna = cFb.getFinalText(); dna(cna, p_bNoCache, Xmb); } else { dna(Qnb, p_bNoCache, Qnb); }}function dna(Qnb, fna, gna){ if(typeof(eba_no_flash) =="boolean"&& eba_no_flash) { rw_sendSocketMessage("THStart"+ Qnb +"THEnd"); return; } if(Qnb == null && Qnb.length == 0) { $rw_doSelection(-1); return; } if(!bea) { $rw_doSelection(-1); return; } try { if(Qnb.indexOf(nma) > -1) { var Rnb = Qnb.indexOf(nma) > -1; while(Rnb > -1) { Qnb = Qnb.replace(nma," "); Rnb = Qnb.indexOf(nma, Rnb + 1); } } if(typeof(gna) =="undefinded"|| gna == null ) { gna = Qnb; } else { if(gna.indexOf(nma) > -1) { var Rnb = gna.indexOf(nma) > -1; while(Rnb > -1) { gna = gna.replace(nma," "); Rnb = gna.indexOf(nma, Rnb + 1); } } } var flash = ZZb.getConnector(); if(flash != null) { if(ODb && ODb.isRange()) { pxa(true); rxa(true); $rw_doSelection(0); } if(fna && Ada && Bda) { flash.startSpeechFromBackup(Qnb, !Yfa); vpa(); } else { if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { var bHb = nHb(); var tna = jQb(gna); var cgb; if(Cda) { var hHb = oHb(tna); bHb = bHb +"/"+ hHb ; cgb = bHb +"/"+tna; } else { cgb = bHb +"/"+ tna; } flash.startSpeechFromCache(cgb, Qnb, false); vpa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER) { var bHb = nHb(); var tna; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { tna = jQb(Qnb); } else { tna = jQb(gna); } var cgb; if(Cda) { var hHb = oHb(tna); bHb = bHb +"/"+ hHb ; cgb = bHb +"/"+tna; } else { cgb = bHb +"/"+ tna; } flash.startSpeechFromCacheWithGen(cgb, Qnb, bHb, tna, !Yfa); vpa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_BUILDING_MODE) { var bHb = nHb(); var tna; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { tna = jQb(Qnb); } else { tna = jQb(gna); } var cgb; if(Cda) { var hHb = oHb(tna); bHb = bHb +"/"+ hHb ; cgb = bHb +"/"+tna; } else { cgb = bHb +"/"+ tna; } var wna = jsa(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.startSpeechGenerateCache(cgb, Qnb, bHb, tna, !Yfa, wna ); vpa(); } else { flash.startSpeech(Qnb, !Yfa); vpa(); } } }} catch(err) { thLogE(err); }}function xna(ipa, Qnb){ if(Qnb.indexOf("\n") > -1) { var xYb = jsa(true) + dca +"/SpeechCache/"+ ipa +".xml"; var Boa = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"); Boa.open("HEAD", xYb, false); Boa.send(); return (Boa.status == 404); } return false;}function Doa(Qnb, nEb){ if(Qnb == null && Qnb.length == 0) { $rw_doSelection(-1); return; } if(!bea) { $rw_doSelection(-1); return; } try { var flash = ZZb.getConnector(); if(flash != null) { pxa(true); $rw_doSelection(0); flash.startSpeechFromFile(Qnb, nEb, !Yfa); vpa(); } } catch(err) { thLogE(err); }}function Ioa(Qnb){ if(Qnb == null && Qnb.length == 0) { $rw_doSelection(-1); return; } if(!bea) { $rw_doSelection(-1); return; } try { var flash = ZZb.getConnector(); if(flash != null) { pxa(true); $rw_doSelection(0); flash.startHighlighting(Qnb); } } catch(err) { thLogE(err); }}function $rw_event_pause(){ if($rw_isSpeaking()) { var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var flash = ZZb.getConnector(); if(flash != null) { if(flash.isPaused()) { flash.resume(); } else { flash.pause(); } } }}function $rw_event_funstop(){ $rw_event_stop();}function $rw_event_stop(){ if(!bea) { return; } try { if(uda) { Jbb(); } oCb(); sda = null; Fea = null; if(TEb > 0) { clearTimeout(TEb); TEb = 0; } REb.length = 0; if(JEb) { setTimeout($rw_event_stop, 100); return; } if(PDb > 0) { clearTimeout(PDb); PDb = 0; } if(QDb > 0) { clearTimeout(QDb); QDb = 0; } pxa(false); rxa(false); var flash = ZZb.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } NDb = null; } catch(err) { thLogE(err); }}function $rw_event_stop_limited(){ if(!bea) { return; } try { oCb(); sda = null; pxa(false); rxa(false); var flash = ZZb.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } } catch(err) { thLogE(err); }}function $rw_event_mp3(){ try { var Ooa = null; if(dda != null) { var target = document.getElementById(dda); if(target!= null) { Ooa = DNb(target); } } else { Ooa = foa(); } if(Ooa != null) { Ooa = Ooa.trimTH(); if (Ooa.length > 0) { if(Ooa.length > eda) { alert("Too much text was selected for making an MP3 file, there is a "+ (eda/1024) +"k limit."); return; } var flash = ZZb.getConnector(); if(flash != null) { var Kjb ="<br>The MP3 file for the text is being generated, <br> "+"this could take some time depending on the amount of text selected.<br><p align=\"center\">"+"<img alt=\"loading\" src=\""+ $g_strFileLoc +"rwimgs/request-processing.gif\"> </p>"; aCb(Mba, Kjb); fCb(true, Mba); flash.getMP3File(Ooa, !Yfa); } } } } catch(err) { thLogE(err); }}function $rw_mp3reply(Kjb){ try { if(typeof(eba_mp3_callback) !="undefined") { fCb(false, Mba); eval(""+ eba_mp3_callback +"('"+ Kjb +"')"); } else { if(Kjb.length > 0) { var Lva ="Save Target As..."; if(!Cfa) { if(Lfa) { Lva ="Save Link As..."; } else if(Mfa) { Lva ="Download Linked File"; } else { Lva ="Save Link As..."; } } Kjb ="<br>Right click on the link below and select "+"'"+ Lva +"' to save the mp3 file to your hard drive.<p></p>"+"<a type='application/octet-stream' href=\""+ Kjb +"\">Download speech mp3 file.</a><p></p>"; aCb(Mba, Kjb); fCb(true, Mba); } } } catch(err) { thLogE(err); }}var Soa ="setWarning";function setWarning(){ $rw_lexiSubmitEvent();}function $rw_lexiSubmitEvent(){ mea = true;}function Uoa(){ if (Jfa) {var range = document.selection.createRange(); if (range.text.length > 0) { return true; } if(!hda && top.frames.length > 0) { var i = 0; var Nnb = top.frames.length; for (i = 0; i < Nnb; i++) { try { var Deb = top.frames[i]; range = Deb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return true; } } catch(e) { } } } } else {if(Zia!=null) { return true; } if (window.getSelection() != null && !window.getSelection().isCollapsed) { return true; } if(!hda && top.frames.length > 0) { var i = 0; var Nnb = top.frames.length; for (i = 0; i < Nnb; i++) { try { if (top.frames[i].getSelection() != null && !top.frames[i].getSelection().isCollapsed) { return true; } } catch(e) { } } } } return false;}function Yoa(){ if (Jfa) {var range = document.selection.createRange(); if(range.text == null || range.text.length == 0) { if(!hda && top.frames.length > 0) { var i = 0; var Nnb = top.frames.length; for (i = 0; i < Nnb; i++) { try { var Deb = top.frames[i]; range = Deb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return range.parentElement(); } } catch(e) { } } } } else { return range.parentElement(); } } else { if(Zia!=null) { return Zia.startContainer; } var XRb = window.getSelection(); if(XRb.isCollapsed) { if(Zxa && Zxa.selectionStart != Zxa.selectionEnd) { return Zxa; } if(!hda && top.frames.length>0) { var i=0; var Nnb = top.frames.length; for(i = 0; i<Nnb; i++) { try { var dbb = top.frames[i].getSelection(); if(dbb != null && !dbb.isCollapsed) { return dbb; } } catch(e) { } } } } else { return XRb.focusNode; } } return null;}function foa(){ var Kjb =''; if (Jfa) {var range = document.selection.createRange(); if (range.text == null || range.text.length == 0) { if(!hda && top.frames.length > 0) { var i = 0; var Nnb = top.frames.length; for (i = 0; i < Nnb; i++) { try { var Deb = top.frames[i]; range = Deb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { break; } } catch(e) { } } } } Kjb = range.text; var Oeb = range.duplicate(); Oeb.collapse(); var fkb = Oeb.parentElement(); if(yMb(fkb)) { Kjb =""; } } else { if(Zia!=null) { return Zia.toString(); } var XRb = window.getSelection(); if(XRb.isCollapsed) { if(Zxa && Zxa.selectionStart != Zxa.selectionEnd) { return Zxa.value.substring( Zxa.selectionStart, Zxa.selectionEnd); } if(!hda && top.frames.length>0) { var i=0; var Nnb = top.frames.length; for(i = 0; i<Nnb; i++) { try { var dbb = top.frames[i].getSelection(); if(dbb != null && !dbb.isCollapsed) { XRb = dbb; break; } } catch(e) { } } } } if(XRb.anchorNode) { if(yMb(XRb.anchorNode)) { return""; } } if(XRb.focusNode && XRb.focusNode.id) { if(XRb.focusNode.id =="flashcontent") { return""; } } if(!XRb.isCollapsed) { Kjb = XRb.toString(); } else { Kjb =""; } } return Kjb;}var noa = -1;function $rw_doSelection(pya){ if (pya < 0) { if(pya == -2 && $rw_isSpeaking()) { $rw_speechCompleteCallback(); } else if(pya == -3) { $rw_speechErrorCallback(); } pxa(false); rxa(false); txa(false); if(uda) { Jbb(); } } else { txa(true); } if(ODb && ODb.isRange()) { if(pya != noa) { if (pya == -1 || pya == -2 || pya == -3) { if (noa > -1 && ODb.uTb != null) { try { var uTb = ODb.uTb; var Nnb = uTb.length; if (noa < Nnb) { var Mcb = uTb[noa].range; var Ghb = JPb(Mcb.body, Mcb.Ggb.path, Mcb.Ggb.offset, Mcb.Hgb.path, Mcb.Hgb.offset); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Qgb != null) { rw_removeSpeechHighlight(Gqa(Pgb, Qgb), true); } else { Qra("Cannot determine valid range to remove speech highlight from. "+ Pgb +" "+ Qgb); } } } catch(err) { Qra("$rw_doSelection:clear last speech:"+ err.toString()); } } noa = -1; try { ODb.unhighlightRange(); } catch(err){Qra("$rw_doSelection:unhighlightRange:"+ err.message);} } else if(ODb.uTb != null) { if (noa == pya) { return; } var uTb = ODb.uTb; var Nnb = uTb.length; try { if (noa > -1 && noa < Nnb) { var Mcb = uTb[noa].range; var Ghb = JPb(Mcb.body, Mcb.Ggb.path, Mcb.Ggb.offset, Mcb.Hgb.path, Mcb.Hgb.offset); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Qgb != null) { rw_removeSpeechHighlight(Gqa(Pgb, Qgb), true); } else { Qra("Cannot determine valid range to remove speech highlight from. "+ Pgb +" "+ Qgb); } } } catch(err) { thLogE(err); } if (pya < 0 || pya >= Nnb) { return; } noa = pya; var Mcb = uTb[pya].range; try { var Ghb = JPb(Mcb.body, Mcb.Ggb.path, Mcb.Ggb.offset, Mcb.Hgb.path, Mcb.Hgb.offset); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Qgb != null) { var result = rw_setSpeechRangeImpl(Pgb.node, Pgb.offset, Qgb.node, Qgb.offset,"csp"); if(result != null && result.node != null) { uRb(result.node); } else { uRb(Pgb.node); } } else { Qra("Cannot determine valid range to add speech highlight from. "+ Pgb +" "+ Qgb); } } catch(err) { Qra("error with highlight speech range in rw_doSelection:"+ err.message); } } } } if (pya == -1 || pya == -2 || pya == -3) { noa = -1; ODb = null; var Fpa = null; if(nCb.length > 0) { Fpa = new Array(); } while(nCb.length > 0) { if(typeof(nCb[0])=="string") { if(nCb[0].indexOf("$rw_readNextTarget") > -1) { break; } } Fpa.push(nCb.shift()); } if(pya == -1) { if(nCb.length > 0) { Fpa.push(nCb.shift()); } } else if(pya == -3) { var flash = ZZb.getConnector(); var Hpa = flash.getLastError(); var mdb="An error occurred with speech.  "+ Hpa; if(SpeechStream.actionOnError.action == SpeechStream.actionOnError.SKIP) { Qra(mdb); if(nCb.length > 0) { Fpa.push(nCb.shift()); } } else { hsa(mdb); } } if(Fpa != null && Fpa.length > 0) { JDb(Fpa); } }}function $displayMe(Kjb){ hsa(Kjb);}function Mpa(Npa, Opa, Ppa, Qpa, a_bool_scrollbars, a_bool_resizable, a_bool_menubar, a_bool_toolbar, a_bool_addressbar, a_bool_statusbar, a_bool_fullscreen){ var Jpa = (screen.width - Ppa) / 2; var Kpa = (screen.height - Qpa) / 2; var Lpa ='height='+ Qpa +',width='+ Ppa +',top='+ Kpa +',left='+ Jpa +',scrollbars='+ a_bool_scrollbars +',resizable='+ a_bool_resizable +',menubar='+ a_bool_menubar +',toolbar='+ a_bool_toolbar +',location='+ a_bool_addressbar +',statusbar='+ a_bool_statusbar +',fullscreen='+ a_bool_fullscreen +''; var Rpa = window.open(Npa, Opa, Lpa); if (parseInt(navigator.appVersion, 10) >= 4) { Rpa.window.focus(); }}function Tpa(hpa){ var start = document.cookie.indexOf(hpa +"="); var Vpa = start + hpa.length + 1; if (( !start ) && ( hpa != document.cookie.substring(0, hpa.length) )) { return null; } if (start == -1) { return null; } var end = document.cookie.indexOf(";", Vpa); if (end == -1) { end = document.cookie.length; } return unescape(document.cookie.substring(Vpa, end));}function Zpa(hpa, bpa, cpa, ipa, jpa, fpa){ var Xpa = new Date(); Xpa.setTime(Xpa.getTime()); if (cpa) { cpa = cpa * 1000 * 60 * 60 * 24; } var Ypa = new Date(Xpa.getTime() + (cpa)); document.cookie = hpa +"="+ escape(bpa) + ( ( cpa ) ?";expires="+ Ypa.toGMTString() :"") + ( ( ipa ) ?";path="+ ipa :"") + ( ( jpa ) ?";domain="+ jpa :"") + ( ( fpa ) ?";secure":"");}function gpa(hpa, ipa, jpa){ if (Tpa(hpa)) { document.cookie = hpa +"="+ ( ( ipa ) ?";path="+ ipa :"") + ( ( jpa ) ?";domain="+ jpa :"") +";expires=Thu, 01-Jan-1970 00:00:01 GMT"; }}function mpa(){ if(Pfb()) { var Xmb = Zeb(); aCb(Qba, Xmb); fCb(true, Qba); var lCb = zxa("rwcollatewrapper"); var npa = document.getElementById("rwCollect"); if(npa != null) { if(parseInt(lCb.scrollHeight, 10) >= 380) { var rwTextCollect = zxa("rwTextCollect"); rwTextCollect.style.height = (360); } else { var rwTextCollect = zxa("rwTextCollect"); rwTextCollect.style.height = (lCb.scrollHeight + 24); } }}}function $rw_event_axendolink(){ document.location ="http://www.browsealoud.info";}function dis(node){ hsa(node.tagName +"|"+ node.nodeValue +"|"+ MOb(node));}function spa(kPb, upa){ if(kPb == null) { return; } try { var lTb = false; var Nnb = kPb.length; if(Nnb > 0) { if(kPb.charAt(Nnb-1) ==")"|| kPb.substr(Nnb-1) ==";") { lTb = true; } } else { return; } if(lTb) { eval(kPb); } else { try { if(typeof(upa) !="undefined"&& upa != null) { eval(kPb +"("+ upa +");"); } else { eval(kPb +"();"); } } catch(innerErr) { eval(kPb); } } } catch(err) { thLogE(err); }}function vpa(){ if(typeof(eba_speech_started_callback) =="string") { spa(eba_speech_started_callback.trimTH()); }}function $rw_renderingSpeechCallback(){ if(typeof(eba_rendering_speech_callback) =="string") { spa(eba_rendering_speech_callback.trimTH()); }}function $rw_speechCompleteCallback(){ if(typeof(eba_speech_complete_callback) =="string") { spa(eba_speech_complete_callback.trimTH(),"'Success'"); }}function $rw_speechErrorCallback(){ if(typeof(eba_speech_complete_callback) =="string") { spa(eba_speech_complete_callback.trimTH(),"'Error'"); }}function rw_pageCompleteCallBack(){ if(typeof(eba_page_complete_callback) =="string") { spa(eba_page_complete_callback.trimTH()); }} function $rw_event_calculator() { try { aCb(Uba,""); fCb(true, Uba); rw_calClearMem(); rw_calAddDigit('0'); } catch(err) { thLogE(err); } }function $rw_event_generate_cache(){ try { $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Caching page please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); pha(); } catch(err) { thLogE(err); }}function $rw_event_check_cache(){ try { $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Reading Cache please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); Wia(); } catch(err) { $rwj.unblockUI(); thLogE(err); }}function ypa(nUb){ var Kjb =""; if (nUb.nodeType == 3) { Kjb = nUb.nodeValue; } else if (nUb.nodeType == 1) { var KNb = nUb.firstChild; while (KNb != null) { if (KNb.nodeType == 3) { Kjb += KNb.nodeValue; } else if (KNb.nodeType == 1) { Kjb += ypa(KNb); } KNb = KNb.nextSibling; } } return Kjb;}function aa(a){}function Bqa(mdb){ var nn = 150; if (mdb.length > nn) { while (mdb.length > nn) { var Aqa = mdb.substring(0, nn); mdb = mdb.substring(nn); Qra(Aqa); } } else { Qra(mdb); }}String.prototype.trimSpaceTH = function(){ return this.replace(/^[\t\r\n ]+/,"").replace(/[\t\r\n ]+$/,"");};String.prototype.trimSpaceStartTH = function(){ return this.replace(/^[\t\r\n ]+/,"");};String.prototype.trimSpaceEndTH = function(){ return this.replace(/[\t\r\n ]+$/,"");};String.prototype.trimTH = function(){ return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"");};String.prototype.trimStartTH = function(){ return this.replace(/^[\s\xA0]+/,"");};String.prototype.trimEndTH = function(){ return this.replace(/[\s\xA0]+$/,"");};String.prototype.equalsTH = function(s){ if (this.length != s.length) { return false; } for (var i = 0; i < this.length; i += 1) { if (this.charAt(i) != s.charAt(i)) { return false; } } return true;};function Gqa(Sqa, Tqa){ var Cqa = Pga; Pga = false; var Nqa = new Array(); try { var Kgb = Sqa.node; var Lgb = Tqa.node; if(Kgb.nodeType != 3) { if(Kgb.nodeType == 1 && Kgb.tagName.toLowerCase() =="math") { Nqa.push(Kgb); if(Kgb == Lgb) { return Nqa; } else { Kgb = XKb(Kgb, false, Lgb); } } else if(Cfa && Kgb.nodeType == 1 && Kgb.firstChild != null && Kgb.firstChild.tagName.toLowerCase() =="math") { Nqa.push(Kgb.firstChild); if(Kgb == Lgb) { return Nqa; } else { Kgb = Kgb.firstChild; Kgb = XKb(Kgb, false, Lgb); } } else { Kgb = BJb(Kgb, false); if(Kgb == null) { return Nqa; } } } if(Kgb == Lgb) { if(Kgb.nodeType == 3) { var Kjb = Kgb.nodeValue; if(Kjb.length > 0 && Sqa.offset < Kjb.length && Tqa.offset > 0 && Tqa.offset > Sqa.offset) { Nqa.push(Kgb); } } } else { if(Kgb.nodeType == 3) { var Kjb = Kgb.nodeValue; if(Kjb.length > 0 && Sqa.offset < Kjb.length) { Nqa.push(Kgb); } } else { if(Kgb.nodeType == 1 && Kgb.tagName.toLowerCase() =="math") { Nqa.push(Kgb); } else if(Cfa && Kgb.nodeType == 1 && Kgb.firstChild != null && Kgb.firstChild.tagName.toLowerCase() =="math") { Kgb = Kgb.firstChild; Nqa.push(Kgb); } } var Rgb = nKb(Kgb, false, Lgb, true); while (Rgb != null) { if (Rgb == Lgb) { if(Lgb.nodeType == 3) { var Kjb = Lgb.nodeValue; if(Kjb.length > 0 && Tqa.offset > 0) { Nqa.push(Lgb); } } else { if(Rgb.nodeType == 1 && Rgb.tagName.toLowerCase() =="math") { Nqa.push(Rgb); } else if(Cfa && Rgb.nodeType == 1 && Rgb.firstChild != null && Rgb.firstChild.tagName.toLowerCase() =="math") { Nqa.push(Rgb.firstChild); } } break; } else { Nqa.push(Rgb); } Rgb = nKb(Rgb, false, Lgb, true); } } } catch(err){Qra("rw_setHighlight error:"+ err.message);} Pga = Cqa; return Nqa;}function rw_getListOfNodes(Sqa, Tqa){ var Nqa = new Array(); try { var Kgb = Sqa.node; var Lgb = Tqa.node; if(Kgb == Lgb) { Nqa.push(Kgb); } else { Nqa.push(Kgb); var Rgb = XKb(Kgb, false, Lgb, true); while (Rgb != null) { Nqa.push(Rgb); Rgb = nKb(Rgb, false, Lgb, true); } } } catch(err){Qra("rw_getListOfNodes error:"+ err.message);} return Nqa;}function aqa(Wjb){ if(Wjb == null) { return Wjb; } var nAb = Wjb.parentNode; if(nAb != null && Wjb.nodeType == 3) { var Iab = Wjb.ownerDocument; while(Wjb.previousSibling != null && Wjb.previousSibling.nodeType == 3) { var Kjb = Wjb.previousSibling.nodeValue + Wjb.nodeValue; var Xlb = Iab.createTextNode(Kjb); nAb.removeChild(Wjb.previousSibling); nAb.replaceChild(Xlb, Wjb); Wjb = Xlb; } while(Wjb.nextSibling != null && Wjb.nextSibling.nodeType == 3) { var Kjb = Wjb.nodeValue + Wjb.nextSibling.nodeValue; var Xlb = Iab.createTextNode(Kjb); nAb.removeChild(Wjb.nextSibling); nAb.replaceChild(Xlb, Wjb); Wjb = Xlb; } } return Wjb;}function fqa(gqa){ try { var Kjb = gqa +""; Kjb = Kjb.trimTH(); gqa.collapseToStart(); var Kgb = gqa.anchorNode; var iqa = gqa.anchorOffset; if(Kgb.nodeType != 3) { Kgb = gKb(Kgb, false, null); iqa = 0; } else if(iqa == Kgb.nodeValue.length) { Kgb = gKb(Kgb, false, null); iqa = 0; } if(Kgb != null && Kgb.nodeType == 3) { var egb = Kgb.nodeValue.substring(iqa); var kqa = egb.trimStartTH(); while(egb.length > kqa.length) { if(kqa.length == 0) { Kgb = gKb(Kgb, false, null); iqa = 0; if(Kgb == null || Kgb.nodeType != 3) { break; } } else { iqa += egb.length - kqa.length; } egb = Kgb.nodeValue.substring(iqa); kqa = egb.trimStartTH(); } } var range = Fra(); if(Kgb == null) { range.setStart(gqa.anchorNode, gqa.anchorOffset); range.setEnd(gqa.anchorNode, gqa.anchorOffset); } else { if(Kgb.nodeType != 3) { range = qqa(Kgb, iqa, Kjb); } else { if((iqa + Kjb.length) < Kgb.nodeValue.length) { range.setStart(Kgb, iqa); range.setEnd(Kgb, iqa + Kjb.length); } else { range = qqa(Kgb, iqa, Kjb); } } } return range; } catch(ignore) { var range = Fra(); range.setStart(gqa.anchorNode, gqa.anchorOffset); range.setEnd(gqa.anchorNode, gqa.anchorOffset); return range; }}function qqa(vEb, kmb, zmb){ var range = Fra(vEb.ownerDocument.body); range.setStart(vEb, kmb); range.setEnd(vEb, kmb); var Nnb = 0; var mqa = zmb.length + kmb; var Rgb = vEb; while(Rgb != null && Nnb < mqa) { if(Rgb.nodeType == 3) { var Kjb = Rgb.nodeValue; Nnb += Kjb.length; } if(Nnb < mqa) { Rgb = gKb(Rgb, false, null); } else { var pqa = Nnb - mqa; range.setEnd(Rgb, Rgb.nodeValue.length - pqa); } } return range;}function xqa(){ var SRb = null; if(window.getSelection) {if(Zia!=null) { return null; } var XRb = window.getSelection(); var YRb = null; if(!XRb.isCollapsed) { YRb = XRb; } else { XRb = fQb(window); if(XRb.YRb) { YRb = XRb.YRb; } } if(YRb == null) { return null; } SRb = YRb; } else if(document.selection) {var range = document.selection.createRange(); if(range.text.length > 0) { aUb = window; SRb = range; } else { var Vhb = hQb(window); if(Vhb.SRb) { SRb = Vhb.SRb; } } } return SRb;}function Cra(){ var Kjb =""; if (Jfa) { var range = document.body.createTextRange(); range.expand("textedit"); Kjb = range.text; } else { var range = document.createRange(); range.setStartBefore(document.body); range.setEndAfter(document.body); Kjb = range.toString(); } return Kjb;}function Dra(Wjb){ if(Wjb.innerText) { return Wjb.innerText; } else if(Wjb.textContent) { return Wjb.textContent; } else { return""; }}function Fra(cVb){ if(typeof(cVb) =='undefined'|| cVb == null) { cVb = document.body; } if (Jfa) { return cVb.createTextRange(); } else { var Iab = cVb.ownerDocument; return Iab.createRange(); }}function Mra(Wjb){ if(Wjb.document) { return Wjb.document.body; } else { return Wjb.ownerDocument.body; }}function rw_getWindow(Wjb){ try { if(Wjb == null) { return window; } if(top.frames.length === 0) { return window; } else { var Ira = Wjb.ownerDocument.body; var Jra = window.document.body; if(Ira === Jra) { return window; } if(!hda) { var i=0; var Nnb = top.frames.length; for(i = 0; i<Nnb; i++) { try { var vta = top.frames[i].document.body; if(vta === Ira) { return top.frames[i]; } } catch(e) { } } } } } catch(err) { Qra("Error rw_getWindow: "+ err); } return window;}function Qra(qab){ if(window.console && window.console.log) { window.console.log(qab); } else if(typeof(dump) !='undefined') { dump(qab +"\n"); }}function thLogE(error){ if(error != null) { if(error.name && error.message) { Qra("Error: "+""+ error.name +". : "+ error.message); } else if(error.message) { Qra("Error: "+""+ error.message); } }}function Sra(Kjb){ if(Kjb == null) { return""; } Kjb = Kjb.trimTH(); var era =""; var i = 0; var n = Kjb.length; var omb = -1; var pmb = -1; for(i = 0; i < n; i++) { var dOb = Kjb.charCodeAt(i); if((dOb > 64 && dOb < 91) || (dOb > 96 && dOb < 123 )) { if(omb == -1) { omb = i; } } else { if(omb > -1) { if(dOb == 39) { if(i < (n - 1)) { nValNext = Kjb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 )) { ++i; } else { pmb = i; break; } } else { pmb = i; break; } } else { pmb = i; break; } } } } if(omb > -1) { if(pmb > -1) { era = Kjb.substring(omb, pmb); } else { era = Kjb.substring(omb); } } return era;}function Xra(Kjb){ if(Kjb == null) { return""; } Kjb = Kjb.trimTH(); Kjb = Kjb.replace(/[\s\xA0]+/g," "); var era =""; var i = 0; var n = Kjb.length; var omb = -1; var pmb = -1; for(i = 0; i < n; i++) { var dOb = Kjb.charCodeAt(i); if((dOb > 64 && dOb < 91) || (dOb > 96 && dOb < 123 ) || dOb > 127) { if(omb == -1) { omb = i; } } else { if(omb > -1) { if(dOb == 39) { if(i < (n - 1)) { nValNext = Kjb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 ) || dOb > 127) { ++i; } else { pmb = i; break; } } else { pmb = i; break; } } else { pmb = i; break; } } } } if(omb > -1) { if(pmb > -1) { era = Kjb.substring(omb, pmb); } else { era = Kjb.substring(omb); } } return era;}function cra(zmb){ if(zmb == null) { return""; } var era = zmb.trimTH(); if(era.length == 0) { return""; } era = era.replace(/[\s\xA0]+/g," "); var fra = 0; var Rnb = era.indexOf(' '); while(Rnb > -1) { ++fra; if(fra == 3) { era = era.substr(0, Rnb); break; } Rnb = era.indexOf(' ', Rnb + 1); } return era;}function hra(Knb){ return (Knb > 64 && Knb < 91) || (Knb > 96 && Knb < 123);}function jra(Knb){ return (Knb > 47 && Knb < 58);}function lra(Knb){ return (Knb > 47 && Knb < 58) || (Knb > 63 && Knb < 91) || (Knb > 94 && Knb < 123);}function ora(Kjb){ if(Kjb == null) { return false; } for(var i = 0; i < Kjb.length; i++) { var dOb = Kjb.charCodeAt(i); if(dOb == 39 || (dOb > 47 && dOb < 58) || (dOb > 64 && dOb < 91) || dOb == 96 || (dOb > 96 && dOb < 123)) { return true; } } return false;}function rra(sra){ if(sra == null || sra.length == 0) { return sra; } var Nnb = sra.length; for(var i = 0; i < Nnb; i++) { var dOb = sra.charCodeAt(i); if(! (dOb == 39 || dOb == 44 || dOb == 46 || (dOb > 47 && dOb < 58) || (dOb > 63 && dOb < 91) || (dOb > 94 && dOb < 123))) { sra = sra.replace(sra.charAt(i),' '); } } return sra.trimTH();}function ura(range){ var Kjb =""; if(range.text) { Kjb = range.text; } else { Kjb = range.toString(); } return Kjb;}function wra(){ var lRb = xqa(); if(lRb == null) { return; } if(lRb.collapseToStart) { lRb.collapseToStart(); } else if(lRb.execCommand) { lRb.execCommand("UnSelect", false, null); }}function Dsa(Wjb){ if(Wjb != null) { if(Jfa) { var range = Fra(Wjb.ownerDocument.body); range.moveToElementText(Wjb) ; range.select(); } else { var Rgb = vIb(Wjb, false, null); if(Rgb != null) { var range = new Gla(Wjb, 0, Rgb, 0); Fsa(range); } } }}function Fsa(Teb){ if(Jfa) { Teb.select(); } else { var start = Teb.Hhb; var end = Teb.Ihb; var aUb = rw_getWindow(start.node); if(!Mfa) { var Fgb = aUb.getSelection(); Fgb.collapse(start.node, start.offset); if(Fgb.extend) { Fgb.extend(end.node, end.offset); } else { var range = aUb.document.createRange(); range.setStart(start.node, start.offset); range.setEnd(end.node, end.offset); Fgb.addRange(range); } } else { aUb.getSelection().setBaseAndExtent(start.node, start.offset, end.node, end.offset); } }}function Hsa(Mnb){ return (Mnb.search(/[\s\xa0]/) > -1);}function Jsa(oRb){ var Ksa = oRb +"  "; if(oRb.tagName != null) { Ksa += oRb.tagName +" "; } if(oRb.className != null) { Ksa += oRb.className +" "; } for(prop in oRb) { Ksa += prop +"  "+" | "; } alert(Ksa);}function Lsa(oRb){ var Ksa = oRb +"  "; for(prop in oRb) { Ksa += prop +"  "+" | "; } return Ksa;}function $rw_inputFieldFilter(feb){ if(feb == null || feb.length == 0) { return feb; } var i; var Nnb = feb.length; for(i = Nnb - 1; i >= 0; i--) { var c = feb.charCodeAt(i); if((c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { feb = feb.substring(0, i) + feb.substr(i + 1); } } return feb;}function $rw_handleFieldInput(hjb){ var pre = hjb.value; var post = $rw_inputFieldFilter(pre); if(pre != post) { hjb.value = post; }}function $rw_handleFieldKeyDownInput(evt){ if(!evt.ctrlKey) { var c = evt.keyCode; if((c > 32 && c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { return false; } } return true;}function Psa(c){ return (c > 64 && c < 91) || (c > 96 && c < 123) || c == 39 || (c > 128 && c != 160);}function Ssa(zFb){ var Nnb = zFb.length; var i = 0; var dOb; for(i=0; i<Nnb; i++) { dOb = zFb.charCodeAt(i); if((dOb > 63 && dOb < 91) || (dOb > 96 && dOb < 123) || (dOb > 127 && dOb != 160)) { return true; } else if(dOb > 46 && dOb < 58) { return true; } else if((dOb > 35 && dOb < 39) || dOb == 43 || dOb == 61) { return true; } else if(dOb == 42 || dOb == 45 || dOb == 92 || (dOb > 93 && dOb < 97)) { if(kca !="VW Kate") { return true; } } } if(afa) { if(qTb(zFb)) { return true; } } return false;}function csa(iNb){ try { if(iNb == null || iNb.Pgb == null || iNb.Qgb == null) { return false; } var Pgb = iNb.Pgb; var Qgb = iNb.Qgb; var ySb = Pgb.node; var mNb = Qgb.node; var dNb = true; var nNb = false; var oNb = ySb; var Kjb =""; while(oNb != null) { nNb = dFb(oNb); if(nNb || oNb.nodeType == 3) { var Vhb = MNb(oNb); if(Vhb != null && Vhb !="") { if(oNb == mNb && Qgb.offset > -1) { Vhb = Vhb.substring(0, Qgb.offset); } if(oNb == ySb && Pgb.offset > 0) { Vhb = Vhb.substring(Pgb.offset); } if(Ssa(Vhb)) { return true; } } } if(nNb) { oNb = vIb(oNb, false, mNb); } else { if(dNb) { oNb = hIb(oNb, true, mNb); } else { oNb = UIb(oNb, false, mNb); } } dNb = false; } } catch(err) { thLogE(err); } return false;}function fsa(d){ return d.toString(16);}function gsa(h){ return parseInt(h,16);}function hsa(feb){ if(Tca) { alert(feb); } else { Qra(feb); }}function $rw_enable_alerts(p_bEnable){ if(typeof(p_bEnable) =="boolean") { Tca = p_bEnable; }}function $rw_uriEncode(feb){ return encodeURIComponent(feb);}function jsa(ksa){ if(ksa) { return ((xda||yda)?"https://":"http://"); } else { return ((xda||zda)?"https://":"http://"); }}/*Code designed and developed by Stuart McWilliams.*/SpeechStream.IconParameters = function(){ this.ICON_NAME = 0; this.ICON_ALT_TEXT = 1; this.ICON_OFFSET = 2; this.ICON_IS_TOGGLE = 3; this.ICON_TOGGLE_STATE = 4;};SpeechStream.lsa = new SpeechStream.IconParameters();function nsa(kPb, Ota, jVb, qya){ var lsa = SpeechStream.lsa; var Rnb = eea; g_icons[eea] = new Array(5); g_icons[eea][lsa.ICON_NAME] = kPb; g_icons[eea][lsa.ICON_ALT_TEXT] = Ota; g_icons[eea][lsa.ICON_OFFSET] = jVb; g_icons[eea][lsa.ICON_IS_TOGGLE] = qya; g_icons[eea][lsa.ICON_TOGGLE_STATE] = false; eea++; return Rnb;}function ysa(kPb){ var i=0; for(i=0; i<g_icons.length; i++) { if(g_icons[i][SpeechStream.lsa.ICON_NAME] == kPb) { return i; } } return -1;}function Ata(i){ var ssa = SpeechStream.lsa; var Xjb = g_icons[i][ssa.ICON_NAME]; var pab = g_icons[i][ssa.ICON_ALT_TEXT]; var tgb = g_icons[i][ssa.ICON_OFFSET]; var wsa = g_icons[i][ssa.ICON_IS_TOGGLE]; var xsa = false; if(wsa) { if(Xjb =="hover"+""&& typeof(eba_initial_speech_on) =="boolean"&& eba_initial_speech_on) { g_icons[i][ssa.ICON_TOGGLE_STATE] = true; xsa = true; } } var Bta = 33; if(Xjb.equalsTH("submit"+"")) { Bta = 53; } sea += Bta; var Cta = Lta(Xjb,"flat"+"", pab, Bta, tgb, true, xsa); bxa(Cta,"touchstart", function() { $rw_getTouchSelection(); }); bxa(Cta,"mouseover", function() { if(!Pfa) { if(!g_icons[i][ssa.ICON_TOGGLE_STATE]) { fya(Xjb, i, wsa); } } }); bxa(Cta,"mouseout", function() { if(!g_icons[i][ssa.ICON_TOGGLE_STATE]) { jya(Xjb, i, wsa); } }); bxa(Cta,"mousedown", function() { if(!Pfa) { if(!g_icons[i][ssa.ICON_TOGGLE_STATE]) { nya(Xjb, i, wsa); } } oea = Xjb; }); bxa(Cta,"mouseup", function() { if(oea.equalsTH(Xjb)) { if($rw_blockClick(Xjb)) { return true; } else { if(rfa && Qfa) { try { var vta = wta(true); if(vta) { if(vta.ipadTinyMceFocus) { vta.ipadTinyMceFocus = false; var Eta = window.pageXOffset; var Fta = window.pageYOffset; var Vhb = document.getElementById(SpeechStream.tinymceipadfix); Vhb.focus(); window.scrollTo(Eta, Fta); Vhb.blur(); } } } catch(err){} } var mdb; mdb ='$rw_event_'+ Xjb +'(null, '+ i +');'; eval(mdb); } } if(!Pfa) { if(!g_icons[i][ssa.ICON_TOGGLE_STATE]) { fya(Xjb, i, wsa); } } }); return Cta; }function Lta(kPb, mua, Ota, Pta, pya, gCb, Sta){ var Ita = Pta * ysa(kPb); var Jta = 0; if(Sta) { Jta = 66; } var Iva = {}; Iva["ignore"] ="1"; Iva["name"] = kPb + mua; Iva["width"] =""+ Pta; Iva["height"] ="32"; Iva["title"] = Ota; Iva["unselectable"] ="on"; if(gCb) { Iva["style"] ="left:"+ Ita +"px; background-position: -"+ pya +"px -"+ Jta +"px;"; } else { Iva["style"] ="left:"+ Ita +"px; background-position: -"+ pya +"px -"+ Jta +"px;"; } var iPb = jPb("span", Iva, kPb, null, false); if(Cfa) { iPb.onselectstart = function() { return false; }; } else { iPb.onmousedown = function() { return false; }; } return iPb;}function Vta(){ sea += 100; nLeftPosition = 33 * eea; var Iva = {}; Iva["ignore"] ="1"; if(Cfa) { Iva["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;backgroundColor:#f1efe5"; } else { Iva["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;background-color:#f1efe5"; } var Wta = jPb("select", Iva, null, null, true); cxa(Wta,"change", function() { $rw_setSpeedValue(parseInt(Wta.value, 10)); }); var Xta; Iva = {}; Iva["ignore"] ="1"; Iva["value"] =""+ SLOW_SPEED; if(uca == -3 || uca == SLOW_SPEED) { Iva["selected"] ="1"; } Xta = jPb("option", Iva, null, null, true); Xta.innerHTML ="Slow"; var Yta; Iva = {}; Iva["ignore"] ="1"; Iva["value"] =""+ MEDIUM_SPEED; if(uca == -2 || uca == MEDIUM_SPEED) { Iva["selected"] ="1"; } Yta = jPb("option", Iva, null, null, true); Yta.innerHTML ="Medium"; var Zta; Iva = {}; Iva["ignore"] ="1"; Iva["value"] =""+ FAST_SPEED; if(uca == -1 || uca == FAST_SPEED) { Iva["selected"] ="1"; } Zta = jPb("option", Iva, null, null, true); Zta.innerHTML ="Fast"; Wta.appendChild(Xta); Wta.appendChild(Yta); Wta.appendChild(Zta); return Wta;}function bta(kPb, mua){ if(mua != null) { var eta = document.images[kPb + mua].style; eta.visibility ="\x76\x69sible"; eta.display ="\x69nl\x69ne"; eta.width ="\x32\x36px"; } if(mua !="\x6ff\x66") { document.images[kPb +"off"].style.visibility ="\x68idd\x65n"; document.images[kPb +"off"].style.display ="n\x6fn\x65"; document.images[kPb +"off"].style.width ="\x30px"; } if(mua !="\x6fn") { document.images[kPb +"on"].style.visibility ="\x68idden"; document.images[kPb +"on"].style.display ="n\x6fne"; document.images[kPb +"on"].style.width ="\x30\x70x"; }}function fta(kPb, mua, kmb, jta){ if(mua != null) { var eta = document.getElementById(kPb); if(kPb =="s\x75bm\x69t") { eta.width ="\x353px"; } else { eta.width ="\x333px"; } } if(mua =="\x66lat") { pPb(eta,"backgroundPosition: -"+ kmb +"px 0px;"); } if(mua =="hover") { pPb(eta,"backgroundPosition: -"+ kmb +"px -33px;"); } if(mua =="toggle") { pPb(eta,"backgroundPosition: -"+ kmb +"px -66px;"); } if(mua =="mask") { pPb(eta,"backgroundPosition: -"+ kmb +"px -99px;"); } if(jta) { if(mua =="toggleOn") { pPb(eta,"backgroundPosition: -"+ kmb +"px -66px;"); } if(mua =="mask") { pPb(eta,"backgroundPosition: -"+ kmb +"px -99px;"); } }}SpeechStream.tinymceipadfix ="thtinymceipadbugworkaround";function $rw_barInit(){ if(!zta()) { return; } if( (typeof(eba_custId) =="string"&& eba_custId =="200") || (typeof(eba_cust_id) =="string"&& eba_cust_id =="200") ) { Tua(); } Aua(); Rfa = Pfa && !(Ofa.indexOf("android") > -1) && (Zca&clicktospeak_icon)!=clicktospeak_icon && (Zca&sticky_icon)!=sticky_icon && (bca&clicktospeak_icon)!=clicktospeak_icon && (bca&sticky_icon)!=sticky_icon; Yea = wua(); oca = parseInt(lca, 10); if(oca == 300) { Yua(); } if(oca >= 500 && oca < 600) { pda = true; } if(oca >= 810 && oca <820) { cda = true; } if(oca >= 1220 && oca <1229) { fda = true; } if(Cfa && !bda) { var lDb = Bwa(); if(!lDb) { qda = true; if(zca) { } else { hsa("The embedded speech toolbar cannot be added due to invalid html tag markup in this page .\n"+"Try using FireFox or Safari to view this page or contact the page author to notify them of this error."); return; } } } SpeechStream.calculatePaths.initPaths(); if(Zca == 0) { rea = false; } if(rea) { Bva(); } qua(); uua(); Mwa(); if((Zca & calculator_icon) == calculator_icon) { $rw_barCalInit(); } if((Zca & generatecache_icon) == generatecache_icon) { $rw_barCacheInit(); } if((Zca & dictionary_icon) == dictionary_icon || (Zca & factfinder_icon) == factfinder_icon || (Zca & translation_icon) == translation_icon || (Zca & mp3_icon) == mp3_icon) { var lta = dPb("script", ["type","text/javascript","src", $g_strFileLoc +"texthelpSearch.js"]); Yea.appendChild(lta); } if((Zca & highlightcyan_icon) == highlightcyan_icon || (Zca & highlightgreen_icon) == highlightgreen_icon || (Zca & highlightmagenta_icon) == highlightmagenta_icon || (Zca & highlightyellow_icon) == highlightyellow_icon || (Zca & collect_icon) == collect_icon || Mda || (Zca & vocabulary_icon) == vocabulary_icon || (Zca & strike_icon) == strike_icon ) { var mta = dPb("script", ["type","text/javascript","src", $g_strFileLoc +"texthelpSS.js"]); Yea.appendChild(mta); } if((Zca & sticky_icon) == sticky_icon || Mda) { var nta = dPb("script", ["type","text/javascript","src", $g_strFileLoc +"texthelpSticky.js"]); Yea.appendChild(nta); } if((Zca & pronCreate_icon) == pronCreate_icon || (Zca & pronEdit_icon) == pronEdit_icon) { var ota = dPb("script", ["type","text/javascript","src", $g_strFileLoc +"texthelpPron.js"]); Yea.appendChild(ota); } if((Zca & generatecache_icon) == generatecache_icon || (Zca & checkcache_icon) == checkcache_icon) { var pta = dPb("script", ["type","text/javascript","src", $g_strFileLoc +"jquerycombined.js"]); Yea.appendChild(pta); } if(!Cfa) { var qta = document.getElementsByTagName('input'); for (var i = 0; i < qta.length; i++) { var rta = qta.item(i); var pSb = rta.getAttribute("t\x79pe"); if(pSb != null && pSb =="t\x65xt") { bxa(rta,"\x6do\x75seup", axa); } } } if(rfa && Qfa) { var tta = null; if(typeof(eba_tinymce_id) =="string") { tta = document.getElementById(eba_tinymce_id); } if(tta) { var ta = document.createElement("input"); ta.setAttribute("type","text"); ta.setAttribute("style","opacity:0;color:#ffffff;padding:0px;margin:0px;"+"border-top-color:#FFFFFF;border-right-color:#FFFFFF;border-bottom-color:#FFFFFF;border-left-color:#FFFFFF;"+"border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;"+"height:1px;width:1px"); ta.setAttribute("id", SpeechStream.tinymceipadfix); var Bmb = document.getElementById("rwDrag"); if(Bmb != null) { Bmb.appendChild(ta); } else { tta.parentNode.insertBefore(ta, tta); } wta(false); } } if(uda) { if(!bda) { aab(); } } if(typeof(eba_initial_speech_on) =="boolean") { if(eba_initial_speech_on) { $g_bMouseSpeech = true; pxa(true); ZZb.enableTouchEvents(eba_initial_speech_on); } }}function wta(xta){ try { var vta = document.getElementById(eba_tinymce_id+"_ifr").contentDocument.body; if(vta && typeof(vta.ipadTinyMceFocus) =="undefined") { vta.ipadTinyMceFocus = xta; cxa(vta,"click", function(){vta.ipadTinyMceFocus = true;}); cxa(document.getElementById(eba_tinymce_id+"_ifr").contentWindow,"focus", function(){vta.ipadTinyMceFocus = true;}); } return vta; } catch(e){} return null;}function zta(){ var Zva = false; if(typeof(BYPASS_BROWSER_CHECK) !="\x75ndefin\x65d"&& BYPASS_BROWSER_CHECK =="\x79") { Zva = true; } if(typeof(eba_bypass_dom_check) =="boolean"&& eba_bypass_dom_check) { Zva = true; bda = true; } if(!Zva) { Zva = bva(); } return Zva;}function Aua(){ lva(); if(typeof(pktTitleId) !="\x75ndef\x69n\x65d") { sva(); } if(typeof(eba_annotate_storage_url) =="string"|| typeof(eba_annotate_highlight_editor_id) =="string"|| typeof(eba_annotate_note_editor_id) =="string"|| typeof(eba_annotate_note_storage_url) =="string"|| typeof(eba_annotate_highlight_storage_url) =="string") { rva(); } if(rca == SPANISH && typeof(eba_voice) =="undefined"&& typeof(pktVoice) =="undefined"&& !sca) { kca ="\x53\x63an\x53\x6fft\x20\x50a\x75\x6cina_Fu\x6cl_22kH\x7a"; } if(typeof(dtdType) !="undefined") { zea = dtdType; if(dtdType =="xtran") { Afa = true; } else if(dtdType =="loose") { Bfa = true; } } Cua(); if(typeof(eba_use_html5) =="boolean") { if(!eba_use_html5) { cea = true; } } else { cea = !((typeof(dca) =="string"&& dca =="speechus.texthelp.com") || (typeof(eca) =="string"&& eca =="speechus.texthelp.com")); }}function Cua(){ var Xua; try { Xua = window.location.search; } catch(err) { Xua =""; } if(typeof(eba_autocache_generate) =="boolean"&& eba_autocache_generate) { Sea = true; } else { var PXb = Jua(Xua,"speechstreamautocache"); Sea = (PXb!= null) && (PXb.toLowerCase() =="true"); } if(!Sea) { if(typeof(eba_autocache_check) =="boolean"&& eba_autocache_check) { Tea = true; } else { var PXb = Jua(Xua,"speechstreamautocachecheck"); Tea = (PXb!= null) && (PXb.toLowerCase() =="true"); } } if(typeof(eba_autocache_no_alert) =="boolean"&& eba_autocache_no_alert) { Vea = true; } else { var PXb = Jua(Xua,"speechstreamautocachenoalert"); Vea = (PXb!= null) && (PXb.toLowerCase() =="true"); } if(Sea || Tea) { bca = bca | generatecache_icon; bca = bca | checkcache_icon; cea = true; } else { if(typeof(eba_icons) =="number"&& eba_icons > 0) { if( (eba_icons & generatecache_icon) == generatecache_icon || (eba_icons & checkcache_icon) == checkcache_icon ) { cea = true; } } if(typeof(eba_no_display_icons) =="number"&& eba_no_display_icons > 0) { if( (eba_no_display_icons & generatecache_icon) == generatecache_icon || (eba_no_display_icons & checkcache_icon) == checkcache_icon) { cea = true; } } } if(typeof(eba_autocache_callback) =="string") { Uea = eba_autocache_callback; } else { var PXb = Jua(Xua,"speechstreamautocachecallback"); if(PXb != null && PXb.length > 0) { PXb = decodeURIComponent(PXb); Uea = PXb; } } if(Uea && Uea.length > 0) { Uea = IUb(Uea,"\\amp;","&"); } if(typeof(eba_autocache_allspeeds) =="boolean") { Rea = eba_autocache_allspeeds; }}function Jua(Kua, Lua){ var PXb = null; var Iua = Lua +"="; Iua = Iua.toLowerCase(); var Nnb = Iua.length; var omb; var pmb; var Pua; var Qua = Kua.toLowerCase(); omb = Qua.indexOf(Iua); while(omb > 0) { Pua = Kua.charAt(omb - 1); if(Pua =="?"|| Pua =="&") { pmb = Kua.indexOf("&", omb + Nnb); if(pmb == -1) { PXb = Kua.substr(omb + Nnb); } else { PXb = Kua.substring(omb + Nnb, pmb); } break; } else { omb = Qua.indexOf(Iua, omb + 1); } } return PXb;}function Tua(){ var Rua = false; var Sua = false; oda = true; if(pca == null) { pca ="s\x63\x68olastic"; qca ="s\x63holast\x69c"; } var Uua = document.getElementsByTagName("meta"); var Nnb = Uua.length; var i; for(i=0; i<Nnb; i++ ) { var Wua = Uua[i]; if(Wua.name != null) { if(Wua.name.toLowerCase() =="assetid"&& Wua.content != null && Wua.content.length > 0) { nca = Wua.content; Sua = true; } else if(Wua.name.toLowerCase() =="pcode"&& Wua.content != null && Wua.content.length > 0) { mca = Wua.content; Rua = true; } } } var Xua = window.location.search; omb = Xua.indexOf("id="); while(omb > 0) { Pua = Xua.charAt(omb - 1); if(Pua =="?"|| Pua =="&") { pmb = Xua.indexOf("&", omb + 3); if(pmb == -1) { nca = Xua.substr(omb + 3); } else { nca = Xua.substring(omb + 3, pmb); } omb = -1; } else { omb = Xua.indexOf("id=", omb + 1); } } omb = Xua.indexOf("product_id="); while(omb > 0) { Pua = Xua.charAt(omb - 1); if(Pua =="?"|| Pua =="&") { pmb = Xua.indexOf("&", omb + 11); if(pmb == -1) { mca = Xua.substr(omb + 11); Rua = true; } else { mca = Xua.substring(omb + 11, pmb); Sua = true; } omb = -1; } else { omb = Xua.indexOf("product_id=", omb + 1); } } if(!Rua && (mca == null || mca =="")) { mca ="none"; } if(!Sua && (nca == null || nca =="")) { nca ="none"; } }function Yua(){ mca ="index"; nca ="1"; var Zua = document.location; if(Zua != null) { var rkb = Zua.pathname; if(rkb.length > 0) { var bua = rkb.lastIndexOf("/"); if(bua > -1) { rkb = rkb.substr(bua + 1); var cua = rkb.indexOf(".html"); if(cua > -1) { rkb = rkb.substring(0, cua); mca = rkb; } } } }}function gua(){ var dua; var eua; var fua; this.initPaths = function() { dua = jsa(false) + cca +"/"; eua = jsa(true) + dca +"/"; if(eca != null) { fua = jsa(true) + eca +"/"; } else { fua = null; } iua(); var jua = kua(); lua(jua); }; this.getServerUrl = function() { return dua; }; this.getSpeechServerUrl = function() { return eua; }; this.getSpeechServerUrlBackup = function() { return fua; }; function iua() { if(ica == null) { ica =""; } while(ica.length > 0 && ica.charAt(0) =='/') { ica = ica.substr(1); } while(ica.length > 0 && ica.charAt(ica.length - 1) =='/') { ica = ica.substr(0, ica.length - 1); } if(ica =="") { ica ="SpeechStream"; } } function kua() { var jua; if(Vca.length > 0) { if(Vca =="latest") { jua = ica +"/"+ Vca; } else { jua = ica +"/v"+ Vca; } } else { jua = ica; } return jua; } function lua(mua) { if(mua.length > 0) { $g_strFileLoc = dua + mua +"/"; } else { $g_strFileLoc = dua; } Tfa = jca; try { var nua = new String(document.location); if(nua.substring(0,4) =="file") { $g_strFileLoc =""; Tfa =""; } } catch(ignore) { thLogE(ignore); } }}SpeechStream.calculatePaths = new gua();function qua(){ var oua; var Pva = Qva(); if(sea > 0) { if(Sca) { if(Nfa) { efa = true; oua = dPb("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } else { oua = dPb("div", ["rwTHComp","1","style","position:relative;visibility:hidden;display:none"],"rwDrag"); } } else { oua = dPb("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } var Fva = Hva(); if(!Nca) { Fva.appendChild(Mva()); } Fva.appendChild(Pva); oua.appendChild(Fva); } else { oua = dPb("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); var Fva = dPb("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); oua.appendChild(Fva); } Yea.appendChild(oua);}function uua(){ var Bmb = document.getElementById("WebToSpeech"); if(Bmb == null) { Bmb = document.createElement("span"); Bmb.id ="WebToSpeech"; Yea.appendChild(Bmb); } Uva(SpeechStream.calculatePaths.getServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrlBackup() );}function $rw_barDynamicStart(){ Zea = true;}function wua(){ var vua; vua = document.getElementById("speechStreamPlaceholder"); if(vua == null) { if(Zea) { vua = document.body; } else { if(Sca || (Cfa&&!Gfa) ) { var Vhb = document.body; var OMb; while(Vhb != null) { if(Vhb != null && Vhb.nodeType == 1) { OMb = Vhb; } Vhb = Vhb.lastChild; } if(OMb == document.body) { vua = OMb; } else { var zua = OMb.parentNode; var Ava = document.createElement("span"); Ava.id ="speechStreamPlaceholder"; zua.insertBefore(Ava, OMb); vua = Ava; } } else { vua = document.body; } } } return vua;}function Bva(){ if(pda) { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwMain500Bar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var Cva = Zca; if(aca != -1) { Cva = aca; } var Dva = clicktospeak_icon + play_icon + pause_icon; if( (Cva | Dva) == Dva) { TQb(Yea,"<link "+"href=\""+ $g_strFileLoc +"rwMainTHSpeechBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var Eva = Dva + search_icons + picturedictionary_icon; if( (Cva | Eva) == Eva) { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwMainTHSearchBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwMainTHFullBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } } }}function Hva(){ var Fva; var tPb ="width:"+ sea +"px;"+"visibility:hidden;"; if(xca || Nca) { tPb +="display:none;"; } var Iva = {}; Iva["style"] = tPb; if(!Nca) { Fva = jPb("div", Iva,"rwMainOutline","rwToolbarOutline"); } else { Fva = jPb("div", Iva,"rwMainOutline", null); } return Fva;}function Mva(){ var Jva; var oab; var Lva; if(eba_logo_url == null) { if(pda || Lda) { oab =""; Lva = null; } else { oab ="Click here to go to www.texthelp.com"; Lva ="www.texthelp.com"; } } else if(eba_logo_url =="none") { oab =""; Lva = null; } else { oab ="Click here to go to "+ eba_logo_url; Lva = eba_logo_url; if(Lva.substr(0, 7) =="http://") { Lva = Lva.substr(7); } else if (Lva.substr(0, 8) =="https://") { Lva = Lva.substr(8); } } Jva = dPb("div", null,"rwDragMe","rwToolbarCaption"); var Nva; if(Lva == null) { Iva = {}; Iva["border"] ="0"; Iva["ignore"] ="1"; Iva["align"] ="right"; if(pda) { Iva["src"] = $g_strFileLoc +"rwimgs500/logo500.gif"; Iva["style"] ="margin: 5px; cursor:default;"; } else { Iva["src"] = $g_strFileLoc +"rwimgs/logo.gif"; Iva["style"] ="cursor:default"; } Iva["title"] =""; Iva["alt"] =""; Nva = jPb("img", Iva, null, null); Jva.appendChild(Nva); } else { Iva = {}; Iva["border"] ="0"; Iva["ignore"] ="1"; Iva["align"] ="right"; if(pda) { Iva["src"] = $g_strFileLoc +"rwimgs500/logo500.gif"; Iva["style"] ="margin: 5px;"; } else { Iva["src"] = $g_strFileLoc +"rwimgs/logo.gif"; } Iva["title"] = oab; Iva["alt"] = oab; Nva = jPb("img", Iva, null, null); var Ova; Iva = {}; Iva["href"] = jsa(false) + Lva; Iva["target"] ="new"; if(!Mfa) { Iva["style"] ="cursor:hand"; } Ova = jPb("a", Iva, null, null); Ova.appendChild(Nva); Jva.appendChild(Ova); } return Jva;}function Qva(){ var Pva; if(Nca) { Pva = dPb("div", null, null,"rwToolbarBarNoBorder"); } else { Pva = dPb("div", null, null,"rwToolbarBar"); } var Rva = dPb("div", null,"rwToolbarList", null); $rw_setIconsToLoad(Zca); var Sva = false; for (var i = 0; i < eea; i++) { Sva = true; Rva.appendChild(Ata(i)); } if((Zca & selectSpeed_icon) == selectSpeed_icon) { Sva = true; Rva.appendChild(Vta()); } if(Sva && sea< 110) { sea = 110; } else if(!Sva) { sea = 0; } Pva.appendChild(Rva); return Pva;}function Uva(Vva, Wva, Xva){ var Tva = {}; if(pca != null && qca != null) { Tva.userName = pca; Tva.userPassword = qca; } else { } Tva.lessonServerLoc = Vva; Tva.speechServerLoc = Wva; Tva.speedValue = uca; if(Xca >= 3) { Tva.useServices ="true"; } else if(Xca == -1) { if( (dca != null && dca.indexOf(".speechstream.net") > -1) || (eca != null && eca.indexOf(".speechstream.net") > -1) ) { Tva.useServices ="true"; } else { Tva.useServices ="false"; } } else { Tva.useServices ="false"; cea = true; } if(fca != null) { Tva.translateServerLoc = fca; } if(gca != null) { Tva.dictionaryServerLoc = gca; } if(hca != null) { Tva.imagedictionaryServerLoc = hca; } if(zca || Ada ) { Tva.cacheMode ="true"; if(Xva != null) { Tva.cacheLiveFallover ="true"; } } if(Xva != null) { Tva.speechServerBackupLoc = Xva; } if(lca != null && mca != null && nca != null) { Tva.custID = lca; Tva.bookID = mca; Tva.pageID = nca; } if(Ida > -1) { Tva.cacheCount = Ida; } if(Jda > -1) { Tva.cacheTimeDelay = Jda; } Tva.locale = tca; Tva.speechName = kca; if(Zda != null && ada != null) { Tva.searchString = Zda; Tva.replaceString = ada; } if(Tfa == null || Tfa =="") { Tfa = jsa(false) + cca +"/"; } else if(Tfa.charAt(0) =='.') { if(Tfa.charAt(Tfa.length -1) !='/') { Tfa = cca +"/"; } } else { if(Tfa.charAt(0) !='/') { Tfa ="/"+ Tfa; } if(Tfa.charAt(Tfa.length -1) !='/') { Tfa = Tfa +"/"; } Tfa = jsa(false) + cca + Tfa; } if(xda) { Tva.SSLSpeech ="true"; Tva.SSLToolbar ="true"; } else { if(yda) { Tva.SSLSpeech ="true"; } if(zda) { Tva.SSLToolbar ="true"; } } if(Cfa && (xda||yda)) { Tva.IESSL ="true"; } aca = Zca; Zca = Zca | bca; if( (Zca & pronCreate_icon) == pronCreate_icon || (Zca & pronEdit_icon) == pronEdit_icon || Kda) { Tva.cacheBuster ="true"; } if(vca > -1) { Tva.volumeValue =""+ vca; } var afb = {}; afb.allowScriptAccess ="always"; afb.movie = Tfa +'WebToSpeech'+ Wca +'.swf'; afb.quality="high"; afb.bgcolor="#ffffff"; SpeechStream.m_flashVars = Tva; SpeechStream.setUpControllerFactory(); if(ZZb.doesSupportHtml5()) { ZZb.getConnector().initialise(Tva, Vva, Wva, Xva); } else { try { if(Gfa) { g_strAmp="&amp;"; } swfobject.embedSWF(Tfa +'WebToSpeech'+ Wca +'.swf',"WebToSpeech","1","1","9.0.0", false, Tva, afb); } catch(err) {g_strAmp="&amp;"; swfobject.embedSWF(Tfa +'WebToSpeech'+ Wca +'.swf',"WebToSpeech","1","1","9.0.0", false, Tva, afb); } }}function bva(){ var Zva = false; var ava = navigator.userAgent; if(ava.indexOf("MSIE 6") > -1) { Zva = true; } else if(ava.indexOf("MSIE 7") > -1) { Zva = true; } else if(ava.indexOf("MSIE 8") > -1) { Zva = true; } else if(ava.indexOf("MSIE 9") > -1) { Zva = true; } else if(ava.indexOf("MSIE 10") > -1) { Zva = true; } else if(ava.indexOf("Safari") > -1) { Zva = true; var UDb = navigator.appVersion; var VDb = UDb.lastIndexOf("/"); UDb = UDb.substring(VDb + 1); try { var WDb = parseFloat(UDb); if(WDb < 300 ) { hsa("You are using an older version of Safari that is not "+"support by the embedded bar in this page.  "+"The bar may not work at all or work erratically, "+"it is recommended that you upgrade to the latest version of Safari."); } } catch(err) { thLogE(err); } } else if(ava.indexOf("Firefox") > -1) { Zva = true; var Mbb = ava.indexOf("Firefox") + 8; if(Mbb < ava.length) { var gva = ava.substr(Mbb); var xya = gva.substr(0, gva.indexOf(".")); try { var iva = parseInt(xya, 10); if(iva < 2) { if(iva == 1) { gva = gva.substr(xya.length + 1); var yya = gva.substr(0, gva.indexOf(".")); iva = parseInt(yya, 10); } else { iva = 0; } if(iva < 5) { hsa("You are using an older version of Firefox that is not "+"support by the embedded bar in this page.  "+"The bar may not work at all or work erratically, "+"it is recommended that you upgrade to the latest version of Firefox."); } } } catch(err) { thLogE(err); } } } else if(ava.indexOf("ipad") > -1 || ava.indexOf("ipod") > -1 || ava.indexOf("iphone") > -1) { Zva = true; } else { var kva = navigator.platform; if(kva.indexOf("mac") > -1) { hsa("The browser you are using is not supported by the embedded bar that should be displayed in this page.  "+"To view this page with the bar displayed please use Firefox (version 2.0.0.1 or later)."); } else { hsa("The browser you are using is not supported by the embedded bar that should be displayed in this page.  "+"To view this page with the bar displayed please use either Firefox (version 2.0.0.1 or later) "+"or Internet Explorer (version 7 or later)."); } } return Zva;}function lva(){ if(typeof(eba_use_container) =="boolean") { Sca = eba_use_container; } if(typeof(eba_allow_alerts_flag) =="boolean") { Tca = eba_allow_alerts_flag; } if(typeof(eba_alerts) =="boolean") { Tca = eba_alerts; } if(typeof(eba_no_title) =="boolean") { Nca = eba_no_title; } if(typeof(eba_noTitleFlag) =="boolean") { Nca = eba_noTitleFlag; } if(typeof(eba_hidden_bar) =="boolean") { xca = eba_hidden_bar; } if(typeof(eba_continuous_reading) =="boolean") { rda = eba_continuous_reading; if(!rda) { Cea = false; } } if(typeof(eba_dont_extend_selection) =="boolean") { Dea = !eba_dont_extend_selection; } if(typeof(eba_ignore_buttons) =="boolean") { yca = eba_ignore_buttons; } if(typeof(eba_speak_selection_by_sentence) =="boolean") { if(rda) { Cea = eba_speak_selection_by_sentence; } else { Cea = false; } } if(typeof(eba_page_complete_after_selection) =="boolean") { Eea = eba_page_complete_after_selection; } if(typeof(eba_speechCacheGenerateFlag) =="boolean") { zca = eba_speechCacheGenerateFlag; if(zca) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } if(typeof(eba_cache_building_mode) =="boolean") { zca = eba_cache_building_mode; if(zca) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } var mva = false; if(typeof(eba_speechCacheFlag) =="boolean") { Ada = eba_speechCacheFlag; mva = true; } if(typeof(eba_speech_cache_flag) =="boolean") { Ada = eba_speech_cache_flag; mva = true; } if(typeof(eba_cache_mode) =="boolean") { Ada = eba_cache_mode; mva = true; } if(mva && Ada) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_ONLY; } if(typeof(eba_cache_live_generation) =="boolean") { Bda = eba_cache_live_generation; if(Bda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER; } } if(typeof(eba_split_cache_path) =="boolean") { Cda = eba_split_cache_path; } if(typeof(eba_autoCachePage) =="boolean") { Dda = eba_autoCachePage; } if(typeof(eba_voice_from_lang_flag) =="boolean") { sca = eba_voice_from_lang_flag; } if(typeof(eba_bubble_mode) =="boolean") { uda = eba_bubble_mode; } if(typeof(eba_bubble_freeze_on_shift_flag) =="boolean") { vda = eba_bubble_freeze_on_shift_flag; } if(typeof(eba_hover_flag) =="boolean") { Jca = !eba_hover_flag; } if(typeof(eba_ssl_flag) =="boolean") { xda = eba_ssl_flag; yda = xda; zda = xda; } if(typeof(eba_ssl_speech) =="boolean") { yda = eba_ssl_speech; } if(typeof(eba_ssl_toolbar) =="boolean") { zda = eba_ssl_toolbar; } if(typeof(eba_clientside_pronunciation) =="boolean") { if(eba_clientside_pronunciation) { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } else { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } } if(typeof(eba_alter_browser_for_consistency) =="boolean") { Bea = eba_alter_browser_for_consistency; } if(typeof(eba_cache_selection) =="boolean") { Gda = eba_cache_selection; } if(typeof(eba_cache_user_text) =="boolean") { Hda= eba_cache_user_text; } if(typeof(eba_skip_on_error) =="boolean") { if(eba_skip_on_error) { SpeechStream.actionOnError.action = SpeechStream.actionOnError.SKIP; } } if(typeof(eba_cache_buster) =="boolean") { if(eba_cache_buster) { Kda = true; } } if(typeof(eba_handle_radio_checkbox_click) =="boolean") { if(eba_handle_radio_checkbox_click) { Hea = true; } } if(typeof(eba_inline_img) =="boolean") { tda = eba_inline_img; } if(typeof(eba_ignore_hidden) =="boolean") { Pga = eba_ignore_hidden; } if(typeof(eba_limit_cookies) =="boolean") { gda = eba_limit_cookies; } if(typeof(eba_ignore_frames) =="boolean") { hda = eba_ignore_frames; } if(typeof(eba_math) =="boolean") { afa = eba_math; } if(typeof(eba_maths) =="boolean") { afa = eba_maths; } if(typeof(eba_use_vocabulary) =="boolean") { jfa = eba_use_vocabulary; } if(typeof(eba_use_vocab) =="boolean") { jfa = eba_use_vocab; } if(typeof(eba_use_commands) =="boolean") { qfa = eba_use_commands; } if(typeof(eba_tinymce) =="boolean") { rfa = eba_tinymce; } if(typeof(eba_icons) =="number") { Zca = eba_icons; } if(typeof(eba_no_display_icons) =="number") { bca = eba_no_display_icons; } if(typeof(eba_language) =="number") { rca = eba_language; if(rca == 3) { rca = 2; } else if(rca > 3 || rca < 0) { rca = 0; } if(sca) { if(eba_language >= 0 && eba_language < faa.length) { kca = faa[eba_language]; } } } if(typeof(eba_speedValue) =="number") { uca = eba_speedValue; } if(typeof(eba_speed_value) =="number") { uca = eba_speed_value; } if(typeof(eba_reading_age) =="number") { $rw_setReadingAge(eba_reading_age); } if(typeof(eba_speed_offset) =="number") { uca += eba_speed_offset; } if(typeof(eba_volume_value) =="number") { vca = eba_volume_value; } if(typeof(eba_cache_retry) =="number") { Ida = eba_cache_retry; } if(typeof(eba_cache_retry_timeout) =="number") { Jda = eba_cache_retry_timeout; } if(typeof(eba_mp3_limit) =="number") { if(eba_mp3_limit < 1000) { eda = eda * 1024; } else { eda = eba_mp3_limit; } } if(typeof(eba_max_word_count =="number")) { sFb = eba_max_word_count; } if(typeof(eba_date_filter_mode =="number") || typeof(eba_date_filter_mode) =="string") { vka.setMode(eba_date_filter_mode); } if(typeof(eba_vocabulary_limit) =="number") { lfa = eba_vocabulary_limit; } if(typeof(eba_server_version) =="string") { Vca = eba_server_version; } if(typeof(eba_serverVersion) =="string") { Vca = eba_serverVersion; } if(typeof(eba_client_version) =="string") { if(eba_client_version !="latest") { Wca = eba_client_version; } } if(typeof(eba_clientVersion) =="string") { if(eba_clientVersion !="latest") { Wca = eba_clientVersion; } } if(typeof(eba_server) =="string") { cca = eba_server; if(cca.length > 6 && cca.substring(0, 7) =="http://") { cca = cca.substring(7); } else if(cca.length > 7 && cca.substring(0, 8) =="https://") { cca = cca.substring(8); } } if(typeof(eba_speech_server) =="string") { dca = eba_speech_server; } if(typeof(eba_speechServer) =="string") { dca = eba_speechServer; } if(typeof(eba_speech_server_backup) =="string") { eca = eba_speech_server_backup; } if(typeof(eba_speechServerBackup) =="string") { eca = eba_speechServerBackup; } if(typeof(eba_translation_server) =="string") { fca = eba_translation_server; } if(typeof(eba_translate_server) =="string") { fca = eba_translate_server; } if(typeof(eba_dictionary_server) =="string") { gca = eba_dictionary_server; } if(typeof(eba_picturedictionary_server) =="string") { hca = eba_picturedictionary_server; } if(fca == null || gca == null) { var nva =".speechstream.net"; var ova = nva.length; var pva = false; var qva = null; if(dca != null && (dca =="speechus.texthelp.com"|| (dca.length > ova && dca.substring(dca.length - ova) == nva) )) { pva = true; qva = dca; } else if(eca != null && (eca =="speechus.texthelp.com"|| (eca.length > ova && eca.substring(eca.length - ova) == nva) )) { pva = true; qva = eca; } if(pva) { if(fca == null) { fca = qva; } if(gca == null) { gca = qva; } } } if(typeof(eba_vocabulary_server) =="string") { kfa = eba_vocabulary_server; } else { kfa = gca; } if(typeof(eba_folder) =="string") { ica = eba_folder; } if(typeof(eba_client_folder) =="string") { jca = eba_client_folder; } if(typeof(eba_clientFolder) =="string") { jca = eba_clientFolder; } if(typeof(eba_voice) =="string") { kca = eba_voice; if(kca =="ScanSoft Daniel_Full_22kHz") { faa[ENG_UK] = kca; } else if(kca =="ScanSoft Tom_Full_22kHz") { faa[ENG_US] = kca; } else if(kca =="ScanSoft Jill_Full_22kHz") { faa[ENG_US] = kca; } } if(typeof(eba_custId) =="string") { eba_cust_id = eba_custId; } if(typeof(eba_cust_id) =="string") { lca = QUb(eba_cust_id.trimTH()); } if(typeof(eba_bookId) =="string") { eba_book_id = eba_bookId; } if(typeof(eba_book_id) =="string") { mca = QUb(eba_book_id.trimTH()); } if(typeof(eba_pageId) =="string") { eba_page_id = eba_pageId; } if(typeof(eba_page_id) =="string") { nca = QUb(eba_page_id.trimTH()); } if(lca == null || lca.length == 0 || mca == null || mca.length == 0 || nca == null || nca.length == 0) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.NONE; SpeechStream.cacheMode.mode = SpeechStream.cacheMode.NONE; } if(typeof(eba_loginName) =="string") { eba_login_name = eba_loginName; } if(typeof(eba_login_name) =="string") { pca = eba_login_name; } if(typeof(eba_loginPassword) =="string") { eba_login_password = eba_loginPassword; } if(typeof(eba_login_password) =="string") { qca = eba_login_password; } else { qca = pca; } if(typeof(eba_locale) =="string") { tca = eba_locale; } if(typeof(eba_speech_range_colors) =="string") { Oca = eba_speech_range_colors; } if(typeof(eba_speech_range_colours) =="string") { Oca = eba_speech_range_colours; } if(typeof(eba_speech_word_colors) =="string") { Pca = eba_speech_word_colors; } if(typeof(eba_speech_word_colours) =="string") { Pca = eba_speech_word_colours; } if(typeof(eba_mp3_id) =="string") { dda = eba_mp3_id; } if(typeof(eba_search_speech_server) =="string") { Zda = eba_search_speech_server; } if(typeof(eba_replace_speech_server) =="string") { ada = eba_replace_speech_server; } if(typeof(eba_play_start_point) =="string") { Qca = eba_play_start_point; } if(typeof(eba_speech_stream_server_version) =="string"|| typeof(eba_speech_stream_server_version) =="number") { if(typeof(eba_speech_stream_server_version) =="number") { Xca = eba_speech_stream_server_version; } else { try { Xca = parseInt(eba_speech_stream_server_version, 10); } catch(e) { } } } else { if(eba_cust_id =="810") { Xca = 3; } } if(typeof(eba_symbol_text) =="string") { dTb(eba_symbol_text); } if(typeof(eba_speech_file_type) =="string") { eba_speech_file_type = eba_speech_file_type.toLowerCase(); if(eba_speech_file_type =="mp3"|| eba_speech_file_type =="ogg"|| eba_speech_file_type =="wav") { ifa = eba_speech_file_type; } } if(typeof(eba_voice_language_map) =="string") { Dga(eba_voice_language_map); } if(typeof(eba_break_list) =="string") { $rw_setBreakList(eba_break_list); }}function rva(){ if(mca == null) { hsa("Persistent annotations is enabled but no book id was provided, "+"this feature will not work in this page."); return; } if(nca == null) { hsa("Persistent annotations is enabled but no page id was provided, "+"this feature will not work in this page."); return; } Mda = true; if(typeof(eba_annotate_note_editor_id) =="string") { Nda = QUb(eba_annotate_note_editor_id); } if(typeof(eba_annotate_highlight_editor_id) =="string") { Oda = QUb(eba_annotate_highlight_editor_id); } if(typeof(eba_annotate_note_reader_id) =="string") { Pda = QUb(eba_annotate_note_reader_id); } if(typeof(eba_annotate_highlight_reader_id) =="string") { Qda = QUb(eba_annotate_highlight_reader_id); } if(typeof(eba_annotate_persist_notes) =="boolean"&& Nda !="*") { Rda = eba_annotate_persist_notes; } if(typeof(eba_annotate_persist_highlights) =="boolean"&& Oda !="*") { Sda = eba_annotate_persist_highlights; } if(typeof(eba_annotate_highlight_store_text) =="boolean") { Tda = eba_annotate_highlight_store_text; } if(typeof(eba_annotate_storage_url) =="string") { Uda = eba_annotate_storage_url; if(typeof(eba_server) =="undefined") { cca = Uda; } } else { if(Ada) { if(eca != null) { Uda = eca; } else { Uda = cca; } } else { Uda = dca; } } if(typeof(eba_annotate_note_storage_url) =="string") { Vda = eba_annotate_note_storage_url; } if(typeof(eba_annotate_highlight_storage_url) =="string") { Wda = eba_annotate_highlight_storage_url; } if(typeof(eba_annotate_confirm_delete_note) =='boolean') { Yda = eba_annotate_confirm_delete_note; } if(Rda) { if((Zca & sticky_icon) != sticky_icon ) { if(Zca == no_bar) { bca += sticky_icon; } else { Zca += sticky_icon; } } }}function sva(){ Lda = true; Mda = true; if(typeof(pktIsTeacher) =="boolean") { Rda = pktIsTeacher; } if(typeof(pktTitleId) =="string") { mca = pktTitleId; } if(typeof(pktPageId) =="string") { nca = pktPageId; } if(typeof(pktStudentId) =="string") { if(!Rda) { Sda = true; } Oda = QUb(pktStudentId); Pda = QUb(pktStudentId); } if(typeof(pktTeacherId) =="string") { Nda = QUb(pktTeacherId); Qda = QUb(pktTeacherId); } if(typeof(pktStorageUrl) =="string") { Uda = pktStorageUrl; if(typeof(eba_server) =="undefined") { cca = Uda; } } else { Uda = cca; } if(typeof(pktSpeechServerUrl) =="string") { dca = pktSpeechServerUrl; } if(typeof(pktVoice) =="string") { kca = pktVoice; } if(typeof(pktCustCode) =='string') { Xda = pktCustCode; } if(typeof(pktConfirmOnDelete) =='boolean') { Yda = pktConfirmOnDelete; } if(Rda) { if((Zca & sticky_icon) != sticky_icon ) { if(Zca == no_bar) { bca += sticky_icon; } else { Zca += sticky_icon; } } }}function Bwa(){ if(!hda && top.frames.length > 0) { var i = 0; var Nnb = top.frames.length; for (i = 0; i < Nnb; i++) { var Swa = top.frames[i]; try { var Nwa = Swa.document; var b = Dwa(Nwa.body); if(!b) { return false; } } catch(e) { } } } if(document.body != null) { return Dwa(document.body); } else { return true; }}function Dwa(cVb){ if(cVb.firstChild != null) { var nUb = cVb.firstChild; var ajb = nUb.ownerDocument.body; try { while(nUb != null && nUb != ajb) { nUb = PJb(nUb); } } catch(er) { return false; } } return true;}var yva = 0;var zva = 500;var Awa = false;function $rw_versionCheck(){ try { bea = ZZb.doesSupportSpeech(); $rw_setSpeedValue(uca); } catch (err) { bea = false; } if(!bea) { yva++; if(yva < zva) { setTimeout($rw_versionCheck, 100); } else { if(!Awa) { if(zca) { } else { hsa("A necessary flash component failed to load.  This page will not work as intended.\n"+"Could not load file from: "+ Tfa +'WebToSpeech'+ Wca +'.swf'); } Awa = true; } } }}var Fwa = -1;function $rw_getFlashVersion(){ if(Fwa < 0) { try { var flash = ZZb.getConnector(); var jZb = flash.getVersion(); Fwa = parseInt(jZb, 10); } catch(err) { Fwa = parseInt(Wca, 10); thLogE(err); } } return Fwa;}function Iwa(Jwa, Lwa){ if(Jwa == null || Lwa == null) { return false; } if(Jwa = Lwa) { return true; } if(Jwa.frames.length > 0) { var i; for(i=0; i<Jwa.frames.length; i++) { if(Lwa == Jwa.frames[i]) { return true; } else { if(Jwa.frames[i].length > 0) { if(Iwa(Jwa.frames[i], Lwa)) { return true; } } } } return false; } else { return false; }}function Mwa(){ cxa(window,'scroll', JCb); cxa(window,'resize', JCb); cxa(window,'scroll', LCb); cxa(window,'resize', LCb); if(!Zea) { cxa(window,'load', tya); } cxa(window,'beforeunload', Aza); cxa(document,'click', Gya); bxa(document,'mouseout', dya); bxa(document,'mouseup', bya); bxa(document,'mousemove', Vya); bxa(document,'mouseover', Jya); bxa(document,'mousedown', Cya); bxa(document,'dragstart', Dya); }function $rw_addEventsToFrame(iQb){ try { var Nwa = iQb.document; bxa(Nwa,'mouseout', dya); bxa(Nwa,'mouseup', bya); bxa(Nwa,'click', Gya); bxa(Nwa,'mousemove', Vya); bxa(Nwa,'mouseover', Jya); bxa(Nwa,'mousedown', Cya); bxa(Nwa,'dragstart', Dya); } catch(er) { } if(iQb.frames.length > 0) { if(!hda) { var i = 0; for(i=0;i<iQb.frames.length; i++) { $rw_addEventsToFrame(iQb.frames[i]); } } }}function $rw_pageSetup(){ $rw_tagSentencesWithFrames(window); if(!hda && window.frames.length > 0) { var i = 0; try { var Nnb = window.frames.length; for (i = 0; i < Nnb; i++) { $rw_addEventsToFrame(window.frames[i]); } } catch(e) { } } mCb = document.getElementById('rwDrag').style; mCb.display ="inline"; yva = 0; $rw_versionCheck(); Qwa(); Pga = true;}function Qwa(){ if(!bea) { if(yva < zva) { setTimeout(Qwa, 109); } return; } Yfa = false; var Pwa = false; if(bea && typeof(uWb) =="function") { if(SpeechStream.pronunciation.fetchData()) { Pwa = true; } } if(Pwa) { if(lca != null && lca.length > 0 && mca != null && mca.length > 0 && nca != null && nca.length > 0) { Zfa = true; rVb.deleteAll(); uWb(); } }}function $rw_tagSentencesWithFrames(iQb){ if(typeof(iQb) =="undefined") { iQb = window; } if(iQb.document && iQb.document.body) { $rw_tagSentences(iQb.document.body); } if(!hda) { if (iQb.frames.length > 0) { var i = 0; var Nnb = iQb.frames.length; for (i = 0; i < Nnb; i++) { try { var Swa = iQb.frames[i]; if(Swa.frames.length > 0) { $rw_tagSentencesWithFrames(Swa.frames); } else { if(Swa.document && Swa.document.body) { $rw_tagSentences(Swa.document.body); } } } catch(err) { } } } }}var Twa ="[\\x21\\x2E\\x3F\\x3A]";var Uwa = /[\n\r\t ]{2,}/g;function $rw_tagSentences(cVb){ if(typeof(cVb) =='undefinded'|| cVb == null) { cVb = document.body; } try { var Vwa = false; var Wwa = false; if(oca >= 200 && oca < 300) { Wwa = true; } oda = Wwa; var oNb = cVb; while(oNb != null) { if(oNb.nodeType == 3) { var sNb = oNb.parentNode.tagName.toLowerCase(); if(sNb =="textarea") { oNb = UIb(oNb, false, null); continue; } var Kjb = oNb.nodeValue; var awa = Kjb.trimSpaceTH(); var Dxa = awa.length > 0; if(cda && sNb =="a") { Dxa = false; } if(!Dxa) { if(Mda || Ada && (oda || Lda || Bea) ) { if(Vwa) { if(!cda) { oNb.nodeValue =" "; } Vwa = false; oNb = UIb(oNb, false, null); } else { var Vhb = oNb; oNb = UIb(oNb, false, null); if(!cda) { Vhb.parentNode.removeChild(Vhb); } } } else { oNb = UIb(oNb, false, null); } } else { if(!cda) { if(Mda || Ada && (oda || Lda || Bea) ) { if(awa.length < Kjb.length) { var Vcb = false; awa = Kjb.trimSpaceStartTH(); if((Kjb.length - awa.length) > 0) { if(Vwa) { Kjb =" "+ awa; } else { Kjb = awa; } Vcb = true; } awa = Kjb.trimSpaceEndTH(); if((Kjb.length - awa.length) > 1) { Kjb = awa +" "; Vwa = false; Vcb = true; } awa = Kjb.replace(Uwa," "); if(awa.length < Kjb.length) { Kjb = awa; Vcb = true; } if(Vcb) { oNb.nodeValue = Kjb; } } } } var Rnb; Rnb = Kjb.search(Twa); var fwa = (oNb.parentNode.getAttribute("texthelpSkip") != null); var gwa = oNb; if(Rnb > -1 && Rnb < (Kjb.length - 1)) { var hwa = true; while(true) { var xgb = Mxa(Kjb, Rnb, oNb); if(xgb) { break; } else { var jwa = Kjb.substring(Rnb + 1); var Mbb = jwa.search(Twa); if(Mbb > -1) { Rnb = Rnb + 1 + Mbb; } else { hwa =false; break; } } } if(hwa) { var Umb = Kjb.substring(0, Rnb + 1); var dMb = Kjb.substring(Rnb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Umb); var hMb = document.createTextNode(dMb); var wwa = oNb.parentNode; wwa.insertBefore(hMb, oNb); wwa.insertBefore(span, hMb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = hMb; gwa = gMb; } else { if(oNb.previousSibling != null || oNb.nextSibling != null || fwa) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Kjb); var wwa = oNb.parentNode; wwa.insertBefore(span, oNb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = gMb; } gwa = oNb; oNb = UIb(oNb, false, null); } } else { if(oNb.previousSibling != null || oNb.nextSibling != null || fwa) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var gMb = document.createTextNode(Kjb); var wwa = oNb.parentNode; wwa.insertBefore(span, oNb); span.appendChild(gMb); wwa.removeChild(oNb); oNb = gMb; } gwa = oNb; oNb = UIb(oNb, false, null); } if(Mda || Ada && (oda || Lda || Bea) ) { var xwa = gwa.nodeValue; var ywa = gwa.nodeValue.length; if(ywa > 0 && xwa.charCodeAt(ywa - 1) == 32) { Vwa = false; } else { Vwa = true; } } } } else if(oNb.nodeType == 1) { if(Mda) { if(!kMb(oNb)) { if(BNb(oNb)) { Vwa = false; } } else if(oNb.tagName.toLowerCase() =="img") { Vwa = true; } } if(Wwa) { if(oNb.tagName.toLowerCase() =="img") { var RNb = oNb.getAttribute("title"); oNb.setAttribute("msg", RNb); } } else if(tda) { if(oNb.tagName.toLowerCase() =="img") { var RNb = oNb.getAttribute("msg"); if(!(RNb != null && RNb.length > 0)) { RNb = oNb.getAttribute("title"); if(RNb != null && RNb.length > 0) { oNb.setAttribute("msg", RNb); } else { RNb = oNb.getAttribute("alt"); oNb.setAttribute("msg", RNb); } } } } var Hxa = oNb.getAttribute(caa); var Ixa = oNb.getAttribute(baa); if(oNb.tagName.toLowerCase() =="pre"|| (Hxa != null && Hxa.length > 0) || (Ixa != null && Ixa.length > 0)) { oNb = vIb(oNb, false, null); } else { oNb = UIb(oNb, false, null); } } else { oNb = UIb(oNb, false, null); } } if(Mda) { oNb = cVb; while(oNb != null) { if(oNb.nodeType==3) { var Dxa = oNb.nodeValue.trimTH().length > 0; if(Dxa) { var Exa = oNb.parentNode; var Fxa = Exa.getAttribute("id"); if(Fxa == null || Fxa.length == 0) { Exa.id ="rwTHnoteMarker"+ Wfa; ++Wfa; } } oNb = UIb(oNb, false, null); } else if(oNb.nodeType == 1) { if(Vjb(oNb)) { var Gxa = oNb.getAttribute("id"); if(Gxa == null || Gxa.length == 0) { oNb.id ="rwTHnoteMarker"+ Wfa; ++Wfa; } } var Hxa = oNb.getAttribute(caa); var Ixa = oNb.getAttribute(baa); if( oNb.tagName.toLowerCase() =="pre"|| (Hxa != null && Hxa.length > 0) || (Ixa != null && Ixa.length > 0)) { oNb = vIb(oNb, false, null); } else { oNb = UIb(oNb, false, null); } } else { oNb = UIb(oNb, false, null); } } } } catch(exception) { Qra("Error in $rw_tagSentences: "+ exception); } nda = true;}function Mxa(zmb, Anb, Wjb){ var vmb = true; var Nnb = zmb.length; if(Nnb > Anb + 1) { var xmb = zmb.charCodeAt(Anb + 1); if(lra(xmb)) { vmb = false; } if(afa && xmb == 61) { if(qTb("!=")) { if(Wjb.nodeValue.charAt(Anb) =='!') { vmb = false; } } } } if(vmb) { if(Wjb.nodeValue.charAt(Anb) !='.') { return true; } } if(vmb) { if(Anb > 1) { var Cnb = zmb.substring(Anb - 2, Anb); if( (Cnb.charAt(0) ==' '|| Cnb.charAt(0) =='\n'|| Cnb.charAt(0) =='\r'|| Cnb.charAt(0) =='\t') && Cnb.charCodeAt(1) > 63 && Cnb.charCodeAt(1) < 91) { vmb = false; } else if(Cnb.charAt(0) =='.'&& lra(Cnb.charCodeAt(1))) { vmb = false; } else { if(Cnb =="Dr"|| Cnb =="Mr"|| Cnb =="Ms"|| Cnb =="Av"|| Cnb =="St"|| Cnb =="eg") { vmb = false; } else if(Anb > 2) { var Dnb = zmb.substring(Anb - 3, Anb); if(Dnb =="Mrs"|| Dnb =="etc"|| Dnb =="i.e"|| Dnb =="P.O"|| Dnb =="PhD") { vmb = false; } else if(Anb > 3) { var Enb = zmb.substring(Anb - 4, Anb); if(Enb =="Ph.D") { vmb = false; } } } } } else { try { if(Wjb != null && Anb == 0) { if(fda) { var jGb = null; if(Wjb.previousSibling != null && Wjb.previousSibling.nodeType == 1) { jGb = Wjb.previousSibling; } else if(Wjb.parentNode.previousSibling != null && Wjb.parentNode.previousSibling.nodeType == 1) { jGb = Wjb.parentNode.previousSibling; } else { var oNb = Wjb.parentNode; while(oNb != null && oNb.parentNode.tagName.toLowerCase() =="span") { if(oNb.parentNode.previousSibling != null && oNb.parentNode.previousSibling.nodeType == 1) { jGb = oNb.parentNode.previousSibling; break; } oNb = oNb.parentNode; } } if(jGb != null) { if(jGb.nodeType == 1 && jGb.tagName.toLowerCase() =="span") { RNb = jGb.getAttribute(("class")); fGb = jGb.getAttribute(("className")); var hGb = false; hGb = (RNb != null && (RNb.toLowerCase() =="x2"|| RNb.toLowerCase() =="x3")) || (fGb != null && (fGb.toLowerCase() =="x2"|| fGb.toLowerCase() =="x3")); if(hGb) { if(jGb.lastChild.nodeType == 1) { while(jGb != null && jGb.lastChild != null && jGb.lastChild.nodeType != 3) { jGb = jGb.lastChild; } } if(jGb != null && jGb.lastChild.nodeType == 3) { return Mxa(jGb.lastChild.nodeValue + zmb, jGb.lastChild.nodeValue.length, null); } else { } } } } } else { var Rgb = wJb(Wjb, true, null); if(Rgb != null && Rgb.nodeType ==3) { if(!Mxa(Rgb.nodeValue + zmb, Rgb.nodeValue.length, null)) { return false; } } } } } catch(err) { } } } if(vmb && eba_abbr_array != null && typeof(eba_abbr_array) =="object"&& typeof(eba_abbr_array.length) =="number") { var Fnb = eba_abbr_array.length; var i; var Gnb; for(i=0; i< Fnb; i++) { Gnb = eba_abbr_array[i]; if(typeof(Gnb) =="string") { if(Anb - Gnb.length > -1) { if(zmb.substring(Anb - Gnb.length, Anb) == Gnb) { vmb = false; break; } } } } } return vmb;}var Zxa = null;function axa(event){ Zxa = event.currentTarget;}function bxa(oRb, eventType, func){ if(Rfa) { if(oRb.document && oRb.document.body && oRb.document.body.screen) { return true; } if(oRb.location) { return true; } } return cxa(oRb, eventType, func);}function cxa(oRb, eventType, func){ if (oRb.addEventListener) { oRb.addEventListener(eventType, func, false); return true; } else if (oRb.attachEvent) { return oRb.attachEvent("on"+ eventType, func); } else { return false; }}function dxa(ev){ if (ev.pageX) { if(Afa) { return {x:(ev.pageX - document.documentElement.scrollLeft), y:(ev.pageY - document.documentElement.scrollTop)}; } else if(Bfa) { return {x:(ev.pageX - document.body.parentNode.scrollLeft), y:(ev.pageY - document.body.parentNode.scrollTop)}; } else { return {x:(ev.pageX - document.body.scrollLeft), y:(ev.pageY - document.body.scrollTop)}; } } else { return {x:ev.clientX, y:ev.clientY}; }}function fxa(Tbb){ var left = 0; var top = 0; if(Tbb.nodeType == 3) { Tbb = Tbb.parentNode; } while (Tbb.offsetParent) { left += Tbb.offsetLeft + (Tbb.currentStyle ? (parseInt(Tbb.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Tbb.offsetTop + (Tbb.currentStyle ? (parseInt(Tbb.currentStyle.borderTopWidth, 10)).NaN0():0); Tbb = Tbb.offsetParent; } left += Tbb.offsetLeft + (Tbb.currentStyle ? (parseInt(Tbb.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Tbb.offsetTop + (Tbb.currentStyle ? (parseInt(Tbb.currentStyle.borderTopWidth, 10)).NaN0():0); left -= rw_getScreenOffsetLeft(); top -= rw_getScreenOffsetTop(); return {x:left, y:top};}var hxa = false; var ixa = false; var jxa = false; function $rw_isSpeaking(){ return hxa;}var kxa ="funplay play cyan magenta yellow green strike clear collect trans ffinder dictionary picturedictionary vocabulary";var lxa ="cyan magenta yellow green strike clear collect";var mxa ="spell homophone pred";function pxa(uxa){ if($g_bMouseSpeech) { uxa = true; } if(ixa == uxa) { return; } try { var nxa = SpeechStream.lsa; for (var i = 0; i < eea; i++) { var Xjb = g_icons[i][nxa.ICON_NAME]; if (kxa.indexOf(Xjb) > -1) { if (uxa) { fta(g_icons[i][nxa.ICON_NAME],"mask", g_icons[i][nxa.ICON_OFFSET], false); } else { fta(g_icons[i][nxa.ICON_NAME],"flat", g_icons[i][nxa.ICON_OFFSET], false); } } } ixa = uxa; } catch(err) { thLogE(err); }}function rxa(uxa){ if(Iea != null) { if(jxa == uxa) { return; } try { if (uxa) { bta("speaker"+Iea,"on"); } else { bta("speaker"+Iea,"off"); Iea = null; } jxa = uxa; } catch(err) { thLogE(err); } }}function txa(uxa){ hxa = uxa;}function xxa(){ try { var dlb = SpeechStream.lsa; for (var i = 0; i < eea; i++) { var Xjb = g_icons[i][dlb.ICON_NAME]; if (lxa.indexOf(Xjb) > -1) { fta(g_icons[i][dlb.ICON_NAME],"flat", g_icons[i][dlb.ICON_OFFSET], false); } } for (var i = 0; i < fea; i++) { var Xjb = dea[i][dlb.ICON_NAME]; if (mxa.indexOf(Xjb) > -1) { fta(g_icons[i][dlb.ICON_NAME],"mask", g_icons[i][dlb.ICON_OFFSET], true); } } } catch(err) { thLogE(err); }}function zxa(kPb){ return document.getElementById(kPb);}function $speechFinishedInFlash(){ pxa(false); rxa(false); txa(false);}Number.prototype.NaN0 = function(){ return isNaN(this)?0:this;};function Bya(event){}function Cya(event){ if(!Hca) { return; } var target = event.target || event.srcElement; if(target.id =='rwDragMe'|| target.id =='rwDragMeDisplay'|| target.id =='rwDragMeTrans'|| target.id =='rwDragMeFF'|| target.id =='rwDragMeDict'|| target.id =='rwDragMeCollect'|| target.id =='rwDragMeStickyNoteTop'|| target.id =='rwDragMeStickyNoteBot'|| target.id =='rwDragMePronCreate'|| target.id =='rwDragMePronEdit'|| target.id =='rwDragMeCal'|| target.id =='rwDragMePictureDictionary') { jea = target; kea = true; if (jea.setCapture) {jea.setCapture(true); } iea = fxa(jea); if(target.id =='rwDragMeStickyNoteBot') { iea.y -= target.offsetTop; } hea = dxa(event); return false; }}function Dya(event){ if(!Hca) { return; } var target = event.target || event.srcElement; if (target.tagName =="IMG"&& target.className =="rwIcon") { eya(event); return false; }}var Eya = 0;function Gya(event){ if(!Hca) { return; } var fBb = (new Date).getTime(); if((fBb - Eya) < Uga ) { return; } Eya = fBb; if (event != null) { if (!kea) { if($g_bMouseSpeech && Jca) { bDb(event); } if(Xfa) { xib(event); } } }}function Jya(event){ if(!Hca) { return; } if (event != null) { if (!kea) { if(Mfa) { if($g_bMouseSpeech && !Jca) { bDb(event); } else if(uda) { mab(event); } else if(((Zca & calculator_icon) == calculator_icon) && Ccb()) { if(Zya(event)) { bDb(event, true); } } } } }}var Hya = -1;var Iya = -1;function Vya(event){ if(!Hca) { return; } if (event == null) { return true; } if(Cfa) { var Kya = event.clientX; var Lya = event.clientY; if(Hya == Kya && Iya == Lya) { return; } Hya = Kya; Iya = Lya; } if(jea == null) { if($g_bMouseSpeech && (Nfa || Cfa) && !Jca) { bDb(event); } else if(uda) { mab(event); } else if(((Zca & calculator_icon) == calculator_icon) && Ccb() && (Nfa || Cfa)) { if(Zya(event)) { bDb(event, true); } } kea = false; return true; } var jUb = dxa(event); if (jUb.x < 0 || jUb.y < 0 || jUb.x > rw_getDocumentDisplayWidth() || jUb.y > rw_getDocumentDisplayHeight()) { eya(event); return false; } var Nya; var Oya; var Pya = false; var Qya = 1.0; if(Cfa && !Afa && Hfa) { var a1 = document.body.offsetWidth; var a2 = document.documentElement.offsetWidth; Qya = (a1 / a2); if(Qya > 1.05 || Qya < 99.5) { Pya = true; } } if(Pya) { var Tya = (Qya * hea.x) - (iea.x); var Uya = (Qya * hea.y) - (iea.y); Nya = (((Qya * jUb.x) - Tya)) / Qya; Oya = (((Qya * jUb.y) - Uya)) / Qya; } else { var Tya = hea.x - (iea.x); var Uya = hea.y - (iea.y); Nya = (jUb.x - Tya); Oya = (jUb.y - Uya); } if(jea == null) { return; } if(jea.id =='rwDragMe') { TCb(Nya, Oya); if ((Nya + sea + lea) > rw_getDocumentDisplayWidthAdjusted()) { Nya = rw_getDocumentDisplayWidthAdjusted() - sea - lea; pea = 1.0; } if (Nya < lea) { Nya = lea; pea = 0.0; } if ((Oya + tea + lea) > rw_getDocumentDisplayHeightAdjusted()) { Oya = rw_getDisplayHeightAdjusted() - tea - lea; qea = 1.0; } if (Oya < lea) { Oya = lea; qea = 0.0; } JCb(); eya(event); } else if(jea.id =='rwDragMeTrans'|| jea.id =='rwDragMeFF'|| jea.id =='rwDragMeDict'|| jea.id =='rwDragMeDisplay'|| jea.id =='rwDragMeCollect'|| jea.id =='rwDragMeStickyNoteTop'|| jea.id =='rwDragMeStickyNoteBot'|| jea.id =='rwDragMePronCreate'|| jea.id =='rwDragMePronEdit'|| jea.id =='rwDragMeCal'|| jea.id =='rwDragMeGencache'|| jea.id =='rwDragMeCheckcache'|| jea.id =='rwDragMePictureDictionary') { var Wya; if(jea.id =='rwDragMeDisplay') { Wya = Mba; } else if(jea.id =='rwDragMeTrans') { Wya = Nba; } else if(jea.id =='rwDragMeFF') { Wya = Oba; } else if(jea.id =='rwDragMeDict') { Wya = Pba; } else if(jea.id =='rwDragMeStickyNoteTop') { Wya = Rba; } else if(jea.id =='rwDragMeStickyNoteBot') { Wya = Rba; } else if(jea.id =='rwDragMePronCreate') { Wya = Sba; } else if(jea.id =='rwDragMePronEdit') { Wya = Tba; } else if(jea.id =='rwDragMeCal') { Wya = Uba; } else if(jea.id =='rwDragMeGencache') { Wya = Vba; } else if(jea.id =='rwDragMeCache') { Wya = Wba; } else if(jea.id =='rwDragMePictureDictionary') { Wya = Xba; } else { Wya = Qba; } VCb(Wya, Nya, Oya); if ((Nya + wea[Wya] + lea) > rw_getDocumentDisplayWidthAdjusted()) { Nya = rw_getDocumentDisplayWidthAdjusted() - wea[Wya] - lea; uea[Wya] = 1.0; } if (Nya < lea) { Nya = lea; uea[Wya] = 0.0; } if ((Oya + xea[Wya] + lea) > rw_getDocumentDisplayHeightAdjusted()) { Oya = rw_getDocumentDisplayHeightAdjusted() - xea[Wya] - lea; vea[Wya] = 1.0; } if (Oya < lea) { Oya = lea; vea[Wya] = 0.0; } PCb(Wya); eya(event); } return false;}function Zya(event){ var target; if(Nfa) { target = event.explicitOriginalTarget; } else if(Cfa) { target = event.srcElement; } else { target = event.target; } if(target != null && target.nodeType == 1) { var Xya = target.ownerDocument.body; if(target != Xya) { var nab = target.parentNode; if(typeof(nab.tagName)=="string") { while(nab != null && nab != Xya) { var sNb = nab.tagName.toLowerCase(); if(sNb =="form") { if(nab.id =="rw_calForm") { return true; } } nab = nab.parentNode; } } } } return false;}function bya(event){ if(!Hca) { return; } if (!kea) { return true; } if (jea.releaseCapture) {jea.releaseCapture(); } jea = null; kea = false; eya(event); return false;}function dya(event){ if(!Hca) { return; } if (kea) { if (Nfa) { var jUb = dxa(event); if (jUb.x < 5 || jUb.y < 5 || jUb.x > (rw_getDocumentDisplayWidth() - 5) || jUb.y > (rw_getDocumentDisplayHeight() - 5)) { bya(event); eya(event); return; } } Vya(event); eya(event); } else { if(!Jca) { NDb = null; } }}function eya(event){ if (event == null) { return; } if (event.cancelBubble) { event.cancelBubble = true; } else if (event.stopPropagation) { event.stopPropagation(); } if (event.returnValue) { event.returnValue = false; } else if (event.preventDefault) { event.preventDefault(true); }}function fya(kPb, pya, qya){ if(nea > 0) { --nea; return; } if (kea) { return; } if($rw_blockClick(kPb)) { return; } fta(g_icons[pya][SpeechStream.lsa.ICON_NAME],"hover", g_icons[pya][SpeechStream.lsa.ICON_OFFSET], qya);}function jya(kPb, pya, qya){ if(nea > 0) { --nea; return; } if(kea) { return; } if($rw_blockClick(kPb)) { return; } fta( g_icons[pya][SpeechStream.lsa.ICON_NAME],"flat", g_icons[pya][SpeechStream.lsa.ICON_OFFSET], qya);}function nya(kPb, pya, qya){ if(nea > 0) { --nea; return; } if (kea) { return; } if($rw_blockClick(kPb)) { return; } fta( g_icons[pya][SpeechStream.lsa.ICON_NAME],"toggle", g_icons[pya][SpeechStream.lsa.ICON_OFFSET], qya);}function $rw_blockClick(kPb){ if (ixa && kxa.indexOf(kPb) > -1) { return true; } if(mxa.indexOf(kPb) > -1) { return true; } return false;}var rya ="rw_speechenablingdata";function tya(){ if(Mda) { if(!gfa || !ffa) { setTimeout(tya, 50); return; } } if(rea && !(gda && (Dfa || Efa)) ) { var sya = Tpa("rwebooks-x"); var uya = Tpa("rwebooks-y"); if ((sya != null) && (uya != null)) { pea = parseFloat(sya); qea = parseFloat(uya); } } var vya = false; var Nnb = uea.length; var xya; var yya; if(rea && !(gda && (Dfa || Efa)) ) { for(var i=0; i<Nnb; i++) { xya = Tpa("rwebooks-div"+ i +"x"); if(xya != null) { uea[i] = parseFloat(xya); } yya = Tpa("rwebooks-div"+ i +"y"); if(yya != null) { vea[i] = parseFloat(yya); } if(i == Rba) { if(xya == null && yya == null) { vya = true; } } } } else { vya= true; } if(vya) { uea[Rba] = 0.45; if(Pfa) { vea[Rba] = 0.0; } else { vea[Rba] = 0.35; } } JCb(); LCb(); $rw_pageSetup(); if(Mda) { if(Oda !="*"&& typeof(Rhb) !="undefined") { Rhb(); } else { if(Nda !="*"&& typeof(xkb) !="undefined") { xkb(); } } } if(Cfa) { var zya = document.createTextNode(" "); document.body.appendChild(zya); } if(zca && Dda) { $rw_cachePage(null, null); } if(uda) { if(bda) { aab(); } if(wda) { uda = false; } } if(Sea) { setTimeout ($rw_event_generate_cache, 1000); } if(Tea) { setTimeout ($rw_event_check_cache, 1000); } Hca = true; if(typeof($rw_toolbarLoadedCallback) =="function") { $rw_toolbarLoadedCallback(); }}function Aza(){ if(typeof(Qkb) !='undefined'&& Mda && typeof(uib) !='undefined'&& uib > -1) { ljb(uib); } if(rea && !(gda && (Dfa || Efa)) ) { Zpa("rwebooks-x", pea, 20,"/", window.location.host); Zpa("rwebooks-y", qea, 20,"/", window.location.host); var Nnb = uea.length; for(var i=0; i<Nnb; i++) { Zpa("rwebooks-div"+ i +"x", uea[i], 20,"/", window.location.host); Zpa("rwebooks-div"+ i +"y", vea[i], 20,"/", window.location.host); } }}function $rw_setSpeechRangeColours(p_strCols){ Oca = p_strCols;}function $rw_setSpeechWordColours(p_strCols){ Pca = p_strCols;}function $rw_getSpeechRangeColours(){ return Oca;}function $rw_getSpeechWordColours(){ return Pca;}var Cza = false;function rw_setHighlight(vEb, xza, cSb, yza, Ifb){ var Dza = vEb; var Eza = cSb; try { var result = null; if (cSb == vEb) { result = rw_setNodeBackground(vEb, xza, yza,"ss", Ifb); Dza = result.node; Eza = result.node; } else { if (xza > 0) { result = rw_setNodeBackground(vEb, xza, vEb.nodeValue.length,"ss", Ifb); } else { result = rw_setNodeBackground(vEb, -1, -1,"ss", Ifb); } Dza = result.node; var Rgb = nKb(result.node, false, cSb, true); while (Rgb != null) { if (Rgb == cSb) { result = rw_setNodeBackground(Rgb, 0, yza,"ss", Ifb); Rgb = result.node; Eza = Rgb; break; } else { result = rw_setNodeBackground(Rgb, -1, -1,"ss", Ifb); Rgb = result.node; } Eza = Rgb; Rgb = nKb(Rgb, false, cSb, true); } } } catch(err){Qra("rw_setHighlight error:"+ err.message); } return {start: Dza, end: Eza};}function Vza(fza){ try { if (fza == null || !(fza instanceof Array) || fza.length == 0) { return; } for (var i = 0; i < fza.length; i++) { var Vhb = fza[i]; if (Yza(Vhb)) { var nAb = Vhb.parentNode; if(Vhb.nextSibling != null || Vhb.previousSibling != null) { var Kjb = ypa(nAb); var Iab = nAb.ownerDocument; Vhb = Iab.createTextNode(Kjb); } var lza = nAb.parentNode; lza.replaceChild(Vhb, nAb); Vhb = aqa(Vhb); fza[i] = Vhb; } else { var Uza = bza(Vhb); if(Uza != null) { Uza.removeAttribute("rwstate"); Uza.removeAttribute("style"); } } } if(!hxa ) { rw_removeSpeechHighlight(fza, false); } } catch(err){Qra("Error in rw_setHighlight: "+ err.message);}}function Yza(Wjb){ if (Wjb.nodeType != 3 || Wjb.parentNode == null || Wjb.parentNode.parentNode == null) { return false; } var parent = Wjb.parentNode; var pSb = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() !="font"|| pSb == null || pSb !="ss") { return false; } return true;}function bza(Wjb){ if (Wjb.nodeType != 3 || Wjb.parentNode == null || Wjb.parentNode.parentNode == null) { return null; } var parent = Wjb.parentNode; var pSb = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() !="font"|| pSb == null || pSb !="ss") { if(parent.getAttribute("rwthgen") != null) { var Bmb = parent; pSb ="1"; while(pSb != null) { Bmb = Bmb.parentNode; if(Bmb.getAttribute("rwState") =="ss"&& Bmb.tagName.toLowerCase() =="font") { return Bmb; } pSb = Bmb.getAttribute("rwthgen"); } } return null; } return parent;}function rw_removeSpeechHighlight(fza, pza){ try { if(typeof(pza) =="undefined") { pza=false; } if (fza == null || !(fza instanceof Array) || fza.length == 0) { return; } for (var i = 0; i < fza.length; i++) { var Vhb = fza[i]; if (nza(Vhb, pza)) { var nAb = Vhb.parentNode; if(Vhb.nextSibling != null || Vhb.previousSibling != null) { var Kjb = ypa(nAb); var Iab = nAb.ownerDocument; Vhb = Iab.createTextNode(Kjb); } var lza = nAb.parentNode; lza.replaceChild(Vhb, nAb); Vhb = aqa(Vhb); fza[i] = Vhb; if(nza(Vhb, pza)) { --i; } } else { var tagName =""; if(Vhb.nodeType == 1) { tagName = Vhb.tagName.toLowerCase(); } if(tagName=="math") { oAb(Vhb, null, null, false); } } } } catch(err) { Qra("rw_removeSpeechHighlight failed error:"+ err.message); }}function nza(Wjb, pza){ if (Wjb.nodeType != 3 || Wjb.parentNode == null || Wjb.parentNode.parentNode == null) { return false; } var parent = Wjb.parentNode; var pSb = parent.getAttribute("rwstate"); if (parent.tagName.toLowerCase() =="font"&& pSb != null) { if((!pza && pSb =="sp") || pSb =="csp") { return true; } } return false;}function rw_setSpeechRangeImpl(vEb, xza, cSb, yza, zza){ var result = null; try { if (cSb == vEb) { result = rw_setNodeBackground(vEb, xza, yza, zza,""); return result; } if (xza > 0) { result = rw_setNodeBackground(vEb, xza, vEb.nodeValue.length, zza,""); } else { result = rw_setNodeBackground(vEb, -1, -1, zza,""); } var Rgb = nKb(result.node, false, cSb, true); while (Rgb != null) { if (Rgb == cSb) { result = rw_setNodeBackground(Rgb, 0, yza, zza,""); Rgb = result.node; break; } else { result = rw_setNodeBackground(Rgb, -1, -1, zza,""); Rgb = result.node; } Rgb = nKb(Rgb, false, cSb, true); } } catch(err) { Qra("rw_setSpeechRangeImpl error:"+ err.message); } return result;}function BAb(){ this.node = null; this.offset = 0;}function rw_setNodeBackground(TAb, smb, tmb, WAb, XAb){ var ZRb = new BAb(); ZRb.node = TAb; ZRb.offset = smb; if (TAb.nodeType != 3) { if(TAb.nodeType == 1 && jFb(TAb)) { if(TAb.tagName.toLowerCase() =="math") { var nAb = TAb.parentNode; ZRb = RAb(nAb, TAb, smb, tmb, WAb,""); } else { var KAb = BJb(TAb, false); var LAb = FJb(TAb, false); if(KAb != null && KAb.nodeType == 3 && LAb != null && LAb.nodeType == 3) { rw_setSpeechRangeImpl(KAb, 0, LAb, LAb.nodeValue.length, WAb); ZRb.node = KAb; ZRb.offset = 0; } else { } } return ZRb; } else { return ZRb; } } if(TAb.nodeType == 3) { var Kjb = TAb.nodeValue; Kjb = Kjb.trimTH(); if(Kjb.length == 0) { var fkb = TAb.parentNode; if(fkb != null) { var egb = fkb.tagName.trimTH().toLowerCase(); if(egb =="tr"|| egb =="table") { return ZRb; } } } } var nAb = TAb.parentNode; var QAb = null; if (nAb.tagName.toLowerCase() =="font") { QAb = nAb.getAttribute("rwstate"); } if (WAb =="ss") { if(QAb == null || QAb =="") { ZRb = RAb(nAb, TAb, smb, tmb, WAb, XAb); } else if (QAb =="ss") { return ZRb; } else { return ZRb; } } else if (WAb =="sp") { if (QAb =="csp") { Qra("fail in rw_setNodeBackground setting sp to csp"); return ZRb; } if (QAb =="sp") { Qra("fail in rw_setNodeBackground setting sp to sp"); return ZRb; } ZRb = RAb(nAb, TAb, smb, tmb, WAb,""); } else if (WAb =="csp") { if (QAb =="csp") { Qra("fail parent is csp for csp"); return ZRb; } if (QAb =="sp") { ZRb = RAb(nAb, TAb, smb, tmb, WAb,""); } else { } } else { } return ZRb;}function RAb(SAb, TAb, smb, tmb, WAb, XAb){var tagName =""; if(TAb.nodeType == 1) { tagName = TAb.tagName.toLowerCase(); } if((TAb.nodeType == 3 && (tmb == -1 || tmb > smb)) || tagName =="math") { var YAb; if (WAb =="ss") { if(XAb =="strikethrough") { YAb ="text-decoration:line-through"; } else { YAb ="background:"+ XAb; } } else if (WAb =="sp") { YAb = Oca; } else if (WAb =="csp") { YAb = Pca; } else { YAb ="color:#ff000; background:#00ff00"; } if(tagName =="math") { if(WAb !="ss") { oAb(TAb, WAb, YAb, true); } } else { var Nnb = TAb.nodeValue.length; if( (Nnb == 1 && (TAb.nodeValue =="\n"|| TAb.nodeValue =="\r") ) || (Nnb == 2 && TAb.nodeValue =="\r\n") ) { var ZRb = new BAb(); ZRb.node = TAb; if (smb < 0) { ZRb.offset = 0; } else { ZRb.offset = smb; } return ZRb; } var Iab = SAb.ownerDocument; var Hmb = false; if (smb == -1 && tmb == -1) { Hmb = true; } else if (tmb == -1) { tmb = Nnb; } if (smb == 0 && tmb >= Nnb) { Hmb = true; } if (Hmb) { var vAb = Iab.createElement("font"); if(Jfa) { vAb.style.setAttribute("cssText", YAb, 0); } else { vAb.setAttribute("style", YAb); } vAb.setAttribute("rwstate", WAb); if(WAb !="ss") { vAb.setAttribute("started","1"); } SAb.replaceChild(vAb, TAb); vAb.appendChild(TAb); } else { var Kjb = TAb.nodeValue; var fAb; var gAb; var hAb; if (SAb.tagName.toLowerCase() =="span"&& SAb.getAttribute("pron") != null) { fAb =""; gAb = Kjb; hAb =""; } else { fAb = Kjb.substring(0, smb); gAb = Kjb.substring(smb, tmb); hAb = Kjb.substring(tmb); } var vAb = Iab.createElement("font"); if(Jfa) { vAb.style.setAttribute("cssText", YAb, 0); } else { vAb.setAttribute("style", YAb); } vAb.setAttribute("rwstate", WAb); if(WAb !="ss") { vAb.setAttribute("started","1"); } var jAb = null; var Xlb = null; var lAb = null; if (fAb.length > 0) { jAb = Iab.createTextNode(fAb); } Xlb = Iab.createTextNode(gAb); if (hAb.length > 0) { lAb = Iab.createTextNode(hAb); } vAb.appendChild(Xlb); SAb.replaceChild(vAb, TAb); if (jAb != null) { SAb.insertBefore(jAb, vAb); } if (lAb != null) { if (vAb.nextSibling == null) { SAb.insertBefore(lAb, null); } else { SAb.insertBefore(lAb, vAb.nextSibling); } } TAb = Xlb; } } } var ZRb = new BAb(); ZRb.node = TAb; if (smb < 0) { ZRb.offset = 0; } else { ZRb.offset = smb; } return ZRb;}function oAb(pAb, qAb, rAb, sAb){ if(pAb == null) { return; } if(Cfa) { var nAb = pAb.parentNode; if(nAb == null) { return; } if(nAb.tagName.toLowerCase() =="font"&& nAb.getAttribute("started") != null) { if(sAb) { nAb.style.setAttribute("cssText", rAb, 0); nAb.setAttribute("rwstate", qAb); } else { var tAb = nAb.parentNode; if(tAb == null) { return; } tAb.replaceChild(pAb, nAb); } } else { if(sAb) { var uAb = document.createElement("font"); uAb.style.setAttribute("cssText", rAb, 0); uAb.setAttribute("started","1"); uAb.setAttribute("rwstate", qAb); nAb.replaceChild(uAb, pAb); uAb.appendChild(pAb); } } } else { var vAb = pAb.firstChild; while(vAb != null) { if(vAb.nodeType == 1) { if(sAb) { if(vAb.getAttribute("started") != null) { vAb.setAttribute("style", rAb); vAb.setAttribute("rwstate", qAb); } else { if(vAb.getAttribute("style") == null) { vAb.setAttribute("style", rAb); vAb.setAttribute("rwstate", qAb); vAb.setAttribute("started","1"); } } } else { if(vAb.getAttribute("started") != null) { vAb.removeAttribute("style"); vAb.removeAttribute("started"); vAb.removeAttribute("rwstate"); } } } vAb = vAb.nextSibling; } }}function yAb(zAb, ABb){ if (zAb == ABb) { return 0; } var wAb = Fra(zAb.ownerDocument.body); wAb.setStart(zAb, 0); wAb.setEnd(zAb, 0); var xAb = Fra(zAb.ownerDocument.body); xAb.setStart(ABb, 0); xAb.setEnd(ABb, 0); return (wAb.compareBoundaryPoints("START_TO_START", xAb));}function BBb(){ this.Kjb =""; this.gEb =""; this.voice = null; this.Ghb = null; }function CBb(Wjb){ return cBb(JBb(Wjb));}function FBb(Wjb){ if(Wjb != null && Wjb.nodeType == 1) { var Rgb = Wjb.getAttribute("lang"); if(Rgb == null) { try { Rgb = Wjb.getAttribute("xml:lang"); if(Rgb != null) { return cBb(Rgb); } } catch(e){} } else { return cBb(Rgb); } } return null;}function JBb(Wjb){ var oNb = Wjb; while(oNb != null) { if(oNb.nodeType == 1) { var IBb = oNb.getAttribute("lang"); if(IBb != null && IBb.length > 0) { return IBb; } try { IBb = oNb.getAttribute("xml:lang"); if(IBb != null && IBb.length > 0) { return IBb; } } catch(e){} } oNb = oNb.parentNode; } return null;}function OBb(ySb, mNb, UBb){ var oNb = ySb; oNb = hIb(oNb, false, mNb); while(oNb != null) { var RBb = CBb(oNb); if(RBb != UBb) { var XGb = wJb(oNb, false, ySb); if(XGb == null) { XGb = wJb(oNb, false, ySb); if(XGb == null) { return null; } } if(XGb.nodeType == 3) { return new THCaret(XGb, XGb.nodeValue.length, false); } else { return new THCaret(XGb, uja, true); } } oNb = UIb(oNb, false, mNb); } return null;}function TBb(ySb, mNb, UBb){ var oNb = mNb; oNb = NIb(oNb, false, ySb); while(oNb != null) { var RBb = CBb(oNb); if(RBb != UBb) { var XGb = gKb(oNb, false, mNb); if(XGb != null) { if(XGb.nodeType == 3) { return new THCaret(XGb, 0, false); } else { return new THCaret(XGb, uja, true); } } else { return null; } } oNb = NIb(oNb, false, ySb); } return null;}function YBb(ySb, mNb, ZBb){ var oNb = ySb; oNb = hIb(oNb, false, mNb); while(oNb != null) { var WBb = Qka(oNb); if(WBb != ZBb) { var XGb = FKb(oNb, false, ySb); if(XGb == null) { XGb = wJb(oNb, false, ySb); if(XGb == null) { return null; } } if(XGb.nodeType == 3) { return new THCaret(XGb, XGb.nodeValue.length, false); } else { return new THCaret(XGb, 0, true); } } oNb = UIb(oNb, false, mNb); } return null;}function cBb(dBb){ if(dBb != null) { var mdb = dBb.toLowerCase(); var bBb; if(mdb =="en"|| mdb=="en-gb") { bBb = ENGLISH; } else if(mdb =="en-us") { bBb = ENGLISH_US; } else if(mdb =="es-us") { bBb = SPANISH; } else if(mdb =="es"|| mdb=="es-es") { bBb = ESPANOL; } else if(mdb =="fr"|| mdb =="fr-fr") { bBb = FRENCH; } else if(mdb =="fr-ca") { bBb = FRENCH_CN; } else if(mdb =="de") { bBb = GERMAN; } else if(mdb =="it") { bBb = ITALIAN; } else if(mdb =="nl") { bBb = DUTCH; } else if(mdb =="sv") { bBb = SWEDISH; } else if(mdb =="en-au") { bBb = AUSTRALIAN; } else if(mdb =="pt-br") { bBb = PORTUGUESE; } else if(mdb =="pt"|| mdb =="pt-pt") { bBb = PORTUGUES; } else { return null; } return faa[bBb]; } else { return null; }}var eBb="ReadHeader1 ReadSection";function ReadHeader1(){ var fBb = (new Date).getTime(); if((fBb - wfa) < Uga ) { return; } Mca = fBb; var ulb = document.getElementsByTagName("H1")[0]; var Xlb = hIb(ulb, true, ulb); if(Xlb == null) { return; } if(Xlb.nodeType != 3) { Xlb = XKb(Xlb, true, ulb); } if(Xlb == null) { return; } var dEb = new THCaret(Xlb, 0, true); var target = xDb(dEb); if(target != null) { var wab = target.getCaretRange(); if(csa(wab)) { var start = wab.Pgb.node; if(target.isRange()) { var end = wab.Qgb.node; start = LMb(start); end = QMb(end); var Ggb = qSb(start, 0); var Hgb; if(end.nodeType == 1) { Hgb = qSb(end, 0); } else { Hgb = qSb(end, end.nodeValue.length); } target.range = new THRange(document.body, Ggb, Hgb); } var pBb = rda; $rw_stopSpeech(); rda = false; rw_speakHoverTarget(target); rda = pBb; } }}function $rw_getHashCodes() { var qBb =""; var rBb = CLb(document.body); while(rBb != null) { var UHb = RFb(rBb , new Array()); qBb = qBb + nHb() +"/"; var gHb; if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY || SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { gHb = jQb(UHb.Kjb); } else { gHb= jQb(UHb.gEb); } qBb = qBb + gHb +"~"; rBb = hLb(rBb); } return qBb;}function $rw_getSoundFileLength(uOb){ var flash = ZZb.getConnector(); if(flash == null) { alert("Connection not available to the server."); } else { flash.getSoundFileLength(uOb); }}function $rw_soundFileLengthCallback(p_strLength){ alert(p_strLength);}SpeechStream.storedVoice = null;SpeechStream.storedSpeed = null;SpeechStream.storedCustId = null;SpeechStream.storedBookId = null;SpeechStream.storedPageId = null;function xBb(yBb, DCb, ECb, FCb, GCb){ if(SpeechStream.storedVoice == null) { SpeechStream.storedVoice = kca; SpeechStream.storedSpeed = uca; SpeechStream.storedCustId = lca; SpeechStream.storedBookId = mca; SpeechStream.storedPageId = nca; } if(yBb != undefined) { kca = yBb; } if(DCb != undefined) { $rw_setSpeedValue(DCb); } if(ECb != undefined) { lca = ECb; } if(FCb != undefined) { mca = FCb; } if(GCb != undefined) { nca = GCb; } var flash = ZZb.getConnector(); flash.setAltSettings(yBb, DCb, ECb, FCb, GCb);}function HCb(){ if(SpeechStream.storedVoice != null) { kca = SpeechStream.storedVoice; g_speedValue = SpeechStream.storedSpeed; lca = SpeechStream.storedCustId; mca = SpeechStream.storedBookId; nca = SpeechStream.storedPageId; SpeechStream.storedVoice = null; SpeechStream.storedSpeed = null; SpeechStream.storedCustId = null; SpeechStream.storedBookId = null; SpeechStream.storedPageId = null; } var flash = ZZb.getConnector(); flash.restoreSettings();}/*Code designed and developed by Stuart McWilliams.*/function JCb(){ var mCb; mCb = document.getElementById('rwDrag').style; if (mCb == null) { return; } if(!Sca) { var x; var y; if(typeof(eba_override_x) !='undefined'&& typeof(eba_override_y) !='undefined') { x = eba_override_x; y = eba_override_y; } else { var wd = rw_getDisplayWidth(); var ht = rw_getDisplayHeight(); if(Nca) { pea = 1; qea = 0; lea = 0; } x = wd * pea; y = ht * qea; if ((x + sea + lea) > rw_getDisplayWidthAdjusted()) { x = rw_getDisplayWidthAdjusted() - sea - lea; } if (x < lea) { x = lea; } if ((y + tea + lea) > rw_getDisplayHeightAdjusted()) { y = rw_getDisplayHeightAdjusted() - tea - lea; } if (y < lea) { y = lea; } x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; if(Nca) { y = 0; } } mCb.left = x +'px'; mCb.top = y +'px'; } if(xca) { return; } mCb.visibility ='visible'; mCb.display ="inline"; var Vhb = document.getElementById("rwMainOutline"); if(Vhb != null) { Vhb.style.visibility ='visible'; Vhb.style.display ="block"; } Vhb = document.getElementById("rwMainNoOutline"); if(Vhb != null) { Vhb.style.visibility ='visible'; Vhb.style.display ="block"; }}function LCb(){ PCb(0); PCb(1); PCb(2); PCb(3); PCb(4); PCb(5); PCb(6); PCb(7); PCb(8); PCb(9); PCb(10); PCb(11);}function PCb(hCb){ var MCb; var mCb; var Xjb; switch(hCb) { case 0: Xjb ="rwDisplay"; break; case 1: Xjb ="rwTrans"; break; case 2: Xjb ="rwFF"; break; case 3: Xjb ="rwDict"; break; case 4: Xjb ="rwCollect"; break; case 5: Xjb ="rwSticky"; break; case 6: Xjb ="rwPronCreate"; break; case 7: Xjb ="rwPronEdit"; break; case 8: Xjb ="rwCal"; break; case 9: Xjb ="rwGenerateCache"; break; case 10: Xjb ="rwCheckCache"; break; case 11: Xjb ="rwPictureDictionary"; break; default: Xjb ="rwDisplay"; } MCb = document.getElementById(Xjb); if(typeof(MCb) =='undefined'|| MCb == null) { return; } mCb = MCb.style; if (mCb == null) { return; } if(yea[hCb]) { mCb.display ="block"; if(mCb.visibility =='visible') { var lCb = zxa(Xjb); if(lCb != null) { var SCb = parseInt(lCb.offsetHeight, 10); if(!isNaN(SCb)) { xea[hCb] = SCb - 4; } } } var width = rw_getDocumentDisplayWidth(); var height = rw_getDocumentDisplayHeight(); var x = width * uea[hCb]; var y = height * vea[hCb]; if ((x + wea[hCb] + lea) > rw_getDocumentDisplayWidthAdjusted()) { x = rw_getDocumentDisplayWidthAdjusted() - wea[hCb] - lea; } if (x < lea) { x = lea; } if ((y + xea[hCb] + lea) > rw_getDocumentDisplayHeightAdjusted()) { y = rw_getDocumentDisplayHeightAdjusted() - xea[hCb] - lea; } if (y < lea) { y = lea; } x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; mCb.left = x +'px'; mCb.top = y +'px'; mCb.visibility ='visible'; } else { if(Nfa) { mCb.display ="none"; } mCb.visibility ='hidden'; }}function TCb(x, y){ pea = x / rw_getDocumentDisplayWidth(); qea = y / rw_getDocumentDisplayHeight();}function VCb(hCb, x, y){ uea[hCb] = x / rw_getDocumentDisplayWidth(); vea[hCb] = y / rw_getDocumentDisplayHeight();}function $rw_divOver(hCb){ var Xjb; switch(hCb) { case Mba: Xjb ="displayImg"; break; case Nba: Xjb ="transImg"; break; case Oba: Xjb ="FFImg"; break; case Pba: Xjb ="dictImg"; break; case Qba: Xjb ="collectImg"; break; case Sba: Xjb ="pronCreateImg"; break; case Tba: Xjb ="pronEditImg"; break; case Uba: Xjb ="calImg"; break; case Vba: Xjb ="generateCacheImg"; break; case Wba: Xjb ="checkCacheImg"; break; case Xba: Xjb ="pictureDictionaryImg"; break; default: Xjb ="displayImg"; } if (document.images[Xjb] != null) { document.images[Xjb].src = $g_strFileLoc +"rwimgs/thepressedx.bmp"; }}function $rw_divOut(hCb){ var Xjb; switch(hCb) { case Mba: Xjb ="displayImg"; break; case Nba: Xjb ="transImg"; break; case Oba: Xjb ="FFImg"; break; case Pba: Xjb ="dictImg"; break; case Qba: Xjb ="collectImg"; break; case Sba: Xjb ="pronCreateImg"; break; case Tba: Xjb ="pronEditImg"; break; case Uba: Xjb ="calImg"; break; case Vba: Xjb ="generateCacheImg"; break; case Wba: Xjb ="checkCacheImg"; break; case Xba: Xjb ="pictureDictionaryImg"; break; default: Xjb ="displayImg"; } if (document.images[Xjb] != null) { document.images[Xjb].src = $g_strFileLoc +"rwimgs/thex.bmp"; }}function $rw_divPress(hCb){ $rw_event_stop(); fCb(false, hCb);}function aCb(hCb, Qnb){ var mCb; var Xjb; switch(hCb) { case Mba: Xjb ="rwpopupdisplay"; break; case Nba: Xjb ="rwpopuptrans"; break; case Oba: Xjb ="rwpopupff"; break; case Pba: Xjb ="rwpopupdict"; break; case Qba: Xjb ="rwpopupcollect"; break; case Sba: Xjb ="rwpopupproncreate"; break; case Tba: Xjb ="rwpopuppronedit"; break; case Uba: Xjb ="rwpopupcal"; break; case Vba: Xjb ="rwpopupgeneratecache"; break; case Wba: Xjb ="rwpopupcheckcache"; break; case Xba: Xjb ="rwpopuppicturedictionary"; break; default: Xjb ="rwpopupdisplay"; } mCb = document.getElementById(Xjb); if (mCb == null) { return; } mCb.innerHTML = Qnb;}function fCb(gCb, hCb){ var mCb; yea[hCb] = gCb; var Xjb; switch(hCb) { case Mba: Xjb ="rwDisplay"; break; case Nba: Xjb ="rwTrans"; break; case Oba: Xjb ="rwFF"; break; case Pba: Xjb ="rwDict"; break; case Qba: Xjb ="rwCollect"; break; case Rba: Xjb ="rwSticky"; break; case Sba: Xjb ="rwPronCreate"; break; case Tba: Xjb ="rwPronEdit"; break; case Uba: Xjb ="rwCal"; break; case Vba: Xjb ="rwGenerateCache"; break; case Wba: Xjb ="rwCache"; break; case Xba: Xjb ="rwPictureDictionary"; break; default: Xjb ="rwDisplay"; } var lCb = zxa(Xjb); if(lCb != null) { mCb = lCb.style; if (mCb == null) { return; } if(gCb) { kCb(); mCb.visibility ='visible'; mCb.display ='block'; mCb.zIndex = 501; } else { mCb.visibility ='hidden'; if(Nfa) { mCb.display ="none"; } aCb(hCb,""); } } LCb();}function kCb(){ var Xjb; Xjb ="rwDisplay"; var lCb = zxa(Xjb); var mCb; if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwTrans"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwFF"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwDict"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwCollect"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwSticky"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwCal"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwGenerateCache"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwCheckCache"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; } Xjb ="rwPictureDictionary"; lCb = zxa(Xjb); if(lCb != null && lCb.style) { mCb = lCb.style; mCb.zIndex = 500; }}function $setToolbarX(p_fBarX){ if(p_fBarX<0) { pea = 0; } else if(p_fBarX > 1) { pea = 1; } else { pea = p_fBarX; } JCb();}function $setToolbarY(p_fBarY){ if(p_fBarY<0) { qea = 0; } else if(p_fBarY > 1) { qea = 1; } else { qea = p_fBarY; } JCb();}function $getToolbarX(){ return pea;}function $getToolbarY(){ return qea;}var nCb = new Array();function $rw_clearInstructionQueue(){ nCb.length = 0;}function oCb(){ if(nCb != null) { var i; for(i=0; i<nCb.length; i++) { if(typeof(nCb[i])=="string") { if(nCb[i].indexOf("$rw_readNextTarget") > -1) { nCb.length = i; break; } } } }}function tCb(pEb){ var Mcb = pEb.range; var Ghb; var ajb; if(Mcb != null) { ajb = Mcb.body; Ghb = JPb(ajb, Mcb.Ggb.path, Mcb.Ggb.offset, Mcb.Hgb.path, Mcb.Hgb.offset); } else if(pEb.body != null && pEb.path != null) { ajb = pEb.body; var sCb = new THCaret(XOb(ajb, pEb.path), 0, true); Ghb = new Bka(sCb, sCb); } else { nCb.push("rw_pageCompleteCallBack()"); return; } var yCb = null; if(pEb.jumpId != null) { var xCb = Ghb.Qgb.node.ownerDocument.getElementById(pEb.jumpId); if(xCb!=null) { yCb = ULb(new THCaret(xCb, 0, true)); } } if(yCb == null) { var yCb = hLb(Ghb); if(yCb == null) { var Zlb = function() { Rca = true; rw_pageCompleteCallBack(); }; nCb.push(Zlb); return; } while(!csa(yCb)) { yCb = hLb(yCb); if(yCb == null) { var Zlb = function() { Rca = true; rw_pageCompleteCallBack(); }; nCb.push(Zlb); return; } } var test = new THHoverTarget(null,null, yHb(yCb)); test.prepareTextForSpeech(); var CDb = test.getCaretRange(); if(!CDb.equals(yCb)) { yCb = CDb; } if(uEb(Ghb.Pgb.node, yCb.Qgb.node)) { var Zlb = function() { Rca = true; rw_pageCompleteCallBack(); }; nCb.push(Zlb); return; } } Rca = false; if(uda) { var Vhb = LMb(yCb.Pgb.node); yCb.Pgb.node = Vhb; yCb.Qgb.node = QMb(yCb.Qgb.node); yCb.Pgb.offset = 0; if(yCb.Qgb.node.nodeType == 1) { yCb.Qgb.offset = 0; } else { yCb.Qgb.offset = yCb.Qgb.node.length; } } var FDb = new THRange(ajb, qSb(yCb.Pgb.node, yCb.Pgb.offset), qSb(yCb.Qgb.node, yCb.Qgb.offset)); sda= new THHoverTarget(null, null, FDb); var Kjb = sda.getTextPreparedForSpeech(); if(Kjb == null || Kjb.length == 0) { var Zlb = function() { Rca = true; rw_pageCompleteCallBack(); }; nCb.push(Zlb); return; } nCb.push("setTimeout($rw_readNextTarget, 50);");}function JDb(KDb){ while(KDb.length > 0) { var IDb = KDb.shift(); try { if(typeof(IDb) =="function") { IDb(); } else if(typeof(IDb) =="string") { eval(IDb); } } catch(err) { thLogE(err.message); } }}var LDb ='<bookmark mark="';var MDb ='"/>';var NDb = null; var ODb = null; var PDb = 0;var QDb = 0;var RDb = false;var SDb = false;var TDb = false;if(Mfa){ var UDb = navigator.appVersion; var VDb = UDb.lastIndexOf("/"); UDb = UDb.substring(VDb + 1); try { var WDb = parseFloat(UDb); if(WDb < 300 || (WDb > 400 && WDb < 416)) { RDb = true; } else if(WDb > 500) { TDb = true; } else { SDb = true; } } catch(err) { TDb = true; }}var XDb = 0;var YDb = 0;function bDb(evt, IEb){ try { if(Jca) { var d = new Date(); var Omb = d.getTime(); if(Omb < (YDb + 800) || !Hca) { return; } } var jab = hDb(evt, Jca); if(jab != null) { if(Hea) { if(jab.node.nodeType == 1 && jab.node.tagName.toLowerCase() =="input") { var Okb = jab.node.getAttribute("type"); if(Okb != null) { Okb = Okb.toLowerCase(); if((Okb =="radio"|| Okb =="checkbox")) { jab.node = gKb(jab.node, true, null); jab.offset = 0; } } } } var rab = xDb(jab); if(rab != null) { try { if(rab.equals(NDb)) { return; } if(rab.equals(ODb)) { if((Omb - XDb) < 1000) { return; } XDb = Omb; } if(typeof(IEb) =="boolean"&& IEb) { rab.useHighlighting = false; GEb(rab, true); } else { GEb(rab, false); } }catch(err){thLogE(err);} } else { NDb = null; } } } catch(err) { Qra("mousehover error: "+ err); }}function hDb(yZb, fUb){ var GOb = null; var gDb = 0; if(Cfa) { GOb = yZb.srcElement; if(GOb.nodeType == 1 && GOb.tagName.toLowerCase() =="textarea") { } else { var Jlb = rw_getTargetNodeAsCaretIE(yZb, fUb); if(Jlb != null) { GOb = Jlb.node; gDb = Jlb.offset; } else { var lDb = false; if(GOb.tagName.toLowerCase() =="li"|| GOb.tagName.toLowerCase() =="a") { lDb = true; } else if(GOb.parentNode != null && GOb.parentNode.tagName != null && GOb.parentNode.tagName.toLowerCase() =="li") { lDb =true; } if(lDb) { var Rgb = GOb.firstChild; if(Rgb == null) { return null; } if(Rgb.nodeType != 3) { Rgb = gKb(Rgb, false, GOb); if(Rgb == null) { return null; } } GOb = Rgb; gDb = 0; } } } } else if(Mfa) { GOb = yZb.target; if(GOb != null) { if(TDb) { if(GOb.firstChild != null && GOb.firstChild.nodeType == 3 && GOb.tagName.toLowerCase() !="textarea") { var iUb = GOb.firstChild.nodeValue; if(iUb.trimTH().length > 0) { GOb = GOb.firstChild; } } } else if(SDb) { if(yZb.fromElement != null) { if(GOb.nodeType == 1 && GOb.tagName.toLowerCase() !="textarea") { if(yZb.fromElement.nodeType == 3) { GOb = yZb.fromElement; } } } else { if(GOb.firstChild != null && GOb.firstChild.nodeType == 3 && GOb.tagName.toLowerCase() !="textarea") { var iUb = GOb.firstChild.nodeValue; if(iUb.trimTH().length > 0) { GOb = GOb.firstChild; } } } } } } else { if(yZb.explicitOriginalTarget.nodeValue != null) { if(yZb.target.tagName.toLowerCase() =="textarea") { GOb = yZb.target; } else { GOb = yZb.explicitOriginalTarget; } } else { GOb = yZb.target; } } if(GOb == null) { return null; } if(yMb(GOb)) { return null; } return new THCaret(GOb, gDb, true);}function xDb(yDb){ var pDb = false; var GOb = yDb.node; var rab = null; if(HTb(GOb)) { if(eca == null) { return rab; } else { pDb = true; } } if(GOb != null && GOb.parentNode != null && GOb.parentNode.getAttribute) { var sNb; var tDb; var uDb; var vDb; var wDb; if(GOb.nodeType == 1) { sNb = GOb.tagName; if(yca && sNb.toUpperCase() =="INPUT") { var Okb = GOb.getAttribute("type"); var AEb = GOb.className; if(Okb != null && Okb =="button"&& AEb !="rwcalbutton"&& AEb !="rwcalEqbutton") { return rab; } } tDb = GOb.getAttribute("started"); uDb = GOb.getAttribute("ignore"); vDb = GOb.getAttribute("sp"); wDb = GOb.getAttribute("csp"); if(wDb != null || uDb != null || vDb != null || tDb != null) { return rab; } } var Ubb = GOb.parentNode; tDb = Ubb.getAttribute("started"); uDb = Ubb.getAttribute("ignore"); vDb = Ubb.getAttribute("sp"); wDb = Ubb.getAttribute("csp"); if(wDb != null || uDb != null || vDb != null || tDb != null) { rab = null; } else { var Pgb; var Qgb; if(GOb.nodeType == 3) { var Jlb = yDb; try { if(!Cfa && Jlb.node.nodeValue.length > 0) { Jlb.offset = 0; Pgb = TJb(Jlb); Jlb.offset = Jlb.node.nodeValue.length - 1; Qgb = hJb(Jlb); } else { Pgb = TJb(Jlb); Qgb = hJb(Jlb); } if(Pgb != null && Qgb != null) { var range = new THRange(Mra(Ubb), qSb(Pgb.node, Pgb.offset), qSb(Qgb.node, Qgb.offset)); rab = new THHoverTarget(null, null, range); rab.blockCache = pDb; } } catch(err){thLogE(err);} } else if(GOb.nodeType == 1) { if(GOb.tagName.toLowerCase() =="img"&& GOb.getAttribute("msg") != null) { Pgb = TJb(yDb); Qgb = hJb(yDb); if(Pgb != null && Qgb != null) { var range = new THRange(Mra(Ubb), qSb(Pgb.node, Pgb.offset), qSb(Qgb.node, Qgb.offset)); rab = new THHoverTarget(null, null, range); } else { rab = new THHoverTarget(Mra(GOb), MOb(GOb), null); } rab.blockCache = pDb; } else { rab = new THHoverTarget(Mra(GOb), MOb(GOb), null); rab.blockCache = pDb; rab.allowContinuous = false; } } else { rab = null; } } } return rab;}function GEb(Dbb, IEb){ if(PDb > 0) { clearTimeout(PDb); PDb = 0; } if(QDb > 0) { clearTimeout(QDb); QDb = 0; } if(Jca && !IEb) { if(!PEb(Dbb)) { return; } NDb = Dbb; var FEb = hxa; $rw_event_stop_limited(); if(FEb) { PDb = setTimeout(NEb, 500); } else { PDb = setTimeout(NEb, 5); } } else { NDb = Dbb; PDb = setTimeout(KEb, 500); }}function KEb(){ if(NDb == null) { return; } if($g_bMouseSpeech || ((Zca & calculator_icon) == calculator_icon)) { PDb = 0; if (NDb != null) { if(!PEb(NDb)) { return; } } if(PDb > 0) { clearTimeout(PDb); PDb = 0; } if(QDb > 0) { clearTimeout(QDb); QDb = 0; } $rw_event_stop_limited(); QDb = setTimeout(NEb, 500); }}var JEb = false;function NEb(){ try { JEb = true; PDb = 0; if (NDb != null) { if(ODb!= null) { if(QDb > 0) { clearTimeout(QDb); QDb = 0; } $rw_event_stop_limited(); QDb = setTimeout(NEb, 500); } else { var d = new Date(); YDb = d.getTime(); if(NDb.range != null) { Oga = NDb; } rw_speakHoverTarget(NDb); NDb = null; } } } catch(ignore) { thLogE(ignore); } JEb = false;}function PEb(Dbb){ if (Dbb != null) { var Kjb; if(Dbb instanceof String) { Kjb = Dbb.toString(); } else { if(Dbb.isRange()) { if(csa(Dbb.getCaretRange())) { Kjb =" "; } else { Kjb = null; } } else { Kjb = Dbb.getTextPreparedForSpeech(); } } if(Kjb == null || Kjb.length == 0) { return false; } else { return true; } }}var REb = new Array();var SEb = (new Date).getTime();var TEb = 0;var UEb = 500;function WEb(){ if((new Date).getTime() - SEb < UEb) { return true; } return false;}function XEb(){ if(WEb()) { TEb = setTimeout(XEb, 100); } else { TEb = 0; if(REb.length > 1) { var gZb = REb[REb.length - 2]; var target = REb[REb.length - 1]; REb.length = 0; if(gZb =="rw_speakHoverTarget") { rw_speakHoverTarget(target); } else if(gZb =="rw_speechHighlightOnly") { rw_speechHighlightOnly(target); } else { jEb(target, gZb); } } }}function rw_speakHoverTarget(pEb){ try { if(pEb == null) { return; } if(WEb()) { REb.push("rw_speakHoverTarget"); REb.push(pEb); if(TEb == 0) { TEb = setTimeout(XEb, 100); } return; } SEb = (new Date).getTime(); if(ODb != null) { ODb.unhighlightRange(); } if(pEb instanceof String) { ODb = null; var cFb = new SpeechStream.SpeechRequest(); cFb.setString(pEb.toString(), SpeechStream.SpeechRequestBookmarks.NONE); var Xmb = cFb.getText(); var flash = ZZb.getConnector(); if(flash != null) { flash.simpleSpeech(Xmb, !Yfa); } } else { if(pEb.range && pEb.range instanceof THRange) { var dEb = KIb(pEb.range); if(dEb != null && HTb(dEb.Pgb.node)) { if(eca == null) { return; } else { pEb.blockCache = true; } } } if(!Dea && Gea != null && Fea != null) { if(pEb.equalsAprox(Fea)) { pEb = Gea; pEb.allowContinuous = false; Fea = null; Gea = null; if(Eea) { nCb.push("rw_pageCompleteCallBack()"); } } } ODb = pEb; var Kjb = pEb.getTextPreparedForSpeech(); if(Kjb != null && Kjb.length > 0) { Xka(pEb); if(!pEb.isValid()) { return; } $rw_setSentenceFromSelection(); if(!pEb.useHighlighting) { var flash = ZZb.getConnector(); if(flash != null) { if(pEb.isOverridingGlobal()) { xBb(pEb.voice, null, null, pEb.bookId, pEb.pageId); flash.simpleSpeech(Kjb, !Yfa); HCb(); } else { flash.simpleSpeech(Kjb, !Yfa); } } } else { pEb.highlightRange(); var gEb = pEb.textToSpeakNoChanges; if(pEb.isOverridingGlobal()) { xBb(pEb.voice, null, null, pEb.bookId, pEb.pageId); dna(Kjb, pEb.blockCache, gEb); HCb(); } else { dna(Kjb, pEb.blockCache, gEb); } } if(rda && pEb.allowContinuous) { Ica = true; if(pEb.equals(Fea)) { Fea = null; if(Eea) { nCb.push("rw_pageCompleteCallBack()"); } } else { tCb(pEb, pEb.blockCache); } Ica = false; } } } } catch(err) { Qra("rw_speakHoverTarget error:"+err.message); }}function jEb(pEb, nEb){ if(pEb == null || nEb == null) { return; } if(WEb()) { REb.push(nEb); REb.push(pEb); if(TEb == 0) { TEb = setTimeout(XEb, 100); } return; } SEb = (new Date).getTime(); if(ODb != null) { ODb.unhighlightRange(); } if(pEb instanceof String) { ODb = null; try { var flash = ZZb.getConnector(); if(flash != null) { pxa(true); flash.startSpeechFromFile(pEb, nEb, !Yfa); vpa(); } } catch(err) { thLogE(err); } } else { ODb = pEb; var Kjb = pEb.getTextPreparedForSpeech(); if(Kjb != null && Kjb.length > 0) { Xka(pEb); if(!pEb.isValid()) { return; } pEb.highlightRange(); Doa(Kjb, nEb); } }}function rw_speechHighlightOnly(pEb){ if(pEb == null) { return; } if(WEb()) { REb.push("rw_speechHighlightOnly"); REb.push(pEb); if(TEb == 0) { TEb = setTimeout(XEb, 100); } return; } SEb = (new Date).getTime(); if(ODb != null) { ODb.unhighlightRange(); } if(pEb instanceof String) { ODb = null; } else { ODb = pEb; var Kjb = pEb.getTextPreparedForSpeech(); if(Kjb != null && Kjb.length > 0) { Xka(pEb); if(!pEb.isValid()) { return; } pEb.highlightRange(); Ioa(Kjb); } }}function $rw_readNextTarget(){ if(sda != null) { NDb = sda; Oga = sda; sda = null; NEb(); }}function uEb(vEb, cSb){ if(vEb == null || cSb == null || vEb == cSb) { return false; } var xgb; var mNb=vEb; var tEb = null; if(Fea != null) { tEb = Fea.getCaretRange().Qgb.node; } while(mNb != null && mNb != cSb) { if(mNb.nodeType == 1) { if(mNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(mNb == tEb && mNb != cSb) { return true; } xgb = !oMb(mNb); if (mNb.firstChild != null && xgb) { mNb = mNb.firstChild; } else if(mNb.nextSibling != null) { mNb = mNb.nextSibling; } else { while (mNb != null && mNb.nextSibling == null) { mNb = mNb.parentNode; if(mNb != null && mNb.nodeType == 1) { if(mNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(cSb == mNb) { return false; } } if (mNb != null && cSb != mNb) { mNb = mNb.nextSibling; } } } return false;}function yEb(Teb, zFb){ this.range = Teb; this.word = zFb; }function EFb(cVb, UNb, VNb, NGb){ try { if(UNb == null || VNb == null) { return new BBb(); } var Ghb = JPb(cVb, UNb.path, UNb.offset, VNb.path, VNb.offset); return RFb(Ghb, NGb); } catch(err) { Qra("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return new BBb(); }}function RFb(iNb, NGb){ var JFb = new BBb(); try { if(iNb == null) { return JFb; } var Pgb = iNb.Pgb; var Qgb = iNb.Qgb; if(Pgb == null) { return JFb; } if(Qgb == null) { return JFb; } if(Pgb.node != null) { var fkb = qFb(Pgb.node); if(fkb != null) { Pgb.node = fkb; Pgb.offset = 0; } } if(Qgb.node != null && Qgb.node.nodeType == 3) { var fkb = qFb(Qgb.node); if(fkb != null) { if(Qgb.node.nodeType == 3) { Qgb.offset = Qgb.node.nodeValue.length; } Qgb.node = fkb; } } var OFb = false; if(!sca) { var Rgb = Pgb.node; var gkb; while(Rgb != null) { if(Rgb.nodeType == 1) { gkb = Rgb.getAttribute("id"); if(gkb != null && gkb.length > 0) { if(gkb =="rwpopuptrans") { OFb = true; break; } else { if(gkb.indexOf("rwMeaning")!=0 && gkb.indexOf("rwHeadWord")!= 0) { break; } } } } Rgb = Rgb.parentNode; } } if(sca || OFb) { var XLb = CBb(Pgb.node); if(XLb != null) { JFb.voice = XLb; } var YLb = OBb(Pgb.node, Qgb.node, XLb); if(YLb != null) { JFb.Ghb = new Bka(Pgb, YLb); var Kjb = JFb.Ghb.toString(); if(Kjb.length == 0 || !Ssa(Kjb)) { var Rgb = gKb(Pgb.node, false, Qgb.node); if(Rgb != null && Rgb != Pgb.node && Rgb != iNb.Pgb.node) { var XFb = new Bka(new THCaret(Rgb, 0, true), iNb.Qgb); return RFb(XFb, NGb); } } Qgb = YLb; } } if(qfa) { var YFb = Qka(Pgb.node); var ZFb = YBb(Pgb.node, Qgb.node, YFb); if(ZFb != null) { JFb.Ghb = new Bka(iNb.Pgb, ZFb); Qgb = ZFb; } } rw_getTextOverRangeToSpeakImpl(Pgb, Qgb, NGb); var i; var Nnb = NGb.length; var wordList = new Array(); for(i=0; i<Nnb; i++) { wordList.push(NGb[i].word); } var cFb = new SpeechStream.SpeechRequest(); cFb.setWordList(wordList, SpeechStream.SpeechRequestBookmarks.ALL); JFb.gEb = cFb.getText(); JFb.Kjb = cFb.getFinalText(); return JFb; } catch(err) { Qra("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return JFb; }};function dFb(Wjb){ if(Wjb == null) { return false; } if(Wjb.nodeType == 1) { var tagName = Wjb.tagName.toLowerCase(); if(tagName =="span") { var pSb = Wjb.getAttribute("pron"); if(pSb != null) { return true; } pSb = Wjb.getAttribute("chunk"); if(pSb != null) { return true; } } else if(tagName =="acronym"|| tagName =="abbr") { var pSb = Wjb.getAttribute("title"); if(pSb != null) { return true; } } else if(tagName =="chunk") { return true; } else if(tagName =="img") { var pSb = Wjb.getAttribute("msg"); if(pSb != null) { return true; } } else if(tagName =="math") { var UTb = PQb(Wjb); if(UTb.length > 0) { return true; } } if(Wjb.getAttribute("ignore") != null) { return true; } } return false;};function jFb(Wjb){ if(Wjb.nodeType == 1) { var tagName = Wjb.tagName.toLowerCase(); if(tagName =="span") { var pSb = Wjb.getAttribute("pron"); if(pSb != null) { return true; } pSb = Wjb.getAttribute("chunk"); if(pSb != null && pSb =="1") { return true; } } else if(tagName =="acronym"|| tagName =="abbr") { var pSb = Wjb.getAttribute("title"); if(pSb != null) { return true; } } else if(tagName =="math") { var UTb = PQb(Wjb); if(UTb.length > 0) { return true; } } } return false;};function qFb(Wjb){ if(Wjb != null) { var ajb = Mra(Wjb); var Rgb = Wjb; while(Rgb != null && Rgb != ajb) { if(dFb(Rgb)) { return Rgb; } Rgb = Rgb.parentNode; } if(Rgb == ajb) { if(Rgb.getAttribute("ignore") != null) { return Rgb; } } } return null;};var sFb = 500;function uFb(vFb){ var QGb = vFb.length; if(QGb > 1 && vFb.substr(QGb - 2, 2) ==". ") { return vFb; } else if(QGb > 0 && vFb.substr(QGb - 1, 1) ==".") { return vFb +" "; } else { var Kjb = vFb.trimEndTH(); var c = Kjb.charCodeAt(Kjb.length - 1); if(hra(c) || c > 127) { return vFb +". "; } else { return vFb; } }}function yFb(zFb){ var slb =""; if(zFb.indexOf("<math") > -1) { return zFb; } else { var AGb = (zFb.length > 20); var yeb = 0; var Nnb = zFb.length; var i = 0; var dOb; for(i = 0; i < Nnb; i++) { dOb = zFb.charCodeAt(i); if(dOb > 127) { slb += zFb.charAt(i); } else { switch(dOb) { case 35: case 40: case 41: case 91: case 93: case 95: case 123: case 124: case 125: slb +=" "; break; case 96: slb +="'"; break; case 38: slb +="&amp;"; break; case 34: slb +="&quot;"; break; case 60: slb +="&lt"; break; case 62: slb +="&gt"; break; default: slb += zFb.charAt(i); } if(AGb) { if((dOb >=48 && dOb <=57) || dOb == 44) { ++yeb; if(yeb > 20) { slb +=' '; yeb = 0; } } else { yeb = 0; } } } } return slb; }}function rw_getTextOverRangeToSpeakImpl(gLb, MGb, NGb){ try { var ySb = gLb.node; var mNb = MGb.node; var ajb = Mra(ySb); var bJb = gLb.offset; var lJb = MGb.offset; var JGb =""; var oNb = ySb; var PGb = null; var QGb = 0; var dNb = true; var yeb = 0; var GVb = qSb(oNb, bJb); var HVb = null; while(oNb != null) { if(yeb > sFb && sFb > 0) { if(zca) { throw"Full selection will not be spoken due to its length."; } else { hsa("Full selection will not be spoken due to its length."); } return; } if(dFb(oNb)) { if(JGb.length > 0) { if(Ssa(JGb)) { NGb[yeb++] = new yEb(new THRange(ajb, GVb, HVb), JGb); } JGb =""; } var aGb = MNb(oNb); if(aGb.length > 0 && Ssa(aGb)) { if(jFb(oNb)) { var WGb = BJb(oNb, false); var XGb = FJb(oNb, false); var YGb =""; var ZGb =""; if(WGb.nodeType == 1) { YGb = WGb.tagName.toLowerCase(); } if(XGb.nodeType == 1) { ZGb = XGb.tagName.toLowerCase(); } if(WGb != null && WGb.nodeType == 3 && XGb != null && XGb.nodeType ==3) { GVb = qSb(WGb, 0); HVb = qSb(XGb, XGb.nodeValue.length); } if(WGb != null && WGb.nodeType == 1 && YGb =="math"&& XGb != null && XGb.nodeType ==1 && ZGb =="math") { GVb = qSb(WGb, 0); HVb = qSb(XGb, aGb.length); } NGb[yeb++] = new yEb(new THRange(ajb, GVb, HVb), aGb); } else { GVb = qSb(oNb, -1); NGb[yeb++] = new yEb(new THRange(ajb, GVb, GVb), aGb); } JGb =""; } GVb = null; HVb = null; oNb = vIb(oNb, false, mNb); } else if(oNb.nodeType == 1) { if(dNb) { PGb = hIb(oNb, true, mNb); } else { PGb = UIb(oNb, true, mNb); } if(PGb == null) { if(JGb.length > 0) { if(Ssa(JGb)) { NGb[yeb++] = new yEb(new THRange(ajb, GVb, HVb), uFb(JGb)); } JGb =""; GVb = null; HVb = null; } if(dNb) { oNb = hIb(oNb, false, mNb); } else { oNb = UIb(oNb, false, mNb); } } else { oNb = PGb; } } else if(oNb.nodeType == 3) { var aGb = MNb(oNb); if(aGb == null) { aGb =""; } var Ilb = 0; if(mNb == oNb && lJb > -1) { aGb = aGb.substring(0, lJb); } if(ySb == oNb && bJb > 0) { aGb = aGb.substring(bJb); Ilb = bJb; } if(aGb.length == 0 && JGb.length == 0) { GVb = null; } else { if(GVb == null || JGb.length == 0) { GVb = qSb(oNb, Ilb); } var Rnb = pGb(aGb); while(Rnb > -1) { if(Rnb == 0) { if(JGb.length > 0) { if(Ssa(JGb)) { if(HVb == null) { HVb = qSb(oNb, Ilb); } var Mcb = new THRange(ajb, GVb, HVb); if(!fda) { JGb = JGb + aGb.substr(0, 1); } else { var RNb = null; var fGb = null; var jGb = oNb.parentNode; if(jGb != null && jGb.nodeType == 1) { RNb = jGb.getAttribute("class"); fGb = jGb.getAttribute("className"); } var hGb = false; hGb = (RNb != null && (RNb.toLowerCase() =="x2"|| RNb.toLowerCase() =="x3")) || (fGb != null && (fGb.toLowerCase() =="x2"|| fGb.toLowerCase() =="x3")); var iGb = false; while(hGb) { if(jGb.previousSibling != null && jGb.previousSibling.nodeType == 1) { RNb = jGb.previousSibling.getAttribute("class"); fGb = jGb.previousSibling.getAttribute("className"); if(RNb != null && RNb.length > 3) { RNb = RNb.substr(RNb.length - 4).toLowerCase(); if(RNb =="text") { iGb = true; break; } } if(fGb != null && fGb.length > 3) { fGb = fGb.substr(fGb.length - 4).toLowerCase(); if(fGb =="text") { iGb = true; break; } } break; } jGb = jGb.parentNode; if(jGb != null && jGb.nodeType == 1 && jGb.tagName.toLowerCase() =="span") { } else { break; } } if(hGb) { if(!iGb) { JGb = JGb + aGb.substr(0, 1); } } else { if(oNb.previousSibling != null) { RNb = oNb.previousSibling.getAttribute("class"); fGb = oNb.previousSibling.getAttribute("className"); if( (RNb != null && (RNb.toLowerCase() =="x2"|| RNb.toLowerCase() =="x3")) || (fGb != null && (fGb.toLowerCase() =="x2"|| fGb.toLowerCase() =="x3")) ) { JGb = JGb + aGb.substr(0, 1); } } else { var jGb = oNb; var lTb = false; while(jGb.previousSibling == null && jGb.parentNode.tagName.toLowerCase() =="span") { jGb = jGb.parentNode; if(jGb.previousSibling != null) { lTb = true; } } if(lTb && jGb.previousSibling != null) { RNb = jGb.previousSibling.getAttribute("class"); fGb = jGb.previousSibling.getAttribute("className"); if( (RNb != null && (RNb.toLowerCase() =="x2"|| RNb.toLowerCase() =="x3")) || (fGb != null && (fGb.toLowerCase() =="x2"|| fGb.toLowerCase() =="x3")) ) { JGb = JGb + aGb.substr(0, 1); } } } } } NGb[yeb++] = new yEb(Mcb, JGb); } JGb =""; ++Ilb; aGb = aGb.substr(1); } else { aGb = aGb.substr(1); ++Ilb; } } else { var lGb = JGb + aGb.substring(0, Rnb + 1); if(lGb.trimTH() =="*") { if(! (afa && qTb("*")) ) { lGb =""; } } if(Ssa(lGb)) { HVb = qSb(oNb, Rnb + Ilb); var Mcb = new THRange(ajb, GVb, HVb); NGb[yeb++] = new yEb(Mcb, lGb); if(yeb > sFb && sFb > 0) { if(zca) { throw"Full selection will not be spoken due to its length."; } else { hsa("Full selection will not be spoken due to its length."); } return ; } } JGb =""; Ilb += Rnb + 1; aGb= aGb.substring(Rnb + 1); } GVb = qSb(oNb, Ilb); HVb = null; Rnb = pGb(aGb); } if(aGb.length > 0) { JGb += aGb; HVb = qSb(oNb, aGb.length + Ilb); if(HVb == null) { JGb =""; } } if(oNb == mNb) { if(JGb.length > 0) { var Mcb = new THRange(ajb, GVb, HVb); if(Ssa(JGb)) { NGb[yeb++] = new yEb(Mcb, JGb); } } return ; } } PGb = UIb(oNb, true, mNb); if(PGb == null) { if(JGb.length > 0) { if(Ssa(JGb)) { NGb[yeb++] = new yEb(new THRange(ajb, GVb, HVb), uFb(JGb)); } JGb =""; GVb = null; HVb = null; } oNb = UIb(oNb, false, mNb); } else { oNb = PGb; } } else { PGb = UIb(oNb, true, mNb); if(PGb == null) { if(JGb.length > 0) { if(Ssa(JGb)) { NGb[yeb++] = new yEb(new THRange(ajb, GVb, HVb), uFb(JGb)); } JGb =""; GVb = null; HVb = null; } oNb = UIb(oNb, false, mNb); } else { oNb = PGb; } } dNb = false; } } catch(err) { Qra("err rw_getTextOverRangeToSpeakImpl:"+ err.message); }}function pGb(zmb){ if(zmb == null || zmb.length == 0) { return -1; } var Rnb = zmb.search("[\\s\"]"); return Rnb;}/* The following code is derived from MD5 hash functions (c) Paul Johnston, http://pajhome.org.uk/crypt/md5/. */var rGb = 0; var sGb =""; var tGb = 8;function uGb(s){ return NHb(vGb(LHb(s), s.length * tGb));}function vGb(x, Vpa){x[Vpa >> 5] |= 0x80 << ((Vpa) % 32); x[(((Vpa + 64) >>> 9) << 4) + 14] = Vpa; var a = 1732584193; var b = -271733879; var c = -1732584194; var d = 271733878; for(var i = 0; i < x.length; i += 16) { var wGb = a; var xGb = b; var yGb = c; var zGb = d; a = BHb(a, b, c, d, x[i+ 0], 7 , -680876936); d = BHb(d, a, b, c, x[i+ 1], 12, -389564586); c = BHb(c, d, a, b, x[i+ 2], 17, 606105819); b = BHb(b, c, d, a, x[i+ 3], 22, -1044525330); a = BHb(a, b, c, d, x[i+ 4], 7 , -176418897); d = BHb(d, a, b, c, x[i+ 5], 12, 1200080426); c = BHb(c, d, a, b, x[i+ 6], 17, -1473231341); b = BHb(b, c, d, a, x[i+ 7], 22, -45705983); a = BHb(a, b, c, d, x[i+ 8], 7 , 1770035416); d = BHb(d, a, b, c, x[i+ 9], 12, -1958414417); c = BHb(c, d, a, b, x[i+10], 17, -42063); b = BHb(b, c, d, a, x[i+11], 22, -1990404162); a = BHb(a, b, c, d, x[i+12], 7 , 1804603682); d = BHb(d, a, b, c, x[i+13], 12, -40341101); c = BHb(c, d, a, b, x[i+14], 17, -1502002290); b = BHb(b, c, d, a, x[i+15], 22, 1236535329); a = CHb(a, b, c, d, x[i+ 1], 5 , -165796510); d = CHb(d, a, b, c, x[i+ 6], 9 , -1069501632); c = CHb(c, d, a, b, x[i+11], 14, 643717713); b = CHb(b, c, d, a, x[i+ 0], 20, -373897302); a = CHb(a, b, c, d, x[i+ 5], 5 , -701558691); d = CHb(d, a, b, c, x[i+10], 9 , 38016083); c = CHb(c, d, a, b, x[i+15], 14, -660478335); b = CHb(b, c, d, a, x[i+ 4], 20, -405537848); a = CHb(a, b, c, d, x[i+ 9], 5 , 568446438); d = CHb(d, a, b, c, x[i+14], 9 , -1019803690); c = CHb(c, d, a, b, x[i+ 3], 14, -187363961); b = CHb(b, c, d, a, x[i+ 8], 20, 1163531501); a = CHb(a, b, c, d, x[i+13], 5 , -1444681467); d = CHb(d, a, b, c, x[i+ 2], 9 , -51403784); c = CHb(c, d, a, b, x[i+ 7], 14, 1735328473); b = CHb(b, c, d, a, x[i+12], 20, -1926607734); a = DHb(a, b, c, d, x[i+ 5], 4 , -378558); d = DHb(d, a, b, c, x[i+ 8], 11, -2022574463); c = DHb(c, d, a, b, x[i+11], 16, 1839030562); b = DHb(b, c, d, a, x[i+14], 23, -35309556); a = DHb(a, b, c, d, x[i+ 1], 4 , -1530992060); d = DHb(d, a, b, c, x[i+ 4], 11, 1272893353); c = DHb(c, d, a, b, x[i+ 7], 16, -155497632); b = DHb(b, c, d, a, x[i+10], 23, -1094730640); a = DHb(a, b, c, d, x[i+13], 4 , 681279174); d = DHb(d, a, b, c, x[i+ 0], 11, -358537222); c = DHb(c, d, a, b, x[i+ 3], 16, -722521979); b = DHb(b, c, d, a, x[i+ 6], 23, 76029189); a = DHb(a, b, c, d, x[i+ 9], 4 , -640364487); d = DHb(d, a, b, c, x[i+12], 11, -421815835); c = DHb(c, d, a, b, x[i+15], 16, 530742520); b = DHb(b, c, d, a, x[i+ 2], 23, -995338651); a = EHb(a, b, c, d, x[i+ 0], 6 , -198630844); d = EHb(d, a, b, c, x[i+ 7], 10, 1126891415); c = EHb(c, d, a, b, x[i+14], 15, -1416354905); b = EHb(b, c, d, a, x[i+ 5], 21, -57434055); a = EHb(a, b, c, d, x[i+12], 6 , 1700485571); d = EHb(d, a, b, c, x[i+ 3], 10, -1894986606); c = EHb(c, d, a, b, x[i+10], 15, -1051523); b = EHb(b, c, d, a, x[i+ 1], 21, -2054922799); a = EHb(a, b, c, d, x[i+ 8], 6 , 1873313359); d = EHb(d, a, b, c, x[i+15], 10, -30611744); c = EHb(c, d, a, b, x[i+ 6], 15, -1560198380); b = EHb(b, c, d, a, x[i+13], 21, 1309151649); a = EHb(a, b, c, d, x[i+ 4], 6 , -145523070); d = EHb(d, a, b, c, x[i+11], 10, -1120210379); c = EHb(c, d, a, b, x[i+ 2], 15, 718787259); b = EHb(b, c, d, a, x[i+ 9], 21, -343485551); a = HHb(a, wGb); b = HHb(b, xGb); c = HHb(c, yGb); d = HHb(d, zGb); } return Array(a, b, c, d);}function AHb(q, a, b, x, s, t){ return HHb(IHb(HHb(HHb(a, q), HHb(x, t)), s),b);}function BHb(a, b, c, d, x, s, t){ return AHb((b & c) | ((~b) & d), a, b, x, s, t);}function CHb(a, b, c, d, x, s, t){ return AHb((b & d) | (c & (~d)), a, b, x, s, t);}function DHb(a, b, c, d, x, s, t){ return AHb(b ^ c ^ d, a, b, x, s, t);}function EHb(a, b, c, d, x, s, t){ return AHb(c ^ (b | (~d)), a, b, x, s, t);}function HHb(x, y){ var FHb = (x & 0xFFFF) + (y & 0xFFFF); var GHb = (x >> 16) + (y >> 16) + (FHb >> 16); return (GHb << 16) | (FHb & 0xFFFF);}function IHb(num, cnt){ return (num << cnt) | (num >>> (32 - cnt));}function LHb(mdb){ var JHb = Array(); var mask = (1 << tGb) - 1; for(var i = 0; i < mdb.length * tGb; i += tGb) { JHb[i>>5] |= (mdb.charCodeAt(i / tGb) & mask) << (i%32); } return JHb;}function NHb(binarray){ var MHb = rGb ?"0123456789ABCDEF":"0123456789abcdef"; var mdb =""; for(var i = 0; i < binarray.length * 4; i++) { mdb += MHb.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) + MHb.charAt((binarray[i>>2] >> ((i%4)*8 )) & 0xF); } return mdb;}function $rw_hash(feb){ return uGb(feb);}function $rw_cachePage(yBb, DCb, p_strBookName) { var SHb = 0; try { if(qda) { eba_cacheResult ="failure: The embedded speech toolbar cannot be added due to invalid html tag markup in this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } if(oca == 300) { if(typeof(p_strBookName) =="string"&& p_strBookName != null && p_strBookName.length > 0) { mca = p_strBookName; } else { mca ="1"; } nca ="1"; } if(zca) { if(DCb != null) { $rw_setSpeedValue(parseInt(DCb), 10); } if(yBb != null) { $rw_setVoice(yBb); } var QHb = CLb(document.body); $rw_doSelection(-2); SHb = XHb(QHb, SHb); } else { eba_cacheResult ="failure: The generate cache flag was set to false, no processing done for this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } } catch(err) { if(err.message != null) { eba_cacheResult ="failure:"+ err.message; } else { eba_cacheResult ="failure:"+ err; } window.external.completed(eba_cacheResult); return eba_cacheResult; } eba_cacheResult ="success"; if(SHb > 0) { eba_cacheResult = eba_cacheResult +":Warning, encountered "+ SHb +" zero length speech files."; } window.external.completed(eba_cacheResult); return"success";}function XHb(YHb, ZHb){ var RHb = YHb; var SHb = ZHb; var THb = 0; while(RHb != null) { var UHb = RFb(RHb, new Array()); var Kjb = UHb.Kjb; if(Kjb == null || Kjb.trimTH().length == 0) { if(RHb != null) { var WHb = hLb(RHb); if(WHb != null) { RHb = WHb; } else { if(THb > 1) { throw"Speech engine generating empty files."; } eHb(); return SHb; } } else { if(THb > 1) { throw"Speech engine generating empty files."; } eHb(); return SHb; } } var aHb = jQb(Kjb); var bHb = lHb(); var lmb = window.external.Generate(Kjb, bHb, aHb); if(lmb == 1) { THb = 0; } else { if(lmb == 2) { throw"Got a Failure response from the speech engine."; } else if(lmb == 3) { ++SHb; ++THb; if(THb > 4) { throw"Speech engine generating empty files."; } } } RHb = hLb(RHb); } if(THb > 1) { throw"Speech engine generating empty files."; } eHb(); return SHb;}function eHb(){ var Bmb = document.getElementById("pageComplete"); if(Bmb != null) { Bmb.click(); }}function iHb(Qnb){ if(Cda) { var fHb = nHb(); var gHb = jQb(Qnb); var hHb = oHb(gHb); return fHb +"/"+ hHb +"/"+gHb; } else { return nHb() +"/"+ jQb(Qnb); }}function lHb(){ var mdb = IUb(kca," ","_"); if(oda) { return qHb(lca +"\\"+ mca +"\\"+ $rw_scholasticHash(nca) +"\\"+ nca +"\\"+ mdb + (uca)); } else { return qHb(lca +"\\"+ mca +"\\"+ nca +"\\"+ mdb + uca); }}function nHb(){ var mdb = IUb(kca," ","_"); if(oda) { return qHb(lca +"/"+ mca +"/"+ $rw_scholasticHash(nca) +"/"+ nca +"/"+ mdb + uca); } else { return qHb(lca +"/"+ mca +"/"+ nca +"/"+ mdb + uca); }}function oHb(kPb){ if(kPb == null || kPb.length < 2) { return"1/1"; } return kPb.substr(0, 1) +"/"+ kPb.substr(1, 1);}function qHb(feb){ return feb.replace(/[\x26\x3a\x2a\x3f\x22<>\x7c]/g,""); }var NYb ="";function $rw_speechCacheGenErrorHandler(Xia){ NYb = Xia; var Bmb = document.getElementById("pageFailed"); if(Bmb != null) { Bmb.click(); }}function $rw_getLastError(){ return NYb;}function yHb(HMb){ if(HMb == null || HMb.Pgb == null || HMb.Qgb == null) { return null; } return new THRange(HMb.Pgb.node.ownerDocument.body, qSb(HMb.Pgb.node, HMb.Pgb.offset), qSb(HMb.Qgb.node, HMb.Qgb.offset));}function EIb(JIb){ if(JIb == null || JIb.Ggb == null || JIb.Hgb == null) { return null; } else { return new THRange(JIb.body, JIb.Ggb, JIb.Hgb); }}function IIb(JIb){ if(JIb == null || JIb.Ggb == null || JIb.Hgb == null) { return null; } else { var Pgb = pOb( JIb.body, JIb.Ggb.path, JIb.Ggb.offset, true); var Qgb = pOb( JIb.body, JIb.Hgb.path, JIb.Hgb.offset, false); if(Pgb != null && Qgb != null) { return new Bka(JIb.body, Pgb, Qgb); } else { return null; } }}function KIb(Teb){ if(Teb == null || Teb.Ggb == null || Teb.Hgb == null) { return null; } else { var Pgb = pOb( Teb.body, Teb.Ggb.path, Teb.Ggb.offset, true); var Qgb = pOb( Teb.body, Teb.Hgb.path, Teb.Hgb.offset, false); if(Pgb != null && Qgb != null) { return new Bka(Pgb, Qgb); } else { return null; } }}function NIb(Wjb, uKb, cSb){ if(Wjb == null || Wjb == cSb) { return null; } var ySb = Wjb; if (ySb.previousSibling != null) { ySb = ySb.previousSibling; if(uKb) { if(!kMb(ySb)) { return null; } } if(ySb != null && oMb(ySb)) { if(cSb == ySb) { return null; } ySb = NIb(ySb, uKb, cSb); } else { while(ySb != null && ySb.lastChild != null) { if(ySb.nodeType == 1 && ySb.tagName.toLowerCase() =="math") { break; } ySb = ySb.lastChild; if(uKb) { if(!kMb(ySb)) { ySb = null; } } if(ySb != null && oMb(ySb)) { if(cSb == ySb) { return null; } ySb = NIb(ySb, uKb, cSb); break; } } } } else { ySb = ySb.parentNode; if(uKb) { if(!kMb(ySb)) { ySb = null; } } } return ySb;}function UIb(Wjb, uKb, cSb){ if(Wjb == null || Wjb == cSb) { return null; } var KJb = oMb(Wjb); if(Wjb.nodeType == 1) { if(Wjb.tagName.toLowerCase() =="math") { KJb = true; } } var mNb = Wjb; if (mNb.firstChild != null && !KJb) { mNb = mNb.firstChild; } else if(mNb.nextSibling != null) { mNb = mNb.nextSibling; } else { while (mNb != null && mNb.nextSibling == null) { mNb = mNb.parentNode; if(uKb) { if(!kMb(mNb)) { mNb = null; } } if(cSb == mNb) { break; } } if (mNb != null && cSb != mNb) { mNb = mNb.nextSibling; } } if(mNb != null) { if(uKb) { if(!kMb(mNb)) { mNb = null; } } } if(mNb != null && oMb(mNb)) { if(mNb != cSb) { mNb = UIb(mNb, uKb, cSb); } else { mNb = null; } } return mNb;};function bIb(Wjb, kPb, eIb){ if(Wjb == null || kPb == null) { return null; } var node = Wjb; if(eIb < 0) { eIb = 0; } var ZIb = 0; var lTb = false; while(!lTb) { if (node.firstChild != null) { node = node.firstChild; } else if(node.nextSibling != null) { node = node.nextSibling; } else { while (node != null && node.nextSibling == null) { node = node.parentNode; } if(node != null) { node = node.nextSibling; } else { return null; } } if(node.nodeType == 1 && node.tagName.toLowerCase() == kPb.toLowerCase()) { if(ZIb == eIb) { lTb = true; } else { ++ZIb; } } } return node;};function hIb(Wjb, uKb, cSb){ if(Wjb == null) { return null; } var KJb = oMb(Wjb); var mNb = Wjb; if (mNb.firstChild != null && !KJb) { mNb = mNb.firstChild; } else if(mNb.nextSibling != null) { if(Wjb == cSb) { mNb = null; } else { mNb = mNb.nextSibling; } } else { if(Wjb == cSb) { mNb = null; } else { while (mNb != null && mNb.nextSibling == null) { mNb = mNb.parentNode; if(uKb) { if(kMb(mNb) == false) { mNb = null; } } if(cSb == mNb) { break; } } if (mNb != null && cSb != mNb) { mNb = mNb.nextSibling; } } } if(mNb != null) { if(uKb) { if(kMb(mNb) == false) { mNb = null; } } } if(mNb != null && oMb(mNb)) { if(mNb != cSb) { mNb = UIb(mNb, uKb, cSb); } else { mNb = null; } } return mNb;};function oIb(Wjb, uKb, cSb){ if(Wjb == null || Wjb == cSb) { return null; } var ySb = Wjb; if (ySb.previousSibling != null) { ySb = ySb.previousSibling; if(uKb) { if(!kMb(ySb)) { ySb = null; } } if(ySb != null && oMb(ySb)) { if(cSb == ySb) { ySb = null; } else { ySb = oIb(ySb, uKb, cSb); } } } else { ySb = ySb.parentNode; if(uKb) { if(!kMb(ySb)) { ySb = null; } } } return ySb;};function vIb(Wjb, uKb, cSb){ if(Wjb == null || Wjb == cSb) { return null; } var mNb = Wjb; if(mNb.nextSibling != null) { mNb = mNb.nextSibling; } else { while (mNb != null && mNb.nextSibling == null) { mNb = mNb.parentNode; if(uKb) { if(kMb(mNb) == false) { mNb = null; } } if(cSb == mNb) { break; } } if (mNb != null && mNb != cSb) { mNb = mNb.nextSibling; } } if(mNb != null) { if(uKb) { if(kMb(mNb) == false) { mNb = null; } } } if(mNb != null && oMb(mNb)) { if(mNb == cSb) { mNb = null; } else { mNb = vIb(mNb, uKb, cSb); } } return mNb;};function BJb(Wjb, HJb){ if(Wjb == null) { return null; } if(Wjb.firstChild == null || oMb(Wjb)) { return Wjb; } if(Wjb.nodeType == 1 && Wjb.tagName.toLowerCase() =="textarea") { return Wjb; } if(Wjb.nodeType == 1 && Wjb.tagName.toLowerCase() =="math") { return Wjb; } var Rgb = Wjb.firstChild; if(Rgb.nodeType == 3) { return Rgb; } else if(Rgb.nodeType == 1 && HJb && Rgb.tagName.toLowerCase() =="img"&& Rgb.getAttribute("msg") != null && Rgb.getAttribute("msg").length > 0) { return Rgb; } else { if(HJb) { return XKb(Rgb, false, Wjb); } else { return nKb(Rgb, false, Wjb, true); } }}function FJb(Wjb, HJb){ if(Wjb == null) { return null; } if(Wjb.lastChild == null || oMb(Wjb)) { return Wjb; } if(Wjb.nodeType == 1 && Wjb.tagName.toLowerCase() =="textarea") { return Wjb; } if(Wjb.nodeType == 1 && Wjb.tagName.toLowerCase() =="math") { return Wjb; } var Rgb = Wjb.lastChild; while(Rgb != null) { if(Rgb.nodeType == 3) { return Rgb; } else if(Rgb.nodeType == 1 && HJb && Rgb.tagName.toLowerCase() =="img"&& Rgb.getAttribute("msg") != null && Rgb.getAttribute("msg").length > 0) { return Rgb; } else if(oMb(Rgb) || Rgb.lastChild == null) { var Ujb; if(HJb) { Ujb = wJb(Rgb, false, Wjb); } else { Ujb = MKb(Rgb, false, Wjb, true); } return Ujb; } else { Rgb = Rgb.lastChild; } } return Wjb;}function PJb(nUb){ var KJb = oMb(nUb); var mNb = nUb; if (mNb.firstChild != null && !KJb) { mNb = mNb.firstChild; } else if(mNb.nextSibling != null) { var oNb = mNb; mNb = mNb.nextSibling; var Rgb = mNb; var ajb = Rgb.ownerDocument.body; while(Rgb != null && Rgb != ajb) { if(Rgb == oNb) { throw"DOM Error"; } Rgb = Rgb.parentNode; } } else { while (mNb != null && mNb.nextSibling == null) { mNb = mNb.parentNode; } if (mNb != null) { var oNb = mNb; mNb = mNb.nextSibling; var Rgb = mNb; var ajb = Rgb.ownerDocument.body; while(Rgb != null && Rgb != ajb) { if(Rgb == oNb) { throw"DOM Error"; } Rgb = Rgb.parentNode; } } } if(mNb != null && oMb(mNb)) { mNb = PJb(mNb); } return mNb;};function TJb(Ajb, cSb){ if(typeof(cSb) =="undefined") { cSb = null; } if(Ajb == null || Ajb.node == null) { return null; } var node = Ajb.node; var Ilb = Ajb.offset; if(Ajb.node.nodeType == 1 && Ajb.node.tagName.toLowerCase() =="math") { return Ajb; } if(Ajb.forwardBias) { if(node.nodeType == 3 && Ilb == node.nodeValue.length) { node = XKb(node, true, cSb); Ilb = 0; if(node == null) { node = Ajb.node; Ilb = Ajb.offset; } } } else { if(Ilb > 0) { --Ilb; } else { node = wJb(node, true, cSb); if(node == null) { return Ajb; } if(node.nodeType == 3) { Ilb = node.nodeValue.length - 1; } else { Ilb = 0; if(node.tagName.toLowerCase() =="math") { return Ajb; } } } } if(node.nodeType == 3) { var XJb = node.nodeValue.charAt(Ilb); if(XJb =='.'|| XJb =='!'|| XJb =='?'|| XJb ==':') { if(Ilb > 0) { --Ilb; } else { node = wJb(node, true, cSb); if(node == null) { return Ajb; } if(node.nodeType == 3) { Ilb = node.nodeValue.length - 1; } else { Ilb = 0; if(node.tagName.toLowerCase() =="math") { return Ajb; } } } } } var mJb = node; var nJb = Ilb; var ySb = node; var bJb = Ilb; var cUb = false; var pJb =' '; while(!cUb) { if(ySb.nodeType == 3) { var Kjb = ySb.nodeValue; if(Kjb.length > 0) { if(bJb == -1) { bJb = Kjb.length; } Kjb = Kjb.replace(/[\x21\x3f\x3a]/g,"."); var Rnb = Kjb.lastIndexOf(".", bJb); while(Rnb > -1) { if(Mxa(Kjb, Rnb, ySb)) { if(Rnb < Kjb.length - 1) { mJb = ySb; nJb = Rnb + 1; cUb = true; break; } else { if(!lra(pJb)) { cUb = true; break; } } } if(Rnb == 0) { Rnb = -1; } else { Rnb = Kjb.lastIndexOf(".", Rnb - 1); } } if(cUb) { break; } if(Kjb.trimTH().length > 0) { mJb = ySb; nJb = 0; } pJb = Kjb.charAt(0); } } else { if(dFb(ySb) && ySb.getAttribute("ignore") == null) { if(ySb.tagName.toLowerCase() =="math") { cUb = true; break; } mJb = ySb; nJb = 0; } } ySb = NIb(ySb, true, cSb); bJb = -1; if(ySb == null) { cUb = true; break; } if(ySb.nodeType == 3 && qFb(ySb) != null) { ySb = qFb(ySb); if(ySb == null) { cUb = true; break; } } } if(mJb.nodeType == 3) { var Kjb = mJb.nodeValue; if(nJb < Kjb.length) { while(nJb < Kjb.length) { if(Hsa(Kjb.charAt(nJb))) { ++nJb; } else { break; } } } } return new THCaret(mJb, nJb, true);}function hJb(Ajb, cSb){ if(typeof(cSb) =="undefined") { cSb = null; } if(Ajb == null || Ajb.node == null) { return null; } var mNb = Ajb.node; var lJb = Ajb.offset; var mJb = mNb; var nJb = lJb; var cUb = false; var pJb =' '; while(!cUb) { if(mNb.nodeType == 3) { var Kjb = mNb.nodeValue; if(Kjb.length > 0) { if(pJb =='.') { var rJb = Kjb.charAt(lJb); if(!lra(rJb)) { cUb = true; break; } } Kjb = Kjb.replace(/[\x21\x3f\x3a]/g,"."); var Rnb = Kjb.indexOf(".", lJb); while(Rnb > -1) { if(Mxa(Kjb, Rnb, mNb)) { if(Rnb < Kjb.length - 1) { mJb = mNb; nJb = Rnb + 1; cUb = true; } break; } lJb = Rnb + 1; Rnb = Kjb.indexOf(".", lJb); } if(cUb) { break; } if(Kjb.trimTH().length > 0) { mJb = mNb; nJb = Kjb.length; } pJb = Kjb.charAt(Kjb.length -1); if(pJb =='.') { if(!Mxa(Kjb, Kjb.length -1, mNb)) { pJb =' '; } } } mNb = UIb(mNb, true, cSb); } else { if(dFb(mNb) && mNb.getAttribute("ignore") == null) { if(mNb.tagName.toLowerCase() =="math") { cUb = true; break; } mJb = mNb; nJb = 0; mNb = vIb(mNb, true, cSb); } else { mNb = UIb(mNb, true, cSb); } } lJb = 0; if(mNb == null) { cUb = true; break; } } if(mJb.nodeType == 3) { var Kjb = mJb.nodeValue; if(nJb > 0 && nJb <= Kjb.length) { while(nJb > 0) { if(Hsa(Kjb.charAt(nJb - 1))) { --nJb; } else { break; } } } } return new THCaret(mJb, nJb, false);}function wJb(Wjb, uKb, cSb){ var ySb = Wjb; var lTb = false; while (ySb != null && ySb != cSb) { ySb = NIb(ySb, uKb, cSb); if(ySb != null) { if (ySb.nodeType == 3 && ySb.parentNode.tagName.toLowerCase() !="textarea") { lTb = true; } if (ySb.nodeType == 1 && ySb.tagName.toLowerCase() =="math") { lTb = true; } else if(ySb.nodeType == 1 && ySb.tagName.toLowerCase() =="img") { var RNb = ySb.getAttribute("msg"); if (RNb != null && RNb.length > 0) { lTb = true; } } if(lTb) { return ySb; } } } return null;}function FKb(Wjb, uKb, cSb){ var ySb = Wjb; while(ySb != null && ySb != cSb) { ySb = wJb(ySb, uKb, cSb); if(ySb != null) { var fKb = (ySb.nodeType == 3)? ySb.nodeValue.trimTH() : ySb.getAttribute("msg").trimTH(); if(Ssa(fKb)) { return ySb; } } } return null;}function MKb(Wjb, uKb, cSb, rKb){ var ySb = (rKb)? wJb(Wjb, uKb, cSb) : FKb(Wjb, uKb, cSb); while(ySb != null && ySb.nodeType != 3 && ySb != cSb) { if(ySb.tagName.toLowerCase() =="math") { break; } ySb = (rKb)? wJb(ySb, uKb, cSb) : FKb(ySb, uKb, cSb); } return ySb;}function XKb(Wjb, uKb, cSb){ var mNb = Wjb; var lTb = false; while (mNb != null && mNb != cSb) { mNb = UIb(mNb, uKb, cSb); if(mNb != null) { if (mNb.nodeType == 3 && mNb.parentNode.tagName.toLowerCase() !="textarea") { lTb = true; } if (mNb.nodeType == 1 && mNb.tagName.toLowerCase() =="math") { lTb = true; } else if(mNb.nodeType == 1 && mNb.tagName.toLowerCase() =="img") { var RNb = mNb.getAttribute("msg"); if (RNb != null && RNb.length > 0) { lTb = true; } } if(lTb) { return mNb; } } } return null;}function gKb(Wjb, uKb, cSb){ var mNb = Wjb; while(mNb != null && mNb != cSb) { mNb = XKb(mNb, uKb, cSb); if(mNb != null) { var fKb; if(mNb.nodeType == 3) { fKb = mNb.nodeValue.trimTH(); } else { if(mNb.tagName.toLowerCase() =="img") { fKb = mNb.getAttribute("msg").trimTH(); } else if(mNb.tagName.toLowerCase() =="math") { fKb = PQb(mNb); } } if(Ssa(fKb)) { return mNb; } } } return null;}function nKb(Wjb, uKb, cSb, rKb){ var mNb = (rKb)? XKb(Wjb, uKb, cSb) : gKb(Wjb, uKb, cSb); while(mNb != null && mNb.nodeType != 3 && mNb != cSb) { if(mNb.tagName.toLowerCase() =="math") { break; } mNb = (rKb)? XKb(mNb, uKb, cSb) : gKb(mNb, uKb, cSb); } return mNb;}function CLb(cVb){ var pLb = BJb(cVb, true); var Pgb = new THCaret(pLb, 0, true); var Qgb = hJb(Pgb, cVb); Pgb = TJb(Qgb, cVb); if(Pgb == null || Qgb == null) { return null; } var wab = new Bka(Pgb, Qgb); var LLb = false; while(!LLb) { LLb = csa(wab) && GMb(wab); if(!LLb) { var MLb = hLb(wab, cVb); if(MLb == null || (Qgb.node == MLb.Qgb.node && Qgb.offset == MLb.Qgb.offset) || (Pgb.node == MLb.Pgb.node && Pgb.offset == MLb.Pgb.offset)) { break; } else { wab = MLb; } } } return wab;}function NLb(cVb){ var pLb = FJb(cVb, true); var Qgb; if(pLb.nodeType == 3) { Qgb = new THCaret(pLb, pLb.nodeValue.length, false); } else { Qgb = new THCaret(pLb, -1, false); } var Pgb = TJb(Qgb, cVb); Qgb = hJb(Pgb, cVb); if(Pgb == null || Qgb == null) { return null; } var wab = new Bka(Pgb, Qgb); var LLb = false; while(!LLb) { LLb = csa(wab) && GMb(wab); if(!LLb) { var MLb = tLb(wab, cVb); if(MLb == null || (Qgb.node == MLb.Qgb.node && Qgb.offset == MLb.Qgb.offset) || (Pgb.node == MLb.Pgb.node && Pgb.offset == MLb.Pgb.offset)) { break; } else { wab = MLb; } } } return wab;}function ULb(Ajb){ var Qgb = hJb(Ajb); var Pgb = TJb(Qgb); if(Pgb == null || Qgb == null) { return null; } return new Bka(Pgb, Qgb);}function bLb(Ajb){ var Qgb = hJb(Ajb); var XLb = CBb(Ajb.node); var YLb = OBb(Ajb.node, Qgb.node, XLb); if(YLb != null) { Qgb = YLb; } var Pgb = TJb(Qgb); XLb = CBb(Pgb.node); var aLb = TBb(Pgb.node, Qgb.node, XLb); if(aLb != null) { Pgb = aLb; } if(Pgb == null || Qgb == null) { return null; } return new Bka(Pgb, Qgb);}function fLb(gLb,MGb){ var Pgb = TJb(gLb, null); var Qgb = hJb(MGb, null); if(Pgb == null || Qgb == null) { return null; } return new Bka(Pgb, Qgb);}function hLb(HMb, cSb){ if(HMb == null) { return null; } if(typeof(cSb) =="undefined") { cSb = null; } var oNb = HMb.Qgb.node; var xLb = HMb.Qgb.offset; if(xLb == uja) { oNb = vIb(oNb, false, cSb); xLb = 0; } var Qgb; var Pgb; while(oNb != null) { if(oNb.nodeType == 3 && xLb < oNb.nodeValue.length) { Qgb = hJb( new THCaret(oNb, xLb, false), cSb); if(Qgb == null) { return null; } if(Qgb.node == oNb && Qgb.offset == xLb) { var pLb = gKb(oNb, false, cSb); if(pLb == null) { return null; } Qgb = hJb(new THCaret(pLb, 0, false), cSb); } } else { var pLb = gKb(oNb, false, cSb); if(pLb == null) { return null; } Qgb = hJb(new THCaret(pLb, 0, false), cSb); } Pgb = TJb(Qgb, null); if(Pgb == null) { return null; } if(HMb.Pgb.node != Pgb.node || HMb.Pgb.offset != Pgb.offset) { var wab = new Bka(Pgb, Qgb); if(GMb(wab) && csa(wab)) { return wab ; } } oNb = Qgb.node; if(oNb.nodeType == 3) { var egb = oNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var BMb = egb.indexOf(".", Qgb.offset + 1); if(BMb == -1) { xLb = egb.length; } else { xLb = BMb; } } } return null;}function tLb(HMb, cSb){ if(typeof(cSb) =="undefined") { cSb = null; } var oNb = HMb.Pgb.node; var xLb = HMb.Pgb.offset; var Pgb; var Qgb; while(oNb != null) { if(oNb.nodeType == 3) { var egb = oNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var BMb; if(xLb > 0) { BMb = egb.lastIndexOf(".", xLb); } else if(xLb == 0) { BMb = -1; } else { BMb = egb.lastIndexOf("."); } while(BMb > -1) { xLb = BMb; Qgb = hJb(new THCaret(oNb, xLb, true), cSb); if(Qgb == null) { return null; } if(Qgb.node != HMb.Qgb.node || Qgb.offset != HMb.Qgb.offset) { Pgb = TJb(Qgb, cSb); if(Pgb == null) { return null; } var wab = new Bka(Pgb, Qgb); if(GMb(wab) && csa(wab)) { return wab ; } } if(BMb == 0) { BMb = -1; } else { BMb = egb.lastIndexOf(".", BMb - 1); } } } xLb = -1; Rgb = MKb(oNb, true, cSb, false); if(Rgb != null) { oNb = Rgb; } else { oNb = FKb(oNb, false, cSb); if(oNb != null) { if(oNb.nodeType == 3) { Qgb = hJb(new THCaret(oNb, oNb.nodeValue.length, false), cSb); } else { Qgb = hJb(new THCaret(oNb, 0, false), cSb); } if(Qgb == null) { return null; } if(Qgb.node != HMb.Qgb.node || Qgb.offset != HMb.Qgb.offset) { Pgb = TJb(Qgb, cSb); if(Pgb == null) { return null; } return new Bka(Pgb, Qgb); } } } } return null;}function GMb(HMb){ var Kgb = HMb.Pgb.node; var ajb = Kgb.ownerDocument.body; while(Kgb != null && Kgb != ajb) { if(Kgb.nodeType == 1 && Kgb.getAttribute(caa) != null) { return false; } Kgb = Kgb.parentNode; } var Lgb = HMb.Qgb.node; if(Lgb != Kgb) { while(Lgb != null && Lgb != ajb) { if(Lgb.nodeType == 1 && Lgb.getAttribute(caa) != null) { return false; } Lgb = Lgb.parentNode; } } return true;}function LMb(Wjb){ var NMb; var OMb = Wjb; var Ujb = NIb(Wjb, true, null); while(Ujb != null) { NMb = false; if(Ujb.nodeType == 1) { if(dFb(Ujb)) { if(Ujb.getAttribute("ignore") != null) { NMb = true; } } else { NMb = true; } } else if(Ujb.nodeType == 3) { if(Ujb.nodeValue.trimTH().length == 0) { NMb = true; } } if(!NMb) { OMb = Ujb; } Ujb = NIb(Ujb, true, null); } return OMb;}function QMb(Wjb){ var NMb; var OMb = Wjb; var pUb = UIb(Wjb, true, null); while(pUb != null) { NMb = false; if(pUb.nodeType == 1) { if(dFb(pUb)) { if(pUb.getAttribute("ignore") != null) { NMb = true; } } else { NMb = true; } } else if(pUb.nodeType == 3) { if(pUb.nodeValue.trimTH().length == 0) { NMb = true; } } if(!NMb) { OMb = pUb; } pUb = UIb(pUb, true, null); } return OMb;}function VMb(Wjb, Anb){ if(Wjb == null || Wjb.nodeType != 3 || Wjb.parentNode == null) { return Wjb; } var SMb = 0; var Ikb = Wjb.parentNode; var UMb = Ikb.parentNode; if(UMb != null && Ikb.tagName.toLowerCase() =="span"&& UMb.tagName.toLowerCase() =="span"&& Ikb.getAttribute(daa) != null && (UMb.getAttribute(daa) != null || UMb.getAttribute(eaa) != null)) { SMb = 2; if(Wjb.nextSibling != null || Wjb.previousSibling != null) { SMb = 1; } } else if(Ikb.tagName.toLowerCase() =="span"&& (Ikb.getAttribute(daa) != null || Ikb.getAttribute(eaa) != null)) { SMb = 1; } if(Wjb.nodeValue.length == 0 || Anb <= 0 || Anb >= Wjb.nodeValue.length) { if(SMb == 0) { var span = document.createElement("span"); span.setAttribute(daa,"1"); var eMb = document.createElement("span"); eMb.setAttribute(daa,"1"); Ikb.insertBefore(span, Wjb); span.appendChild(eMb); eMb.appendChild(Wjb); } else if(SMb == 1) { var span = document.createElement("span"); span.setAttribute(daa,"1"); Ikb.insertBefore(span, Wjb); span.appendChild(Wjb); } return Wjb; } var Kjb = Wjb.nodeValue; var Umb = Kjb.substring(0, Anb); var dMb = Kjb.substring(Anb); var eMb = document.createElement("span"); var fMb = document.createElement("span"); var gMb = document.createTextNode(Umb); var hMb = document.createTextNode(dMb); eMb.appendChild(gMb); fMb.appendChild(hMb); eMb.setAttribute(daa,"1"); fMb.setAttribute(daa,"1"); if(SMb == 2) { UMb.insertBefore(fMb, Ikb); UMb.insertBefore(eMb, fMb); UMb.removeChild(Ikb); } else if(SMb == 1) { Ikb.insertBefore(eMb, Wjb); Ikb.insertBefore(fMb, Wjb); Ikb.removeChild(Wjb); } else { var span = document.createElement("span"); span.setAttribute(daa,"1"); span.appendChild(eMb); span.appendChild(fMb); Ikb.insertBefore(span, Wjb); Ikb.removeChild(Wjb); } return hMb;}function kMb(Wjb){ if(Wjb.nodeType != 1) { return Wjb.nodeType == 3; } var Xjb = Wjb.tagName.toLowerCase().trimTH(); if(Xjb =="font") { var Okb = Wjb.getAttribute("started"); if(Okb != null && Okb =="1") { return false; } } if(Xjb =="span"&& Wjb.getAttribute("texthelpSkip") != null) { return false; } return (pfa.indexOf("~"+Xjb+"~") > -1);}function oMb(Wjb){ if(Wjb == null) { return true; } if(Wjb.nodeType != 1) { return Wjb.nodeType != 3; } var pSb; pSb = Wjb.getAttribute("ignore"); if(pSb != null) { return true; } pSb = Wjb.getAttribute(aba); if(pSb != null && Ica) { return true; } if(Pga) { var qMb = xPb(Wjb); if(qMb != null) { if(qMb.visibility =="hidden"|| qMb.display =="none") { return true; } } } var Xjb = Wjb.tagName.toLowerCase(); return Xjb =="link"|| Xjb =="area"|| Xjb =="script"|| Xjb =="noscript"|| Xjb =="annotation"|| Xjb =="style"|| Xjb =="!--"|| Xjb =="title"|| Xjb =="html:script"; }function wMb(Wjb){ if(Wjb == null) { return true; } var ajb = Wjb.ownerDocument.body; var Rgb = Wjb; while(Rgb != null) { if(oMb(Rgb)) { return true; } if(Rgb==ajb) { break; } Rgb = Rgb.parentNode; } return false;}function yMb(Wjb){ if(Wjb != null && Wjb.nodeType == 3) { Wjb = Wjb.parentNode; } if(Wjb == null) { return true; } var ajb = Wjb.ownerDocument.body; var Rgb = Wjb; while(Rgb != null && Rgb.nodeType == 1) { if(Rgb.getAttribute("ignore") != null) { return true; } if(Rgb==ajb) { break; } Rgb = Rgb.parentNode; } return false;}function BNb(nUb){ if(nUb.nodeType != 1) { return false; } var Xjb = nUb.tagName.toLowerCase().trimTH(); return (nfa.indexOf("~"+ Xjb +"~") > -1);}function DNb(Wjb){ var Kjb =""; if(Wjb.nodeType == 3) { if(oMb(Wjb.parentNode) == false && Wjb.parentNode.tagName.toLowerCase() !="textarea") { Kjb = Wjb.nodeValue; } } else if(Wjb.nodeType == 1) { if(Wjb.getAttribute("ignore") != null) { Kjb =""; cUb = true; } else { var sNb = Wjb.tagName.toLowerCase(); var cUb = false; if(sNb =="img") { var RNb = Wjb.getAttribute("msg"); if(RNb != null && RNb.trimTH().length > 0) { Kjb =" "+ RNb.trimTH() +" "; } cUb = true; } else if(sNb =="span") { var RNb = Wjb.getAttribute("pron"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); cUb = true; } } else if(sNb =="acronym"|| sNb =="abbr") { var RNb = Wjb.getAttribute("pron"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); } else { RNb = Wjb.getAttribute("title"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); cUb = true; } } } else if(sNb =="math") { Kjb = PQb(Wjb); } } if(!cUb) { var KNb = Wjb.firstChild; while(KNb != null) { Kjb += DNb(KNb); KNb = KNb.nextSibling; } } } return Kjb;}function MNb(Wjb){ var Kjb =""; if(Wjb.nodeType == 3) { if(!oMb(Wjb.parentNode) && Wjb.parentNode.tagName.toLowerCase() !="textarea") { Kjb = Wjb.nodeValue; } } else if(Wjb.nodeType == 1) { if(Wjb.getAttribute("ignore") != null) { Kjb =""; } else { var sNb = Wjb.tagName.toLowerCase(); if(sNb =="img") { var RNb = Wjb.getAttribute("msg"); if(RNb != null && RNb.trimTH().length > 0) { Kjb =" "+ RNb.trimTH() +" "; } } else if(sNb =="span") { var RNb = Wjb.getAttribute("pron"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); } RNb = Wjb.getAttribute("chunk"); if(RNb != null && RNb =="1") { Kjb = Wjb.innerHTML; } } else if(sNb =="acronym"|| sNb =="abbr") { var RNb = Wjb.getAttribute("pron"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); } else { RNb = Wjb.getAttribute("title"); if(RNb != null && RNb.trimTH().length > 0) { Kjb = RNb.trimTH(); } } } else if(sNb =="math") { Kjb = PQb(Wjb); } } } return Kjb;}function rw_getTextOverRange(cVb, UNb, VNb){ try { if(UNb == null || VNb == null) { return""; } var Ghb = JPb(cVb, UNb.path, UNb.offset, VNb.path, VNb.offset); return rw_getTextOverCaretRange(Ghb); } catch(err) { Qra("Error rw_getTextOverRange: "+ err.message); return""; }}function rw_getTextOverCaretRange(iNb){ try { if(iNb == null || iNb.Pgb == null || iNb.Qgb == null) { return""; } var Pgb = iNb.Pgb; var Qgb = iNb.Qgb; var ySb = Pgb.node; var mNb = Qgb.node; var dNb = true; var oNb = ySb; var Kjb =""; while(oNb != null) { var Vhb = MNb(oNb); if(Vhb != null && Vhb !="") { if(oNb == mNb && Qgb.offset > -1) { Vhb = Vhb.substring(0, Qgb.offset); } if(oNb == ySb && Pgb.offset > -1) { Vhb = Vhb.substring(Pgb.offset); } Kjb += Vhb; } if(dNb) { oNb = hIb(oNb, false, mNb); } else { oNb = XKb(oNb, false, mNb); } dNb = false; } return Kjb.trimTH(); } catch(err) { Qra("Error rw_getTextOverCaretRange: "+ err.message); return""; }}function hNb(iNb){ try { if(iNb == null || iNb.Pgb == null || iNb.Qgb == null) { return""; } var Pgb = iNb.Pgb; var Qgb = iNb.Qgb; var ySb = Pgb.node; var mNb = Qgb.node; var nNb = false; var oNb = ySb; var Kjb =""; while(oNb != null) { nNb = dFb(oNb); if(nNb || oNb.nodeType == 3) { var Vhb = MNb(oNb); if(Vhb != null && Vhb !="") { if(oNb == mNb && Qgb.offset > -1) { Vhb = Vhb.substring(0, Qgb.offset); } if(oNb == ySb && Pgb.offset > -1) { Vhb = Vhb.substring(Pgb.offset); } Kjb += Vhb; } } if(nNb) { oNb = vIb(oNb, false, mNb); } else { oNb = UIb(oNb, false, mNb); } } return Kjb.trimTH(); } catch(err) { Qra("Error rw_getTextOverCaretRange: "+ err.message); return""; }}function uNb(nUb){ var chb = null; var sNb = nUb.tagName.toLowerCase(); var Zkb = MOb(nUb); if(sNb =="input") { var gZb = nUb.getAttribute("type"); if(gZb != null) { gZb = gZb.toLowerCase(); } var PXb =""; if(gZb == null || gZb.equalsTH("") || gZb.equalsTH("text")) { PXb = nUb.value; } else if(gZb.equalsTH("password")) { PXb ="Masked password field"; } else if(gZb.equalsTH("image")) { PXb =""; } else if(gZb.equalsTH("button") || gZb.equalsTH("submit") || gZb.equalsTH("reset")) { PXb = nUb.getAttribute("value"); } if(PXb.equalsTH("") == false) { chb ="form:"+ Zkb +";"+ PXb; } } else if(sNb =="select") { var PXb =""; var NTb = nUb.selectedIndex; var OTb =""; for(var yeb = 0; yeb < nUb.options.length; yeb++) { OTb += nUb.options[yeb].text +" "; } if(OTb.equalsTH("") == false) { if(NTb > -1) { PXb = nUb.options[NTb].text; PXb +=" selected from the list "+ OTb; } else { PXb ="No selection from the list "+ OTb; } chb ="form"+ Zkb +";"+ PXb; } } else if(sNb =="textarea") { var PXb = nUb.value; chb ="form"+ Zkb +";"+ PXb; } else if(sNb =="option") { var PXb = nUb.value; chb ="form"+ Zkb +";"+ PXb; } return chb;}function EOb(evt){ var GOb; if(Cfa) { GOb = evt.srcElement; } else if(Mfa) { GOb = evt.target; } else { GOb = evt.target; } return GOb;}function HOb(evt){ var Jlb = null; var GOb; if(Cfa) { GOb = evt.srcElement; if(GOb.nodeType == 1 && GOb.tagName.toLowerCase() =="textarea") { } else { Jlb = rw_getTargetNodeAsCaretIE(evt, true); if(Jlb != null) { if(Jlb.node == null || Jlb.node.parentNode == null || Jlb.node.parentNode != GOb) { Jlb = null; return null; } else { if(Jlb.node.nodeType == 3) { Jlb.node = aqa(Jlb.node); } } } } } else if(Mfa) { GOb = evt.target; if(GOb != null) { if(TDb) { if(GOb.firstChild != null && GOb.firstChild.nodeType == 3 && GOb.tagName.toLowerCase() !="textarea") { var iUb = GOb.firstChild.nodeValue; if(iUb.trimTH().length > 0) { GOb = GOb.firstChild; } } } else if(SDb) { if(evt.fromElement != null && GOb.nodeType == 1 && GOb.tagName.toLowerCase() !="textarea") { if(evt.fromElement.nodeType == 3) { GOb = evt.fromElement; } } else { if(GOb.nodeType == 1 && GOb.firstChild != null && GOb.firstChild.nodeType == 3 && GOb.tagName.toLowerCase() !="textarea") { var iUb = GOb.firstChild.nodeValue; if(iUb.trimTH().length > 0) { GOb = GOb.firstChild; } } } } } } else { if(evt.explicitOriginalTarget.nodeValue != null) { if(evt.target.tagName.toLowerCase() =="textarea") { GOb = evt.target; } else { GOb = evt.explicitOriginalTarget; var XRb = window.getSelection(); if(XRb.anchorNode == null || XRb.anchorNode != GOb) { return null; } else { Jlb = new THCaret(XRb.anchorNode, XRb.anchorOffset, true); } } } else { GOb = evt.target; } } if(Jlb == null && GOb != null) { Jlb = new THCaret(GOb, 0, true); } return Jlb;}function MOb(NOb){ var Zkb =""; var OOb = 0; var POb =""; if(NOb != null && NOb.ownerDocument != null) { var fOb = false; var eOb = false; var ajb = NOb.ownerDocument.body; while(NOb != null && NOb != ajb) { if(dFb(NOb)) { Zkb =""; } fOb = (NOb.nodeType == 3) || (NOb.nodeType == 1 && NOb.tagName =="FONT"&& NOb.getAttribute("rwstate") != null); var nUb = NOb.previousSibling; while(nUb != null) { eOb = (nUb.nodeType == 3) || (nUb.nodeType == 1 && nUb.tagName =="FONT"&& nUb.getAttribute("rwstate") != null); if(fOb && eOb) { } else { ++OOb; } nUb = nUb.previousSibling; fOb = eOb; } Zkb = Zkb + OOb +"~"; OOb = 0; NOb = NOb.parentNode; if(NOb != null && NOb.getAttribute != null && NOb.tagName != null) { var UOb = NOb.getAttribute("chunk"); if(NOb.tagName.toLowerCase() =="span"&& UOb =="1") { var VOb = MOb(NOb); POb ="#^th*"+ VOb +"#^th*"; } } } } return POb + Zkb;};function XOb(KPb, uOb){ var Jjb = KPb; if(uOb.lastIndexOf("*") > -1) { var Rnb = uOb.lastIndexOf("*"); uOb = uOb.substring(Rnb + 1); } var bOb = uOb.split("~"); var Nnb = bOb.length; var i; for(i = Nnb - 2; i > -1; i--) { Jjb = Jjb.firstChild; if(Jjb == null) { return null; } var dOb; if(bOb[i].length == 0) { dOb = 0; } else { dOb = parseInt(bOb[i], 10); } var eOb = false; var fOb = (Jjb.nodeType == 3) || (Jjb.nodeType == 1 && Jjb.tagName =="FONT"&& Jjb.getAttribute("rwstate") != null); while(dOb > 0) { Jjb = Jjb.nextSibling; if(Jjb == null) { return null; } eOb = (Jjb.nodeType == 3) || (Jjb.nodeType == 1 && Jjb.tagName =="FONT"&& Jjb.getAttribute("rwstate") != null); if(eOb && fOb) { } else { --dOb; fOb = eOb; } } } return Jjb;}function pOb(KPb, uOb, Anb, GPb){ try { if(KPb == null) { return null; } var Jjb = XOb(KPb, uOb); if(dFb(Jjb)) { if(jFb(Jjb)) { if(GPb) { var Kgb = BJb(Jjb, false); if(Kgb != null) { return new THCaret(Kgb, 0, GPb); } else { return new THCaret(Jjb, 0, GPb); } } else { var Lgb = FJb(Jjb, false); if(Lgb != null) { if(Lgb.nodeType == 3) { return new THCaret(Lgb, Lgb.length, GPb); } else { return new THCaret(Lgb, 0, GPb); } } else { return new THCaret(Jjb, 0, GPb); } } } else { return new THCaret(Jjb, 0, GPb); } } var Ilb = 0; if(GPb == false) { ++Ilb; } if(Anb > -1) { if(Jjb == null) { return null; } var lTb = false; var Lgb = Jjb.parentNode; var mOb = Jjb; var egb; while(lTb == false) { if(Jjb.nodeType == 3) { egb = Jjb.nodeValue; if(Anb < (Ilb + egb.length)) { lTb = true; break; } mOb = Jjb; Ilb += Jjb.nodeValue.length; Jjb = UIb(Jjb, false, Lgb); } else if(Jjb.nodeType == 1) { if(dFb(Jjb)) { var oOb = Anb - Ilb; if(oOb > 0) { Ilb += 1; } else { lTb = true; break; } Jjb = vIb(Jjb, false, Lgb); } else { Jjb = UIb(Jjb, false, Lgb); } } if(Jjb == null || Jjb == Lgb) { if(mOb != null) { Jjb = mOb; if(Jjb.nodeType == 3) { Ilb = Anb - Jjb.nodeValue.length; } else { Ilb = 0; } if(!GPb) { ++Ilb; } break; } else { return null; } } } if(GPb) { return new THCaret(Jjb, Anb - Ilb, GPb); } else { return new THCaret(Jjb, Anb - (Ilb - 1), GPb); } } else { return new THCaret(Jjb, Anb, GPb); } } catch(err) { Qra("getCaretFromDomPosition error: "+ err); return null; }}function JPb(KPb, OPb, PPb, QPb, RPb){ var Pgb = pOb(KPb, OPb, PPb, true); var Qgb; if(OPb == QPb && PPb >= RPb) { Qgb = Pgb; } else { Qgb = pOb(KPb, QPb, RPb, false); } return new Bka(Pgb, Qgb);}function SPb(Wjb){ if(Wjb == null) { return""; } if(Wjb.className) { return Wjb.className; } else { return Wjb.getAttribute("class"); }}function UPb(kPb, fPb, RUb, nPb, ZPb){ if(Jfa) { return dPb("<"+ kPb +" name='"+ ZPb +"'>", fPb, RUb, nPb); } else { var oRb = dPb(kPb, fPb, RUb, nPb); oRb.setAttribute("name",ZPb); oRb.name = ZPb; return oRb; }}function dPb(kPb, fPb, RUb, nPb){ var iPb = document.createElement(kPb); if(RUb != null) { iPb.id = RUb; } if(nPb != null) { iPb.className = nPb; } if(fPb != null) { var Nnb = fPb.length; if(Jfa) { for(var i = 0; i < Nnb; i += 2) { if(fPb[i] =="style") { pPb(iPb, fPb[i + 1]); } else { iPb.setAttribute(fPb[i], fPb[i + 1]); } } } else { for(var i = 0; i < Nnb; i += 2) { iPb.setAttribute(fPb[i], fPb[i + 1]); } } } return iPb;}function jPb(kPb, lPb, RUb, nPb){ var iPb = document.createElement(kPb); if(RUb != null) { iPb.id = RUb; } if(nPb != null) { iPb.className = nPb; } if(lPb != null) { if(Jfa) { for(var i in lPb) { if(i =="style") { pPb(iPb, lPb[i]); } else { iPb.setAttribute(i, lPb[i]); } } } else { for(var i in lPb) { iPb.setAttribute(i, lPb[i]); } } } return iPb;}function pPb(p_theObj, rPb){ var oPb = rPb.indexOf(":"); var sPb = rPb.indexOf(";", oPb); var tPb; var PXb; var chb = rPb; while(oPb > -1) { tPb = chb.substring(0, oPb); if(sPb > -1) { PXb = chb.substring(oPb + 1, sPb); chb = chb.substr(sPb + 1); oPb = chb.indexOf(":"); sPb = chb.indexOf(";", oPb); } else { PXb = chb.substr(oPb + 1); oPb = -1; } if(Cfa) { if(tPb ==" background-position") { tPb =" backgroundPosition"; } } eval("p_theObj.style."+ tPb +"=\""+ PXb +"\";"); }}function xPb(fbb){ if(Jfa) { return fbb.currentStyle; } else { return window.getComputedStyle(fbb, null); }}function DQb(KQb, LQb){ var element = document.createElement(LQb); element.innerHTML = KQb; document.body.appendChild(element);}function JQb(KQb, LQb, NQb){ var element = document.createElement(LQb); var Nnb = NQb.length; for(i = 0; i < Nnb; i += 2) { element.setAttribute(NQb[i], NQb[i + 1]); } element.innerHTML = KQb; document.body.appendChild(element);}function PQb(Wjb){ if(Wjb.previousSibling != null || Wjb.nextSibling != null) { var OQb = document.createElement("span"); Wjb.parentNode.replaceChild(OQb, Wjb); OQb.appendChild(Wjb); } if(Cfa) { var UTb = Wjb.outerHTML; if(UTb == null) { return""; } else { if(UTb.indexOf("<?import namespace") > -1) { var n = UTb.indexOf("/>"); if(n > -1) { UTb = UTb.substring(n + 2); UTb = UTb.replace(/m:/gi,""); } } return UTb; } } else { var UTb = Wjb.parentNode.innerHTML; if(UTb != null && UTb.length > 0) { return UTb; } else { return""; } }}function TQb(o, p, q){ function r(a) { var b; if(typeof DOMParser !="undefined") { b = (new DOMParser()).parseFromString(a,"application/xml"); } else { var c = ["MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]; for(var i = 0; i < c.length && !b; i++) { try { b = new ActiveXObject(c[i]); b.loadXML(a); } catch(e) { } } } return b; } function s(a, b, c) { a[b] = function() { return eval(c); }; } function t(b, c, d) { if(typeof d =="undefined") { d = 1; } if(d > 1) { if(c.nodeType == 1) { var e = document.createElement(c.nodeName); var f = {}; for(var a = 0,g = c.attributes.length; a < g; a++) { var h = c.attributes[a].name,k = c.attributes[a].value,l = (h.substr(0, 2) =="on"); if(l) { f[h] = k; } else { switch(h) { case"class":e.className = k;break;case"for":e.htmlFor = k;break;default:e.setAttribute(h, k); } } } b = b.appendChild(e); for(l in f) { s(b, l, f[l]); } } else if(c.nodeType == 3) { var m = (c.nodeValue ? c.nodeValue :""); var n = m.replace(/^\s*|\s*$/g,""); if(n.length < 7 || (n.indexOf("<!--") != 0 && n.indexOf("-->") != (n.length - 3))) { b.appendChild(document.createTextNode(m)); } } } for(var i = 0,j = c.childNodes.length; i < j; i++) { t(b, c.childNodes[i], d + 1); } } p ="<root>"+ p +"</root>"; var u = r(p); if(o && u) { if(q != false) { while(o.lastChild) { o.removeChild(o.lastChild); } } t(o, u.documentElement); }}function $rw_logMe(feb){ Qra(feb);}function $rw_alertMe(feb){ alert(feb);}function dQb(iQb){ if(!hda && iQb.frames && iQb.length>0) { var i; var Nnb = iQb.length; for(i = 0; i<Nnb; i++) { try { var dbb = iQb[i].getSelection(); if(dbb != null && !dbb.isCollapsed) { return iQb[i]; } else { if(iQb[1].length > 0) { var cQb = dQb(iQb[i]); if(cQb) { return cQb; } } } } catch(e) { } } } return null;}function fQb(iQb){ var ZRb = {}; var Vhb = dQb(iQb); if(Vhb!= null) { ZRb.aUb = Vhb; ZRb.YRb = Vhb.getSelection(); } return ZRb;}function hQb(iQb){ var ZRb = {}; var range; if(!hda && iQb.frames && iQb.length>0) { var i; var Nnb = iQb.length; for(i = 0; i<Nnb; i++) { try { var Deb = iQb[i]; range = Deb.document.selection.createRange(); if(range != null && range.text != null && range.text.length > 0) { ZRb.aUb = Deb; ZRb.SRb = range; break; } else { if(Deb.length > 0) { var cQb = hQb(Deb); if(cQb.SRb) { ZRb = cQb; break; } } } } catch(e) { } } } return ZRb;}function jQb(feb){ if(oca == 200) { feb = feb.replace(/\s+/g," "); } else { feb = feb.replace(/(\x3cbookmark\x20mark\x3d\x22(\d)+\x22\x2f\x3e)/g,""); feb = feb.replace(/[\s\xA0]+/g," "); } return uGb(feb);}function $rw_scholasticHashShort(p_asset){ var Kjb = p_asset.replace(/^0+|[^0-9]/g,""); return"0001".substring(0, 4-Kjb.length) + Kjb.substring(0, 4);}function $rw_scholasticHash(p_asset){ var Kjb = p_asset.replace(/^0+|[^0-9]/g,""); if(Kjb.length < 4) { Kjb ="0001".substring(0, 4-Kjb.length) + Kjb; } else { Kjb = Kjb.substring(0, 4); } return Kjb;}function rw_getDisplayWidth(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nW = (VUb.innerWidth) ? VUb.innerWidth : VUb.document.body.offsetWidth; return nW;}function rw_getDisplayWidthAdjusted(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nW = ((VUb.innerWidth) ? VUb.innerWidth : VUb.document.body.offsetWidth) - rw_getScrollBarWidth(VUb); return nW;}function rw_getDocumentDisplayWidth(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nW = (VUb.innerWidth) ? VUb.innerWidth : VUb.document.documentElement.offsetWidth; return nW;}function rw_getDocumentDisplayWidthAdjusted(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nW = ((VUb.innerWidth) ? VUb.innerWidth : VUb.document.documentElement.offsetWidth) - rw_getScrollBarWidth(VUb); return nW;}function rw_getDisplayHeight(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(Afa) { return rw_getDocumentDisplayHeight(VUb); } else { var nH = (VUb.innerHeight) ? VUb.innerHeight : VUb.document.body.offsetHeight; return nH; }}function rw_getDisplayHeightAdjusted(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(Afa) { return rw_getDocumentDisplayHeightAdjusted(VUb); } else { var nH = ((VUb.innerHeight) ? VUb.innerHeight : VUb.document.body.offsetHeight ) - rw_getScrollBarHeight(VUb); return nH; }}function rw_getDocumentDisplayHeight(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nH = (VUb.innerHeight) ? VUb.innerHeight : VUb.document.documentElement.offsetHeight; return nH;}function rw_getDocumentDisplayHeightAdjusted(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } var nH = ((VUb.innerHeight) ? VUb.innerHeight : VUb.document.documentElement.offsetHeight) - rw_getScrollBarHeight(VUb); return nH;}function DRb(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(VUb.document.compatMode =="CSS1Compat"&& VUb.document.body.parentNode && VUb.document.body.parentNode.scrollLeft) { return VUb.document.body.parentNode.scrollLeft; } var n = (VUb.pageXOffset) ? VUb.pageXOffset : (VUb.scrollX) ? VUb.scrollX : (VUb.document.body.scrollLeft) ? VUb.document.body.scrollLeft : (VUb.document.documentElement.scrollLeft)? VUb.document.documentElement.scrollLeft:0; return n;}function rw_getScreenOffsetLeft(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(VUb.pageXOffset && VUb.pageXOffset > 0) { return VUb.pageXOffset; } else if(VUb.document.body.scrollLeft && VUb.document.body.scrollLeft > 0) { return VUb.document.body.scrollLeft; } else if(VUb.document.documentElement.scrollLeft && VUb.document.documentElement.scrollLeft > 0) { return VUb.document.documentElement.scrollLeft; } return 0;}function rw_getScreenOffsetTop(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(VUb.pageYOffset && VUb.pageYOffset > 0) { return VUb.pageYOffset; } else if(VUb.document.body.scrollTop && VUb.document.body.scrollTop > 0) { return VUb.document.body.scrollTop; } else if(VUb.document.documentElement.scrollTop && VUb.document.documentElement.scrollTop > 0) { return VUb.document.documentElement.scrollTop; } return 0;}function JRb(kbb){ if(kbb.scrollLeft && kbb.scrollLeft > 0) { return kbb.scrollLeft; } if(kbb.tagName.toLowerCase() =="body"&& kbb.ownerDocument && kbb.ownerDocument.documentElement && kbb.ownerDocument.documentElement.scrollLeft) { return kbb.ownerDocument.documentElement.scrollLeft; } return 0;}function LRb(kbb){ if(kbb.scrollTop && kbb.scrollTop > 0) { return kbb.scrollTop; } if(kbb.tagName.toLowerCase() =="body"&& kbb.ownerDocument && kbb.ownerDocument.documentElement && kbb.ownerDocument.documentElement.scrollTop) { return kbb.ownerDocument.documentElement.scrollTop; } return 0;}function rw_getScrollBarWidth(VUb){ if(Cfa) { if(Afa) { return 20; } else { if(typeof(VUb) =="undefined") { VUb = window; } if(VUb.document.compatMode.equalsTH("CSS1Compat")) { return (VUb.document.documentElement.offsetWidth - VUb.document.documentElement.clientWidth); } else { return (VUb.document.body.offsetWidth - VUb.document.body.clientWidth); } } } else { if(window.scrollMaxY > 0 || Mfa) { return 18; } else { return 4; } }}function rw_getScrollBarHeight(VUb){ if(typeof(VUb) =="undefined") { VUb = window; } if(Cfa) { if(Afa) { return 20; } else { if(VUb.document.compatMode.equalsTH("CSS1Compat")) { return (VUb.document.documentElement.offsetHeight - VUb.document.documentElement.clientHeight); } else { return (VUb.document.body.offsetHeight - VUb.document.body.clientHeight); } } } else { if(VUb.scrollMaxX > 0) { return 18; } else { return 4; } }}function TRb(){ var aUb = null; var SRb = null; if (Jfa) {var range = document.selection.createRange(); if(range == null || range.text == null || range.text.length == 0) { var ZRb = hQb(window); if(ZRb.SRb) { aUb = ZRb.aUb; SRb = ZRb.SRb; } } else { aUb = window; SRb = range; } if(SRb != null) { var Oeb = SRb.duplicate(); Oeb.collapse(); var fkb = Oeb.parentElement(); if(yMb(fkb)) { SRb = null; } } if(SRb != null && SRb.parentElement() != null && SRb.parentElement().tagName.toLowerCase() =="input") { SRb = new String(SRb.text); } } else {if(Zia!=null) { aia.getSelection().addRange(Zia); } var XRb = window.getSelection(); var YRb = null; if(!XRb.isCollapsed) { aUb = window; YRb = XRb; } else { if(Zxa && Zxa.selectionStart != Zxa.selectionEnd) { return {frame:window, range:new String( Zxa.value.substring(Zxa.selectionStart, Zxa.selectionEnd) )}; } var ZRb = fQb(window); if(ZRb.YRb) { aUb = ZRb.aUb; YRb = ZRb.YRb; } } if(YRb == null) { return null; } if(YRb.anchorNode) { if(yMb(YRb.anchorNode)) { return null; } } if(YRb.focusNode && YRb.focusNode.id) { if(YRb.focusNode.id =="flashcontent") { return null; } } if(YRb.anchorNode != null && YRb.anchorNode == YRb.focusNode && YRb.anchorOffset == YRb.focusOffset) { return null; } var aRb = null; if(YRb.getRangeAt) { aRb = YRb.getRangeAt(0); } else { var range = Fra(); if(range != null) { if( YRb.anchorNode == YRb.focusNode && YRb.anchorOffset == YRb.focusOffset) { range = fqa(YRb); } else { range.setStart(YRb.anchorNode, YRb.anchorOffset); range.setEnd(YRb.focusNode, YRb.focusOffset); if(range.toString().length == 0) { range.setStart(YRb.focusNode, YRb.focusOffset); range.setEnd(YRb.anchorNode, YRb.anchorOffset); } } aRb = range; } } if(aRb != null) { var bRb = aRb.startContainer; var cRb = aRb.startOffset; var dRb = aRb.endContainer; var eRb = aRb.endOffset; if(bRb.nodeType != 3) { if(bRb.nodeType != 1) { return null; } else { if(cRb > 0) { if(bRb.hasChildNodes() && bRb.childNodes.length > cRb) { bRb = bRb.childNodes[cRb]; if(bRb.nodeType == 3) { cRb = 0; } else { cRb = 0; if(bRb.toString() =="[object HTMLEmbedElement]") { return null; } } } } } } if(dRb.nodeType != 3) { if(dRb.nodeType != 1) { return null; } else { if(dRb.hasChildNodes()) { if(dRb.childNodes.length > eRb) { dRb = dRb.childNodes[eRb]; } else { dRb = dRb.childNodes[eRb - 1]; if(dRb.nodeType != 3) { var Rgb = FJb(dRb, true); if(Rgb != null) { dRb = Rgb; } } } } if(dRb.nodeType != 3) { var gRb = NIb(bRb, true, null); var Rgb = wJb(dRb, true, gRb); if(Rgb != null) { dRb = Rgb; } } if(dRb.nodeType == 3) { eRb = dRb.nodeValue.length; } else { eRb = 0; } } } SRb = new Gla(bRb, cRb, dRb, eRb); } else { return null; } } if(aUb != null && SRb != null) { return {frame:aUb, range:SRb}; } else { return null; }}function jRb(){ var lRb = TRb(); if(lRb != null && lRb.range != null && !(lRb.range instanceof String)) { if(Jfa) { lRb.range = QVb(lRb.frame.document.body, lRb.range); } else if(lRb.range instanceof Gla) { lRb.range = EIb(lRb.range); } } return lRb;}function mRb(){ var oRb = TRb(); if(oRb != null) { var lRb = oRb.range; if(lRb instanceof String) { return lRb; } else if(lRb instanceof Gla) { return lRb.toString(); } else { return oRb.range.text; } } return"";}function uRb(Wjb){ try { var aUb = rw_getWindow(Wjb); if(aUb == null || Wjb == null || Wjb.parentNode == null) { return; } var x = 0; var y = 0; var oRb = Wjb; if(oRb.nodeType == 3) { oRb = oRb.parentNode; } var pRb = null; var qRb = oRb; var Vbb = oRb.ownerDocument.body; var sRb = false; var Wbb = null; while(qRb != null && qRb != Vbb) { if(qRb.tagName.toLowerCase() =="div"|| qRb.tagName.toLowerCase() =="form") { if(GSb(qRb)) { sRb = true; pRb = TSb(oRb, qRb, pRb); Wbb = qRb; oRb = qRb; } } qRb = qRb.parentNode; } if(Wbb != null) { oRb = Wbb; } while (oRb != null) { x += oRb.offsetLeft; y += oRb.offsetTop; oRb = oRb.offsetParent; } if(pRb != null) { y += pRb.y; x += pRb.x; } var wRb; var xRb; var yRb; var zRb; var ASb = 30; if (Wjb.nodeType == 3) { ASb = 10 + 5 * Wjb.nodeValue.length; if (ASb > 60) { ASb = 60; } } wRb = rw_getScreenOffsetLeft(aUb); xRb = rw_getScreenOffsetTop(aUb); if(typeof( aUb.innerWidth ) =='number') { yRb = aUb.innerWidth; zRb = aUb.innerHeight; } else if(aUb.document.documentElement.clientHeight > 0 && aUb.document.documentElement.clientWidth > 0) { yRb = aUb.document.documentElement.clientWidth; zRb = aUb.document.documentElement.clientHeight; } else { yRb = aUb.document.body.clientWidth; zRb = aUb.document.body.clientHeight; } yRb = yRb - ASb; zRb = zRb - 20; var BSb; var CSb; if(sRb) { } BSb = (x < wRb || x > (wRb + yRb)); CSb = (y < xRb || y > (xRb + zRb)); if (BSb || CSb && (x != 0 || y != 0)) { if (x > (wRb + yRb)) { x = (x + wRb) / 2; } if (y > (xRb + zRb)) { y = (y + xRb) / 2; } var DSb = $g_bMouseSpeech; if($g_bMouseSpeech) { $g_bMouseSpeech = false; } aUb.scrollTo((BSb?x:wRb), (CSb?y:xRb)); if(Pfa) { JCb(); LCb(); } if(DSb) { var ESb = function() { $g_bMouseSpeech = true; }; var FSb = setTimeout(ESb, 500); } } } catch(ignore) { thLogE(ignore); } g_bDidScroll = false;}function GSb(kbb){var Zbb = kbb.clientHeight; var abb = kbb.clientWidth; var bbb = xPb(kbb); var cbb = false; if(bbb != null && bbb.overflow !="visible"&& bbb.display !="inline") { if(kbb.scrollHeight > Zbb && bbb.overflowY !="visible") { cbb = true; } if(kbb.scrollWidth > abb && bbb.overflowX !="visible") { cbb = true; } } return cbb;}function TSb(Wjb, kbb, WSb){ var uab = 0; var vab = 0; var Zbb = kbb.clientHeight; var abb = kbb.clientWidth; var QSb = 0; var RSb = 0; var dbb = Wjb; while(dbb != kbb && dbb != null) { QSb += dbb.offsetTop; RSb += dbb.offsetLeft; dbb = aSb(dbb, kbb); } if(dbb == null) { RSb -= kbb.offsetLeft; QSb -= kbb.offsetTop; } if(WSb != null) { QSb += WSb.y; RSb += WSb.x; } if(kbb.scrollTop > QSb || (kbb.scrollTop + Zbb) < (QSb + Wjb.offsetHeight)) { if(Zbb > (Wjb.offsetHeight * 6)) { kbb.scrollTop = QSb - Wjb.offsetHeight; } else { kbb.scrollTop = QSb; } } if(kbb.scrollLeft > RSb || (kbb.scrollLeft + abb) < (RSb + Wjb.offsetWidth)) { kbb.scrollLeft = RSb; } uab = RSb - kbb.scrollLeft; vab = QSb - kbb.scrollTop; return {x:uab, y:vab};}function aSb(hjb, cSb){ var YSb = hjb; var ZSb = YSb.offsetParent; if(ZSb == null) { return null; } if(cSb == null) { return ZSb; } while(YSb != null && YSb != ZSb) { if(YSb == cSb) { return null; } YSb = YSb.parentNode; } return ZSb;}function eSb(){ var mdb =""+"rw_getDisplayWidth="+ rw_getDisplayWidth() +"  rw_getDisplayWidthAdjusted="+ rw_getDisplayWidthAdjusted() +"  rw_getDocumentDisplayWidth="+ rw_getDocumentDisplayWidth() +"  rw_getDocumentDisplayWidthAdjusted="+ rw_getDocumentDisplayWidthAdjusted() +"  rw_getDisplayHeight="+ rw_getDisplayHeight() +"  rw_getDisplayHeightAdjusted="+ rw_getDisplayHeightAdjusted() +"  rw_getDocumentDisplayHeight="+ rw_getDocumentDisplayHeight() +"  rw_getDocumentDisplayHeightAdjusted="+ rw_getDocumentDisplayHeightAdjusted() +"  rw_getScreenOffsetLeft="+ rw_getScreenOffsetLeft() +"  rw_getScreenOffsetTop="+ rw_getScreenOffsetTop() +"  rw_getScrollBarWidth="+ rw_getScrollBarWidth() +"  rw_getScrollBarHeight="+ rw_getScrollBarHeight(); hsa(mdb);}function iSb(){ var fSb = TRb(); var gSb = jRb(); var hSb = mRb();}function kSb(RUb){ uRb(document.getElementById(RUb));}function qSb(Wjb, kmb){ try { if(Wjb == null) { return null; } if(Wjb.nodeType == 1 || Wjb.nodeType == 3) { var fkb = qFb(Wjb); if(fkb != null) { return new THDomRefPt(MOb(fkb), kmb); } var Ilb; var Ikb; if(Wjb.nodeType == 1) { Ilb = 0; Ikb = Wjb; } else { if(Wjb.nodeValue.trimTH().length == 0) { kmb = 0; } Ilb = ATb(Wjb); Ikb = Wjb.parentNode; } var pSb = Ikb.getAttribute("rwstate"); var uSb = Ikb.getAttribute(daa); while(Ikb.tagName.toLowerCase() =="font"|| (pSb != null && pSb.length > 0) || uSb!= null ) { Ilb += ATb(Ikb); Ikb = Ikb.parentNode; pSb = Ikb.getAttribute("rwstate"); uSb = Ikb.getAttribute(daa); } if(kmb == -1) { Ilb = -1; } return new THDomRefPt(MOb(Ikb), Ilb + kmb); } else { return null; } } catch(ignore) { return null; }};function ATb(Wjb){if(Wjb == null){ return 0;}var Ilb = 0;var ySb = Wjb.previousSibling;if(ySb != null){ Ilb = CTb(ySb);}return Ilb;}function CTb(Wjb){var Ilb = 0;var ySb = Wjb;var egb;while(ySb != null){ if(ySb.nodeType ==3) { egb = ySb.nodeValue; Ilb += egb.length; } else if(ySb.nodeType == 1) { if(!oMb(ySb)) { if(dFb(ySb)) { Ilb += 1; } else if(ySb.tagName.toLowerCase() !="textarea") { Ilb += CTb(ySb.lastChild); } else { Ilb += 1; } } } ySb = ySb.previousSibling;}return Ilb;}function HTb(Wjb){ if(Ada || zca) { var ajb = Mra(Wjb); var Rgb = Wjb; if(Rgb.nodeType == 3) { Rgb = Rgb.parentNode; } while(Rgb != null && Rgb != ajb) { if(Rgb.getAttribute(caa) != null) { return true; } Rgb = Rgb.parentNode; } } return false;}function JTb(Wjb){ var Kjb =""; try { if(Wjb.nodeType == 1) { if(Wjb.getAttribute("ignore") == null) { var tagName = Wjb.tagName.toLowerCase(); if(tagName =="input") { var gZb = Wjb.getAttribute("type"); if(gZb != null) { gZb = gZb.toLowerCase(); if(gZb.length == 0 || gZb =="text") { Kjb = Wjb.value; } else if(gZb =="password") { Kjb =""; } else if(gZb =="image") { var pab = Wjb.getAttribute("alt"); if(pab != null && pab.length > 0) { Kjb = pab; } else { Kjb =""; } } else if(gZb =="button"|| gZb =="submit"|| gZb =="reset") { if(Wjb.className =="rwcalbutton"|| Wjb.className =="rwcalEqbutton") { Kjb = Wjb.getAttribute("name"); } else { Kjb = Wjb.getAttribute("value"); } } } else { Kjb = Wjb.value; } } else if(tagName =="select") { var NTb = Wjb.selectedIndex; var OTb =""; var Nnb = Wjb.options.length; for( var yeb = 0; yeb < Nnb; yeb++) { OTb += Wjb.options[yeb].text +" "; } if(Nnb > 0) { if(NTb > -1) { Kjb = Wjb.options[NTb].text +" selected from the list "+ OTb; } else { Kjb ="No selection from list "+ OTb; } } } else if(tagName =="textarea"|| tagName =="option") { Kjb = Wjb.value; } else if(tagName =="img") { var oab = Wjb.getAttribute("title"); if(oab != null && oab.length > 0) { Kjb = oab; } else { var pab = Wjb.getAttribute("alt"); if(pab != null && pab.length > 0) { Kjb = pab; } else { var qab = Wjb.getAttribute("msg"); if(qab != null && qab.length > 0) { Kjb = qab; } } } } else if(tagName =="math") { var UTb = PQb(Wjb); if(UTb.length > 0) { Kjb = pab; } } else { var pab = Wjb.getAttribute("alt"); if(pab != null && pab.length > 0) { Kjb = pab; } else { var qab = Wjb.getAttribute("msg"); if(qab != null && qab.length > 0) { Kjb = qab; } } } } } } catch(ignore) { Kjb =""; } if(Kjb == null) { Kjb =""; } return Kjb;};function dTb(eTb){ var XTb; var Elb; var Tmb; var Ahb; var Dmb; var PXb; Elb = 0; Tmb = eTb.indexOf(":"); Ahb = eTb.indexOf(";", Tmb); while(Elb > -1 && Tmb > -1) { Dmb = eTb.substring(Elb, Tmb); if(Ahb > -1) { PXb = eTb.substring(Tmb + 1, Ahb); } else { PXb = eTb.substring(Tmb + 1); } if(PXb.length == 0) { XTb = bfa.indexOf(Dmb); if(XTb > -1) { bfa.splice(XTb, 1); delete cfa[Dmb]; } } else { XTb = bfa.indexOf(Dmb); if(!(XTb > -1)) { bfa.push(Dmb); } cfa[Dmb] = PXb; } if(Ahb > -1) { Elb = Ahb + 1; Tmb = eTb.indexOf(":", Elb); Ahb = eTb.indexOf(";", Tmb); } else { break; } }}function jTb(Qnb){ var Nnb = Qnb.length; var Xmb = Qnb; var hTb = oTb(Qnb); if(hTb == null) { return Qnb; } var i; var j; var c; for(i=Nnb - 1; i>=0; i--) { c = hTb.charCodeAt(i); if(c != 32) { j = i; while(c != 32 && i >= 0) { --i; c = hTb.charCodeAt(i); } var iTb = hTb.substring(i+1, j+1); if(cfa[iTb] != null) { Xmb = Xmb.substring(0, i+1) +' '+ cfa[iTb ] +' '+ Xmb.substr(j+1); } } } return Xmb;}function oTb(Qnb){ var lTb = false; var Nnb = Qnb.length; var yTb =""; var i; var c; for(i=0; i<Nnb; i++) { c = Qnb.charCodeAt(i); if(c == 32 || lra(c)) { yTb +=' '; } else { yTb += Qnb.charAt(i); lTb = true; } } if(lTb) { return yTb; } else { return null; }}function qTb(Qnb){ return (bfa.indexOf(Qnb.trimTH()) > -1);}function vTb(wTb){ var rkb; var Vcb = false; var uTb = wTb.split(" "); var Nnb = uTb.length; var i; for(i=0; i<Nnb; i++) { rkb = jTb(uTb[i]); if(rkb != uTb[i]) { uTb[i] = rkb; Vcb = true; } } if(Vcb) { var yTb =""; for(i=0; i<Nnb - 1; i++) { yTb += uTb[i]; yTb +=" "; } yTb += uTb[Nnb - 1]; return yTb; } return wTb;}function DUb(VWb){ var Vcb = false; if(afa && VWb != null) { var Nnb = VWb.length; var i = 0; for(i=0; i<Nnb; i++) { var rkb = jTb(VWb[i]); if(rkb != VWb[i]) { VWb[i] = rkb; Vcb = true; } } } return Vcb;}function IUb(feb, KUb, MUb){ var n = feb.indexOf(KUb); while(n > -1) { feb = feb.replace(KUb, MUb); n = feb.indexOf(KUb, n +1); } return feb;}function NUb(Qnb){ var CUb = Qnb.replace(/\x26/g,'&amp;'); CUb = CUb.replace(/\x3c/g,'&lt;'); CUb = CUb.replace(/\x3e/g,'&gt;'); return CUb;}function QUb(RUb){ var Nnb = RUb.length; if(Nnb > 100) { return uGb(RUb); } else { var i; var c; var s; for(i=0;i<Nnb;i++) { c = RUb.charCodeAt(i); if( (c>47&&c<58) || (c>63&&c<92) || (c>94&&c<124) ) { continue; } if(c>126 || c==92 || c==47 || c==58 || c==59 || c==42 || c==63 || c==34 || c==60 || c==62 || c==124 || c==35 || c==37 || c==43 || c==38 || c==94) { s ="^"+ fsa(c); RUb = RUb.substr(0, i) + s + RUb.substr(i+1); Nnb = RUb.length; i+=s.length-1; } } } return RUb;}var SUb = null;function UUb(VUb){ var mdb ="th_tmp$"; var yeb = 1; var fib; var Qfb = true; while(Qfb) { fib = mdb + yeb; if(VUb.document.getElementById(fib)) { ++yeb; } else { Qfb = false; } } return fib;}function rw_getTargetNodeAsCaretIE(evt, fUb){ try { if((Ffa||Gfa) && fUb && !Zya(evt)) { var ZUb = evt.srcElement; var aUb = rw_getWindow(ZUb); var bUb = ZUb.childNodes.length; var i; var cUb = false; for(i=0; i<bUb; i++) { if(ZUb.childNodes[i].nodeType == 3) { cUb = true; break; } } if(cUb) { if(SUb == null) { SUb = UUb(aUb); } var dUb = aUb.document.getElementById(SUb); if(dUb != null) { dUb.parentNode.removeChild(dUb); } var range = aUb.document.selection.createRange(); range.collapse(); range.pasteHTML("<span id='"+ SUb +"'></span>"); var ulb = aUb.document.getElementById(SUb); var hUb = null; if(ulb != null) { if(ulb.previousSibling != null && ulb.previousSibling.nodeType == 3) { aqa(ulb.previousSibling); hUb = new THCaret(ulb.previousSibling, ulb.previousSibling.length, true); } if(ulb.nextSibling != null && ulb.nextSibling.nodeType == 3) { aqa(ulb.nextSibling); if(hUb == null) { hUb = new THCaret(ulb.nextSibling, 0, true); } } if(hUb == null && ulb.nextSibling != null && ulb.nextSibling.nodeType == 1) { hUb = new THCaret(ulb.nextSibling, 0, true); } else if(hUb == null && ulb.previousSibling != null && ulb.previousSibling.nodeType == 1) { hUb = new THCaret(ulb.previousSibling, 0, true); } } if(hUb == null) { hUb = new THCaret(ulb.parentNode, 0, true); } if(ulb != null) { ulb.parentNode.removeChild(ulb); } return hUb; } else { return new THCaret(ZUb, 0, true); } } if(Kfa) { GOb = evt.target; if(GOb != null) { if(GOb.firstChild != null && GOb.firstChild.nodeType == 3 && GOb.tagName.toLowerCase() !="textarea") { var iUb = GOb.firstChild.nodeValue; if(iUb.trimTH().length > 0) { GOb = GOb.firstChild; } } return new THCaret(GOb, 0, true); } } else { var jUb = dxa(evt); var kUb = Fra(evt.srcElement.ownerDocument.body); try { kUb.moveToPoint(jUb.x, jUb.y); } catch(skip) { return null; } var rUb = Fra(evt.srcElement.ownerDocument.body); var mUb = Fra(evt.srcElement.ownerDocument.body); var nUb = evt.srcElement.firstChild; while((nUb != null)) { if(nUb.nodeType == 3 && nUb.nodeValue.trimTH().length > 0) { aqa(nUb); var Ujb = nUb.previousSibling; while(Ujb != null && Ujb.nodeType != 1) { Ujb = Ujb.previousSibling; } if(Ujb != null) { rUb.moveToElementText(Ujb); rUb.collapse(false); } else { rUb.moveToElementText(nUb.parentNode); } var pUb = nUb.nextSibling; while(pUb != null && pUb.nodeType != 1) { pUb = pUb.nextSibling; } if(pUb != null) { mUb.moveToElementText(pUb); rUb.setEndPoint("EndToStart", mUb); } else { mUb.moveToElementText(nUb.parentNode); rUb.setEndPoint("EndToEnd", mUb); } if(rUb.inRange(kUb)) { var Ilb = zUb(nUb, rUb, kUb); return new THCaret(nUb, Ilb, true); } } nUb = nUb.nextSibling; } } } catch(exc) { Qra("rw_getTargetNodeAsCaretIE error:"+ exc.message); } return null;}function rw_getTextRangeAsRefPtIE(cVb, SVb){ try { var rUb = Fra(cVb); var parentNode = SVb.parentElement(); rUb.moveToElementText(parentNode); var Ilb = zUb(parentNode, rUb, SVb); var agb = qSb(parentNode, Ilb); return agb; } catch(exc) { Qra("rw_getTextRangeAsRefPtIE error:"+ exc.message); } return null;}function zUb(AVb, Teb, CVb){ try { var Ilb = 0; var range = Teb.duplicate(); range.collapse(); range.move("character", 1); range.move("character", -1); var DVb = 0; var EVb = 0; while(range.compareEndPoints("EndToEnd", CVb) == -1) { range.moveEnd("character", 1); DVb = range.text.length; if(DVb > EVb) { ++Ilb; EVb = DVb; } } return Ilb; } catch(err) { return 0; }}function QVb(cVb, SVb){ var Oeb = SVb.duplicate(); Oeb.collapse(true); var GVb = rw_getTextRangeAsRefPtIE(cVb, Oeb); Oeb = SVb.duplicate(); Oeb.collapse(false); var HVb = rw_getTextRangeAsRefPtIE(cVb, Oeb); return new THRange(cVb, GVb, HVb);}function rw_getAsTextRange(cVb, hVb, jVb, iVb, kVb){ var range = Fra(cVb); var Ghb = JPb(cVb, hVb, -1, iVb, -1); var Pgb = Ghb.Pgb; var Qgb = Ghb.Qgb; if(Pgb != null && Pgb.node != null && Qgb != null && Qgb.node != null) { var LVb = Pgb.node; if(LVb.nodeType == 3) { var Ilb = ATb(LVb); LVb = LVb.parentNode; jVb += Ilb; } var NVb = Qgb.node; if(NVb.nodeType == 3) { var Ilb = ATb(NVb); NVb = NVb.parentNode; kVb += Ilb; } range.moveToElementText(LVb); range.collapse(); oVb(range, jVb); range.collapse(false); range.select(); var PVb = Fra(cVb); PVb.moveToElementText(NVb); PVb.collapse(); oVb(PVb, kVb); PVb.collapse(false); range.setEndPoint("EndToEnd", PVb); } else { range = null; Qra("Error with rw_getAsTextRange."); } return range;}function oVb(Teb, Vkb){ var Nnb; var mVb; var nVb; Nnb = Teb.text.length; while(Vkb > 0) { nVb = Teb.moveEnd("character", Vkb); if(nVb == 0) { return; } mVb = Teb.text.length; Vkb -= (mVb - Nnb); Nnb = mVb; }}var rVb = new SpeechStream.Dictionary();function uVb(feb){ var Xmb; var Nnb; var i; var c; if(SpeechStream.pronunciation.encodeData()) { Xmb =""; Nnb = feb.length; for(i=0; i<Nnb; i++) { c = feb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { var mkb = fsa(c); switch(mkb.length) { case 1: mkb ="0"+ mkb; case 2: Xmb +="/x"+ mkb; break; case 3: mkb ="0"+ mkb; case 4: Xmb +="/u"+ mkb; break; default: } } else { Xmb += feb.charAt(i); } } } else { Xmb =""; Nnb = feb.length; for(i=0; i<Nnb; i++) { c = feb.charCodeAt(i); if(c == 34) { Xmb +="%22"; } else if(c == 39) { Xmb +="%27"; } else { Xmb += feb.charAt(i); } } } return Xmb;}function zVb(feb){ var rkb = decodeURIComponent(feb); var Xmb =""; var Nnb = rkb.length; var i; var Vhb; var DWb; for(i=0; i<Nnb; i++) { var c = rkb.charAt(i); if(c =='/') { if(i< Nnb - 1) { var xmb = rkb.charAt(i + 1); switch(xmb) { case'/': Xmb +='/'; i++; break; case'x': if(i<Nnb - 3) { Vhb = rkb.substr(i + 2, 2); DWb = gsa(Vhb); Xmb += String.fromCharCode(DWb); i+=3; } break; case'u': if(i<Nnb - 5) { Vhb = rkb.substr(i + 2, 4); DWb = gsa(Vhb); Xmb += String.fromCharCode(DWb); i+=5; } break; default: } } else { } } else if(c =='+') { Xmb +=' '; } else if (c == 10 || c == 13) { } else if(c =='%') { if(i<Nnb - 2) { Vhb = rkb.substr(i, 3); if(Vhb =="%2f") { Xmb +='/'; i+=2; } else if(Vhb =="%2a") { Xmb +=':'; i-=2; } else if(Vhb =="%60") { Xmb +='`'; i-=2; } else { if(i<Nnb - 9) { Vhb = rkb.substr(i, 10); if(Vhb =="%26quot%3b") { Xmb +='"'; i+=9; } else { if(i<Nnb - 6) { Vhb = rkb.substr(i,7); if(Vhb =="%26quot") { Xmb +='"'; i+=6; } else { Xmb += c; } } else { Xmb += c; } } } else { Xmb += c; } } } else { Xmb += c; } } else if(c =='&') { if(i<Nnb - 5) { Vhb = rkb.substr(i, 6); if(Vhb =="&#x27") { Xmb +='\''; } else if(Vhb =="&quot;") { Xmb +='"'; } Xmb += String.fromCharCode(DWb); i+=5; } } else { Xmb += rkb.charAt(i); } } return Xmb;}function GWb(feb){ var Xmb =""; var Nnb = feb.length; var i; for(i=0; i<Nnb; i++) { var c = feb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { Xmb +="&#"+ c +";"; } else { Xmb += feb.charAt(i); } } return Xmb;}function KWb(feb){ var Xmb =""; var Nnb = feb.length; var i; for(i=0; i<Nnb; i++) { var c = feb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { if(c == 34 || c == 39) { Xmb +="\\&#"+ c +";"; } else { Xmb +="&#"+ c +";"; } } else { Xmb += feb.charAt(i); } } return Xmb;}var NWb ="\\x82\\x91\\x92";var OWb ="\\x93\\x94";var PWb = /^[,.?!;:\x27\x22$]+|[,.?!;:\x27\x22$]+$/g;function UWb(VWb){ if(!Zfa) { return false; } var Vcb = false; var rkb; var Xmb; var Nnb = VWb.length; var i; for(i=0; i<Nnb; i++) { Xmb = VWb[i].trimTH(); if(Xmb.indexOf(" ") > -1) { var fib = gWb(Xmb); if(fib != Xmb) { VWb[i] = fib; Vcb = true; } continue; } var value; if(rVb.MultiwordStart$__.indexOf(Xmb) > -1) { if(i < Nnb - 1) { rkb = Xmb +" "+ VWb[i+1].trimTH(); if( (value = rVb.get$__(rkb)) != null ) { var bWb = value.split(" "); var cWb = bWb[0] +" "; var Cnb = bWb[1] +" "; VWb[i] = cWb; VWb[i+1] = Cnb; Vcb = true; continue; } } if(i < Nnb - 2) { rkb = Xmb +" "+ VWb[i+1].trimTH() +" "+ VWb[i+2].trimTH(); if( (value = rVb.get$__(rkb)) != null ) { var bWb = value.split(" "); var cWb = bWb[0] +" "; var Cnb = bWb[1] +" "; var Dnb = bWb[2] +" "; VWb[i] = cWb; VWb[i+1] = Cnb; VWb[i+2] = Dnb; Vcb = true; continue; } } } if( (value = rVb.get$__(Xmb)) != null || (value = rVb.get$__(Xmb.toLowerCase())) != null) { VWb[i] = value +" "; Vcb = true; continue; } else { rkb = Xmb.replace(NWb,'\''); rkb = rkb.replace(OWb,'"'); if(Xmb != rkb) { if( (value = rVb.get$__(rkb)) != null || (value = rVb.get$__(rkb.toLowerCase())) != null) { VWb[i] = value +" "; Vcb = true; continue; } else { Xmb = rkb; rkb = Xmb.replace(PWb,''); if(Xmb != rkb) { if( (value = rVb.get$__(rkb)) != null || (value = rVb.get$__(rkb.toLowerCase())) != null ) { VWb[i] = value +" "; Vcb = true; continue; } } } } else { rkb = Xmb.replace(PWb,''); if(Xmb != rkb) { if( (value = rVb.get$__(rkb)) != null || (value = rVb.get$__(rkb.toLowerCase())) != null ) { VWb[i] = value +" "; Vcb = true; continue; } } } } } return Vcb;}function gWb(Qnb){ if(!Zfa) { return Qnb; } var Xmb =""; var wordList = Qnb.split(" "); if(UWb(wordList)) { var Nnb = wordList.length; for(i=0; i<Nnb; i++) { Xmb += wordList[i]; if(i < Nnb - 1) { Xmb +=" "; } } return Xmb; } else { return Qnb; }}function oWb(Qnb){ var n1; var n2; var kWb; var Imb; var Jmb; var nWb = Qnb.split("\r\n"); var i; for(i=0; i<nWb.length; i++) { kWb = nWb[i]; var qWb = kWb.indexOf("&p_pageID=*&") > -1; n1 = kWb.indexOf("&sayThis="); n2 = kWb.indexOf("&likeThis="); Imb = kWb.substring(n1 + 9, n2); Jmb = kWb.substring(n2 + 10); Imb = zVb(Imb); Jmb = zVb(Jmb); rVb.add$__(Imb, Jmb, qWb); } if(typeof(Amb) =="function") { Amb(); }}function tWb(){ }function uWb(){ if(lca != null && lca.length > 0 && mca != null && mca.length > 0 && nca != null && nca.length > 0) { var RXb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } RXb = jsa(true) + SpeechStream.cacheMode.getLiveServer(); var chb ="&custID="+ lca +"&bookID="+ mca +"&pageID="+ nca +"&combined=Y"; var flash = ZZb.getConnector(); if(flash == null) { hsa("Connection to the server is not available."); } else { flash.getPronunciationDataAll(RXb, chb); } }}var wWb = 2;function $rw_loadPronCallback(ogb){ if(ogb == null) { if(wWb > 0) { --wWb; uWb(); } else { hsa("Failed to load pronunciation data, this may affect the text to speech function."); } } else { ogb = ogb.trimTH(); if(ogb =="") { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { Yfa = true; } } else if(ogb =="-1") { if(wWb > 0) { --wWb; uWb(); } else { hsa("Failed to load pronunciation data, this may affect the text to speech function."); } } else { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { Yfa = true; } oWb(ogb); } }}function zWb(UXb, LXb, VXb){ if(lca != null && lca.length > 0 && mca != null && mca.length > 0 && nca != null && nca.length > 0) { var RXb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } RXb = jsa(true) + SpeechStream.cacheMode.getLiveServer(); var chb ="&custID="+ lca +"&bookID="+ mca +"&pageID="+ (VXb?"*":nca) +"&sayThis="+ uVb(UXb) +"&likeThis="+ uVb(LXb); var flash = ZZb.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.addPronunciationData(RXb, chb); } }}function $rw_addPronCallback(ogb){ if(ogb == null) { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else if(ogb =="-1") { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else { var Dmb = document.getElementById('createSayThis').value.trimTH(); var PXb = document.getElementById('createLikeThis').value.trimTH(); var Hmb = document.getElementById('createAllPages').checked; rVb.add$__(Dmb, PXb, Hmb); document.getElementById('createSayThis').value =''; document.getElementById('createLikeThis').value =''; document.getElementById("confirmPageMsg").innerHTML ="Pronunciation inserted."; Amb(); }}function JXb(UXb, LXb, VXb){ if(lca != null && lca.length > 0 && mca != null && mca.length > 0 && nca != null && nca.length > 0) { var RXb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } RXb = jsa(true) + SpeechStream.cacheMode.getLiveServer(); var chb ="&custID="+ lca +"&bookID="+ mca +"&pageID="+ (VXb?"*":nca) +"&sayThis="+ uVb(UXb) +"&likeThis="+ uVb(LXb); var flash = ZZb.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.updatePronunciationData(RXb, chb); } }}function $rw_updatePronCallback(ogb){ if(ogb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else if(ogb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else { var Dmb = document.getElementById('editSayThis').value.trimTH(); var PXb = document.getElementById('editLikeThis').value.trimTH(); var Hmb = document.getElementById('editAllPages').checked; rVb.add$__(Dmb, PXb, Hmb); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation updated."; Mmb(); Amb(); }}function TXb(UXb, VXb){ if(lca != null && lca.length > 0 && mca != null && mca.length > 0 && nca != null && nca.length > 0) { var RXb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } RXb = jsa(true) + SpeechStream.cacheMode.getLiveServer(); var chb ="&custID="+ lca +"&bookID="+ mca +"&pageID="+ (VXb?"*":nca) +"&sayThis="+ uVb(UXb); var flash = ZZb.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.removePronunciationData(RXb, chb, UXb); } }}function $rw_removePronCallback(ogb, p_strKey){ if(ogb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else if(ogb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else { rVb.remove$__(p_strKey); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation deleted."; Amb(); }}var XXb = null;function ZXb(){ if(XXb != null) { return XXb; } else { if(efa) { var Bmb = document.getElementById("rwDrag"); if(Bmb != null) { Bmb.style.position ="relative"; efa = false; } } var flash = null; try { if(Mfa) { flash = window.document.WebToSpeech; } else { if (window.document.WebToSpeech) { flash = window.document.WebToSpeech; } else {flash = window.WebToSpeech; } } if(flash != null) { flash.getVersion(); XXb = flash; } } catch(err) { flash = null; XXb = null; } if(flash == null) { var bXb = document.getElementById("WebToSpeech"); if(bXb != null) { flash = bXb; try { flash.getVersion(); XXb = flash; } catch(e) { flash = null; XXb = null; } if(flash == null && !Cfa && bXb.childNodes && typeof(bXb.childNodes.length) =="number") { var Nnb = bXb.childNodes.length; var i; for(i=0; i<Nnb; i++) { var Rgb = bXb.childNodes[i]; if(Rgb.tagName.toLowerCase() =="embed") { flash = Rgb; try { flash.getVersion(); XXb = flash; } catch(e) { flash = null; XXb = null; } } } } } } return flash; }}var eXb = 0;SpeechStream.AjaxRequest = function(){ var fXb = null; var gXb = null; var hXb = null; var iXb = false;this.callBack = function() { with(this) { if(readyState < 4) { return; } if(iXb) { if(hXb == null) { gXb(responseXML); } else { gXb[hXb](responseXML); } } else { if(hXb == null) { gXb(responseText); } else { gXb[hXb](responseText); } } } }; this.doPost = function(Kua, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { gXb = p_responseObject; hXb = p_responseCallback; fXb = new XMLHttpRequest(); iXb = p_bXml; fXb.open("POST", Kua, true); fXb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); fXb.onreadystatechange = callBack; fXb.send(p_parameters); } }; this.doGet = function(Kua, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { gXb = p_responseObject; hXb = p_responseCallback; fXb = new XMLHttpRequest(); iXb = p_bXml; fXb.open("GET", Kua, true); fXb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); fXb.onreadystatechange = callBack; fXb.send(p_parameters); } };};SpeechStream.HTML5Controller = function(){ var jXb = Wca; var kXb = false; var lXb = 0; var mXb = false; var nXb = 0; var oXb = null; var pXb; var qXb; var rXb; var sXb; var tXb; var uXb; var vXb = kca; var eZb = new Audio(); eZb.type ="audio/mpeg"; eZb.src =""; if(typeof(vca) =="number"&& vca > -1) { eZb.volume = ( parseInt(vca, 10) / 100.0); } var NZb = null; var yXb = 0; var zXb = null; var UZb = true; var BYb = false; var CYb = false; this.initialise = function (p_flashVars, Vva, Wva, Xva) { pXb = Vva; qXb = Wva; rXb = Xva; if(gca != null) { sXb = gca; if(sXb.length < 4 || sXb.substring(0, 4) !="http") { sXb = jsa(false) + sXb; } if(sXb.substr(sXb.length - 1, 1) !="/") { sXb = sXb +"/"; } } else { sXb = jsa(false) + Yca +"/"; } if(fca != null) { tXb = fca; if(tXb.length < 4 || tXb.substring(0, 4) !="http") { tXb = jsa(false) + tXb; } if(tXb.substr(tXb.length - 1, 1) !="/") { tXb = tXb +"/"; } } else { tXb = jsa(false) + Yca +"/"; } if(hca != null) { uXb = hca; if(uXb.length < 4 || uXb.substring(0, 4) !="http") { uXb = jsa(false) + uXb; } if(uXb.substr(uXb.length - 1, 1) !="/") { uXb = uXb +"/"; } } else { uXb = jsa(false) + Yca +"/"; } if(p_flashVars.cacheMode =="true") { BYb = true; } if(p_flashVars.cacheLiveFallover =="true") { CYb = true; } if(p_flashVars.volumeValue > -1) { eZb.volume = (p_flashVars.volumeValue / 100.0); } };this.setToClipboard = function(feb) { };this.setCacheBuster = function(p_bCacheBuster) { kXb = p_bCacheBuster; }; this.setCacheMode = function() { };this.resetCacheTimer = function() { lXb = 0; setTimeout(this.resetCacheTimer, Jda * 1000 * 60); }; setTimeout(this.resetCacheTimer, Jda * 1000 * 60); this.isPaused = function() { return mXb; }; this.pause = function() { if(eZb != null) { eZb.pause(); mXb = true; } }; this.resume = function() { if(eZb != null && mXb) { eZb.play(); mXb = false; } }; this.setCustomerId = function() {}; this.setBookId = function() {}; this.setPageId = function() {}; this.setSpeedValue = function() {}; this.setVoiceName = function(yBb) { vXb = yBb; }; this.getVoiceName = function() { return vXb; }; this.setVolumeValue = function(p_strVal) { if(eZb != null) { try { eZb.volume = ( parseInt(p_strVal, 10) / 100.0); } catch(e) { } } }; this.checkPath = function(uOb) { if(Zda != null && ada != null) { var rkb; rkb = uOb; if(rkb.indexOf(Zda) > -1) { rkb = rkb.substr(0, rkb.indexOf(Zda)) + ada + rkb.substr(rkb.indexOf(Zda) + Zda.length); } return rkb; } else { return uOb; } }; this.getPronunciationDataAll = function(p_strBase, p_strDetails) { var cgb = p_strBase +"/SpeechNAServer/pronounce.html?type=get&pronounceClient="+ pca + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(cgb, null, this,"requestPGetAllLoad", false); }; this.requestPGetAllLoad = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_loadPronCallback("-1"); } else if(Qnb =="get=false"|| Qnb =="") { $rw_loadPronCallback("-1"); } else if(Qnb =="empty") { $rw_loadPronCallback(""); } else { $rw_loadPronCallback(Qnb); } }; this.addPronunciationData = function(p_strBase, p_strDetails) { var cgb = p_strBase +"/SpeechNAServer/pronounce.html?type=add&pronounceClient="+ pca + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(cgb, null, this,"requestPAddLoad", false); }; this.requestPAddLoad = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_addPronCallback("-1"); } else if(Qnb =="add=false") { $rw_addPronCallback("-1"); } else if(Qnb =="add=true") { $rw_addPronCallback("1"); } else { $rw_addPronCallback("-1"); } }; this.updatePronunciationData = function(p_strBase, p_strDetails) { var cgb = p_strBase +"/SpeechNAServer/pronounce.html?type=update&pronounceClient="+ pca + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(cgb, null, this,"requestPUpdateLoad", false); }; this.requestPUpdateLoad = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_updatePronCallback("-1"); } else if(Qnb =="update=false") { $rw_updatePronCallback("-1"); } else if(Qnb =="update=true") { $rw_updatePronCallback("1"); } else { $rw_updatePronCallback("-1"); } }; this.removePronunciationData = function(p_strBase, p_strDetails, p_strKey) { var cgb = p_strBase +"/SpeechNAServer/pronounce.html?type=delete&pronounceClient="+ pca + p_strDetails; var caller = new SpeechStream.AjaxRequest(); var MYb = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_removePronCallback("-1"); } else if(Qnb =="delete=false") { $rw_removePronCallback("-1"); } else if(Qnb =="delete=true") { $rw_removePronCallback("1", p_strKey); } else { $rw_removePronCallback("-1"); } }; caller.doGet(cgb, null, MYb, null, false); }; var NYb =""; this.getLastError = function() { return NYb; }; this.getVersion = function() { return jXb; }; this.getRevisionNumber = function() { return"0"; };function PYb() { var mYb = (++nXb); if(oXb != null) { TYb(0); delete oXb; oXb = null; } mXb = false; if(UZb) { eZb.pause(); eZb.autoplay = true; eZb.play(); UZb = false; } return mYb; } this.checkRequestStillValid = function(QYb) { return QYb == nXb; }; this.setAudio = function(p_strMp3Url) { eZb.src = p_strMp3Url; }; this.setTimer = function(p_timerArray) { NZb = p_timerArray; }; this.requestCompleteStartPlayback = function() { $rw_renderingSpeechCallback(); audioPlaybackTimer(); eZb.autoplay = true;eZb.play(); };this.stopSpeech = function() { if(eZb != null) { eZb.pause(); eZb.currentTime = 0; eZb.src =''; this.onSpeechStop(-1); } oXb = null; ++nXb; };this.stopSpeechAlt = function() { if(eZb != null) { eZb.pause(); try { eZb.currentTime = 0; } catch(err) { } eZb.src =''; this.onSpeechStop(-2); } oXb = null; ++nXb; };this.onSpeechStop = function(Knb) { TYb(Knb); }; function TYb(Knb) { if(Knb < 0) { $rw_doSelection(Knb); } NZb = null; yXb = 0; zXb = null; }; this.startSpeech = function(Qnb, aYb) { var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, Qnb, aYb); if(lXb <= Ida || rXb == null) { oXb.makeSpeechRequest(qXb, false); } else { oXb.makeSpeechRequest(rXb, true); } }; this.startSpeechFromBackup = function(Qnb, aYb) { var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, Qnb, aYb); oXb.makeSpeechRequest(rXb, true); };this.startSpeechBackup = function(p_params) { if(rXb == null) { this.onSpeechStop(-3); return false; } else { var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.copyParameters(this, mYb, p_params); oXb.makeSpeechRequest(rXb, true); return true; } };this.startSpeechFromCacheWithGen = function(p_strFilePath, wTb, p_destFolder, p_destFilename, p_bPron) { var mYb = PYb(); if(lXb <= Ida || !CYb || rXb == null) { var hYb; var iYb; if(kXb) { hYb = qXb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); iYb = qXb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { hYb = qXb +"SpeechCache/"+ p_strFilePath +".xml"; iYb = qXb +"SpeechCache/"+ p_strFilePath +".mp3"; } oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.setStaticParameters(p_destFolder, p_destFilename); oXb.loadFiles(hYb, iYb); } else { oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.setStaticParameters(p_destFolder, p_destFilename); oXb.makeSpeechRequest(rXb, true); } };this.startSpeechGenerateCache = function(p_strFilePath, wTb, p_destFolder, p_destFilename, p_bPron, p_strServerName) { var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.setStaticParameters(p_destFolder, p_destFilename); oXb.makeSpeechRequest(p_strServerName, true); };this.startSpeechFromCache = function(p_strFilePath, wTb, p_bPron) { var mYb = PYb(); if(lXb <= Ida || !CYb || rXb == null) { var hYb; var iYb; if(kXb) { hYb = qXb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); iYb = qXb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { hYb = qXb + p_strFilePath +".xml"; iYb = qXb + p_strFilePath +".mp3"; } oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.loadFiles(hYb, iYb); } else { oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.makeSpeechRequest(rXb, true); } }; this.startSpeechFromFile = function(Qnb, Kua, p_bPron){ }; this.startHighlighting = function(Qnb){}; this.simpleSpeech = function(Qnb, aYb){ var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, Qnb, aYb); oXb.setHighlightable(false); if(lXb <= Ida || rXb == null) { oXb.makeSpeechRequest(qXb, false); } else { oXb.makeSpeechRequest(rXb, true); }};this.simpleSpeechFromBackup = function(Qnb, aYb){ var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, Qnb, aYb); oXb.setHighlightable(false); oXb.makeSpeechRequest(rXb, true);};this.simpleSpeechBackup = function(p_params){ var mYb = PYb(); oXb = new SpeechStream.Html5Speech(); oXb.copyParameters(this, mYb, p_params); oXb.setHighlightable(false); oXb.makeSpeechRequest(rXb, true);}; this.autogenSpeechFiles = function(wTb, p_destFolder, p_destFilename, p_bPron, p_strServerName){ var mYb = PYb(); this.onSpeechStop(-2); oXb = new SpeechStream.Html5Speech(); oXb.setParameters(this, mYb, wTb, p_bPron); oXb.setStaticParameters(p_destFolder, p_destFilename); oXb.makeSpeechRequest(p_strServerName, true); };this.checkAutogenCachedFiles = function(p_strFilePath){ };this.autoGenComplete = function(p_strServerName){ }; this.getMP3File = function(zmb, p_bPron){ }; this.getPictureDictionaryPage = function(Qnb){ var nYb ="&userName="+ pca +"&swf="+ jXb; var xYb = uXb +"ImageServices/imagedict.html?word="+ Qnb + nYb; if(lca != null) { xYb +="&custID="+ lca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(xYb, null, this,"imagedictionaryLoad", false);};this.imagedictionaryLoad = function(Qnb){ if (Qnb == null || Qnb.length == 0) { $rw_picturedictionaryReply("No Image."); } else { $rw_picturedictionaryReply(Qnb); }};this.getCustomDictionaryPage = function(wTb, Kua){ var caller = new SpeechStream.AjaxRequest(); caller.doPost(Kua + wTb, null, this,"dictionaryLoad", false);};this.getDictionaryPage = function(Qnb){ var xYb = sXb +"rwserver/?query=dictionaryHtml"+"&text="+ Qnb +"&locale="+ tca +"&userName="+ pca +"&swf="+ jXb; if(lca != null) { xYb +="&custID="+ lca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(xYb, null, this,"dictionaryLoad", false);};this.dictionaryLoad = function(Qnb){ if(Qnb == null || Qnb.length == 0) { $rw_dictionaryReply("Error loading content."); } else { $rw_dictionaryReply(Qnb); }};this.getDictionaryPageFl = function(Qnb){ var xYb = sXb +"rwserver/?query=dictionary&type=result&wordType=15&"+"&text="+ Qnb +"&locale="+ tca +"&userName="+ pca +"&swf="+ jXb +"&dictionaryType=SIMPLE"; if(lca != null) { xYb +="&custID="+ lca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(xYb, null, this,"dictionaryFlLoad", false);}; this.getDictionaryPageFlHTML = function(Qnb){ var xYb = sXb +"rwserver/?query=dictionaryHtml"+"&text="+ Qnb +"&locale="+ tca +"&userName="+ pca +"&swf="+ jXb +"&dictionaryType=SIMPLE"; if(lca != null) { xYb +="&custID="+ lca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(xYb, null, this,"dictionaryFlLoad", false);};this.dictionaryFlLoad = function(Qnb){ if(Qnb == null || Qnb.length == 0) { $rw_dictionaryFlReply("Error loading content."); } else { $rw_dictionaryFlReply(Qnb); }};this.getTranslationPage = function(Qnb){ this.getTranslationGenericPage(Qnb,"English","Spanish");};this.getTranslationGenericPage = function(Qnb, AZb, BZb){ yYb(Qnb, AZb, BZb, false, this);};this.getTranslationFlGenericPage = function(Qnb, AZb, BZb){ yYb(Qnb, AZb, BZb, true, this);};function yYb(Qnb, AZb, BZb, CZb, DZb){ var xYb = tXb +"rwtranslateserver/onlinetranslator?type=ultrahtml5&mode=content"+"&value="+ encodeURIComponent(Qnb) +"&value2="+ Qnb +"&caller="+ location.protocol +"//"+ location.host + location.pathname +"&key="+ uGb(Qnb + pca) +"&username="+ pca +"&source="+ AZb +"&dest="+ BZb; if(lca != null) { xYb +="&custID="+ lca; } var caller = new SpeechStream.AjaxRequest(); if(CZb) { caller.doPost(xYb, null, DZb,"translationFlLoad", false); } else { caller.doPost(xYb, null, DZb,"translationLoad", false); }} this.translationLoad = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_transReply("Error loading content."); } else { Qnb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding-bottom: 3px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Qnb; $rw_transReply(Qnb); } }; this.translationFlLoad = function(Qnb) { if(Qnb == null || Qnb.length == 0) { $rw_transFlReply("Error loading content."); } else { Qnb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding-bottom: 3px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Qnb; $rw_transFlReply(Qnb); } }; this.getSoundFileLength = function(cgb) { }; audioPlaybackTimer = function() { if(NZb == null) { return; } if(eZb.ended) { $rw_speechCompleteCallback(); TYb(-1); try { eZb.pause(); eZb.currentTime = 0; eZb.src =''; } catch(err) {} return; } if(NZb.length > 0) { if(NZb[yXb] < eZb.currentTime) { $rw_doSelection(yXb); yXb++; } } zXb = setTimeout(audioPlaybackTimer, 10); }; this.strStoredVoice = null; this.setAltSettings = function (yBb, DCb, ECb, FCb, GCb) { if(this.strStoredVoice == null) { this.strStoredVoice = vXb; } if(typeof(yBb) =="string") { vXb = yBb; } }; this.restoreSettings = function() { if(this.strStoredVoice != null) { vXb = this.strStoredVoice; this.strStoredVoice = null; } };};SpeechStream.Html5Speech = function(){ this.m_nRequestNumber = -1; this.m_params = null; this.m_bBackup = false; this.m_bHighlightable = true; this.m_controller = null;this.makeSpeechRequest = function(p_strSpeechServer, p_bBackup) { var server = p_strSpeechServer +"SpeechServices/index.html"; this.m_bBackup = p_bBackup; var GZb = new SpeechStream.AjaxRequest(); GZb.doPost(server, this.m_params, this,"onSpeechRequestResponse", false); };this.onSpeechRequestResponse = function(p_strResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var HZb = p_strResponse.indexOf("xml="); var IZb = p_strResponse.indexOf("&mp3"); var JZb = p_strResponse.substring(HZb + 4, IZb); var KZb = p_strResponse.substring(IZb + 5, p_strResponse.length); if(JZb =="error"|| KZb =="error") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { NYb ="Error response from server"; return; } } else { NYb ="Error response from server"; this.m_controller.onSpeechStop(-3); return; } } if(JZb =="busy"|| KZb =="busy") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { NYb ="Busy response from server"; return; } } else { NYb ="Busy response from server"; this.m_controller.onSpeechStop(-3); return; } } this.loadFiles(JZb, KZb); }; this.loadFiles = function(p_strXmlUrl, p_strMp3Url) { p_strXmlUrl = this.m_controller.checkPath(p_strXmlUrl); p_strMp3Url = this.m_controller.checkPath(p_strMp3Url); this.m_controller.setAudio(p_strMp3Url); if(this.m_bHighlightable) { var LZb = new SpeechStream.AjaxRequest; LZb.doGet(p_strXmlUrl, null, this,"onTimingFileResponse", true); } else { var NZb = new Array(); this.m_controller.setTimer(NZb); this.m_controller.requestCompleteStartPlayback(); } }; this.onTimingFileResponse = function(p_xmlResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var NZb = new Array(); if(p_xmlResponse && p_xmlResponse.documentElement && p_xmlResponse.documentElement.childNodes) { var OZb = p_xmlResponse.documentElement.childNodes; var PZb = 0; for(i = 0; i < OZb.length; i++) { if(OZb[i].nodeType == 1) { NZb[PZb] = parseFloat(OZb[i].getAttribute("time") / 1000); if(PZb > 0 && NZb[PZb] <= NZb[PZb - 1]) { NZb[PZb] = NZb[PZb - 1] + 0.010; } PZb = PZb + 1; } } this.m_controller.setTimer(NZb); this.m_controller.requestCompleteStartPlayback(); } else { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { NYb ="Failed to get timing response from server"; } } else { NYb ="Failed to get timing response from server"; this.m_controller.onSpeechStop(-3); } } };};SpeechStream.Html5Speech.prototype.setParameters = function (p_controller, QYb, Qnb, aYb){ if(Qnb == null) { Qnb =""; } this.m_controller = p_controller; this.m_nRequestNumber = QYb; var afb ="text="+ encodeURIComponent(Qnb) +"&userName="+ encodeURIComponent(pca) +"&voiceName="+ encodeURIComponent(p_controller.getVoiceName())+"&speedValue="+ encodeURIComponent(uca); if(lca != null) { afb +="&custID="+ encodeURIComponent(lca); } if(mca != null) { afb +="&bookID="+ encodeURIComponent(mca); } if(nca != null) { afb +="&pageID="+ encodeURIComponent(nca); } if(aYb) { afb +="&usePron=Y"; } this.m_params = afb;};SpeechStream.Html5Speech.prototype.copyParameters = function(p_controller, QYb, p_params){ this.m_controller = p_controller; this.m_nRequestNumber = QYb; this.m_params = p_params;};SpeechStream.Html5Speech.prototype.setStaticParameters = function (p_strDestFolder, p_strDestFilename){ var afb ="&destFolder="+ p_strDestFolder +"&destFilename="+ p_strDestFilename; this.m_params = this.m_params + afb;};SpeechStream.Html5Speech.prototype.setHighlightable = function(p_bHighlightable){ this.m_bHighlightable = p_bHighlightable;};SpeechStream.Html5Speech.prototype.getHighlightable = function(){ return this.m_bHighlightable;};SpeechStream.TouchScreenManager = function(){ var SZb = false; var TZb = false; var UZb = true; var VZb = null;this.initialise = function() { bxa(document,"touchstart", onTouchStart); bxa(document,"touchmove", onTouchMove); bxa(document,"touchend", onTouchEnd); if(!hda && window.frames.length > 0) { var i; for(i=0; i<window.frames.length; i++) { this.initialiseToFrame(window.frames[i]); } } }; this.initialiseToFrame = function(VUb) { if(VUb.document) { bxa(VUb.document,"touchstart", onTouchStart); bxa(VUb.document,"touchmove", onTouchMove); bxa(VUb.document,"touchend", onTouchEnd); } };this.clickAndSpeak = function(enable) { SZb = enable; }; var WZb ="onTouchStart onTouchMove onTouchEnd changedTouches";onTouchStart = function(event) { if(!Pfa) { Pfa = true; } TZb = false; if(SZb || Xfa) { if(UZb) { var changedTouches = event.changedTouches ; if(changedTouches != null && changedTouches.length > 0) { var jab = hDb(changedTouches[0], true); VZb = xDb(jab); } } } };onTouchMove = function() { if(!Pfa) { Pfa = true; } TZb = true; };onTouchEnd = function(event) { if(SZb || Xfa) { if(TZb) { VZb = null; return; } if(UZb && !Xfa) { if(VZb == null) { return; } var target = new THHoverTarget(null, null, VZb.range); if(target == null) { return; } UZb = false; rw_speakHoverTarget(target); } else { Gya(event); } } };};var ZZb = null;SpeechStream.setUpControllerFactory = function(){ if(ZZb == null) { ZZb = (function() { var aZb = null; var bZb = false; var cZb = false; var dZb = new SpeechStream.TouchScreenManager(); dZb.initialise(); if(cea) { aZb = null; bZb = false; } else { fZb(); } function fZb() { var eZb; try { if((Cfa) || Vca =="hmh") { eZb = null; bZb = false; } else { eZb = new Audio(); var gZb; if(ifa =="mp3") { gZb ="audio/mpeg"; } else { gZb ="audio/"+ ifa; } eZb.type = gZb; eZb.src =""; if(eZb.canPlayType) { bZb = ("no"!= eZb.canPlayType(gZb)) && (""!= eZb.canPlayType(gZb)); } } } catch(err) { eZb = null; bZb = false; } } var hZb = { enableTouchEvents: function(enable) { dZb.clickAndSpeak(enable); },getConnector: function() { if(aZb != null) { return aZb; } if(bZb) { aZb = new SpeechStream.HTML5Controller(); } else { cZb = hZb.hasFlashSupport(); if(cZb) { aZb = ZXb(); } } return aZb; },hasFlashSupport: function() { if(typeof(eba_no_flash) =="boolean"&& eba_no_flash == true) { cZb = true; } else { var flash = ZXb(); if(flash != null) { var jZb = flash.getVersion(); var kZb = parseFloat(jZb); if(kZb < 1.05 || kZb == NaN) { cZb = false; } else { cZb = true; } } } return cZb; },doesSupportSpeech: function() { if(bZb) { return true; } else { return hZb.hasFlashSupport(); } },doesSupportHtml5: function() { return bZb; } }; return hZb; })(); }};SpeechStream.SwaHandler = function(xZb){ var self = this; var lZb = xZb; var mZb = new SpeechStream.MceAssist(xZb); { xZb.onClick.add(nZb); xZb.onKeyUp.add(qZb); xZb.onPaste.add(tZb); xZb.onChange.add(wZb); }function nZb(xZb, yZb) { self.log(mZb.getTextUpToCaret(3) +"|"+ mZb.getCharacterAtCaret()); self.doPrediction(); } function qZb(xZb, yZb) { self.log(mZb.getTextUpToCaret(3) +"|"+ mZb.getCharacterAtCaret()); } function tZb(xZb, yZb) { self.log("paste"+ yZb.rangeOffset); if(yZb.explicitOriginalTarget){} } function wZb(xZb, yZb) { self.log("Change"+ yZb.rangeOffset); if(yZb.explicitOriginalTarget){} } this.predictionCaret = null; this.predictionPreceedingText = null; this.predictionBookmark = null; this.doPrediction = function() { var c = mZb.getCharacterAtCaret(); if(Psa(c.charCodeAt(0))) { self.predictionCaret = mZb.getCaret(); self.predictionPreceedingText = mZb.getTextUpToCaret(3); self.predictionHandler.doPrediction(self.predictionPreceedingText, self.predictionCaret); } }; this.predictionHandler = null;this.insertPrediction = function(p_strInsert, p_strPreceeding, p_bookmark) { if(mZb.getCaret().equals(p_bookmark)) { var zZb = mZb.getTextUpToCaret(3); if(p_strPreceeding == zZb) { var Aab = lZb.selection.getRng(1); Aab.setEnd(p_bookmark.node, p_bookmark.offset+3); lZb.execCommand("mceReplaceContent", false, p_strInsert); } } }; this.predictionOn = false; this.setPredictionHandler = function(p_handler) { this.predictionHandler = p_handler; }; this.setPredictionOn = function(p_bOn) { this.predictionOn = p_bOn; }; this.logger = null;this.setLogger = function(p_logger) { self.logger = p_logger; }; this.log =function(zmb) { if(self.logger != null) { self.logger.value = zmb; } }; this.getSelection = function() { handler.log("getSelection"); }; this.clearSelection = function() { self.log("clearSelection"); return self.ed.selection.getContent({format:'text'}); };this.findAndReplace = function(p_strSearchTxt, p_strReplaceText, p_bAll) { self.log("findAndReplace"); };this.replaceText = function(p_nStart, p_nEnd, p_strReplaceText) { self.log("replaceText"); }; this.removeText = function() { self.log("removeText"); };this.insertText = function(p_strVal) { self.log("insertText"); tinymce.execCommand("mceInsertContent", false, p_strVal); };this.replaceCurrentWord = function(p_strVal) { self.log("replace current word "+ p_strVal); tinymce.execCommand("mceReplaceContent", false, p_strVal); }; this.find = function(Qnb, smb, umb) { };function Bab() { }function Dab(Anb) { if($rw_isSpeaking) { $rw_stopSpeech(); } if(self.predictionOn) { var Kjb = self.getTextBeforePoint(Anb, 3); self.predictionHandler.doPrediction(Kjb); } }this.getTextBeforePoint = function(p_nPoint, p_nWords) { SpeechStream.m_swaHander.log("todo get text"); };};SpeechStream.m_swaHander = null;SpeechStream.initSwaHandler = function(xZb){ if(SpeechStream.m_swaHander == null) { SpeechStream.m_swaHander = new SpeechStream.SwaHandler(xZb); var ulb = document.getElementById("logger"); if(ulb != null) { SpeechStream.m_swaHander.setLogger(ulb); } var Gab = (function() { this.doPrediction = function(zmb, p_bookmark) { SpeechStream.m_swaHander.log("pred:"+ zmb +" "+ p_bookmark.toString()); var Hab = function(){SpeechStream.m_swaHander.insertPrediction("test", zmb, p_bookmark);}; setTimeout(Hab, 1000); }; return this; })(); SpeechStream.m_swaHander.setPredictionHandler(Gab); }};SpeechStream.MceAssist = function(p_ed){ var self = this; var ed = p_ed; var Iab = p_ed.contentDocument;this.getCaret = function() { return new THCaret(ed.selection.getSel().anchorNode, ed.selection.getSel().anchorOffset, false); };this.getBookmarkNode = function() { try { return Iab.getElementById(ed.selection.getBookmark().id.toString() +"_start"); } catch(e) { return Iab.body; } };this.getTextUpToCaret = function(p_nWords) { if(typeof(p_nWords) !="number") { p_nWords = -1; } var Jab = self.getCaret(); var Kab = ed.selection.getRng(1); var Lab = Kab.cloneRange(); var Jlb = TJb(Jab, null); if(Jlb != null) { if(Jlb.node.nodeType==3) { Lab.setStart(Jlb.node, Jlb.offset); } else { Lab.setStartBefore(Jlb.node); } } else { Lab.setStartBefore(Iab.body); } var Kjb = Lab.cloneContents().textContent; if(p_nWords > -1) { Kjb = rw_trimToWordsFromEnd(Kjb, 3); } return Kjb; };this.getCharacterAtCaret = function() { var Jlb = self.getCaret(); var Xlb = Jlb.node; while(Xlb.parentNode.getAttribute("data-mce-type") =="bookmark"|| Jlb.offset == 0) { Xlb = wJb(Xlb, false, null); if(Xlb == null) { return" "; } } var Kjb; if(Xlb != Jlb.node) { Kjb = (Xlb?Xlb.nodeValue:" "); Kjb = Kjb.substr(Kjb.length - 1); } else { Kjb = Jlb.node.nodeValue; Kjb = Kjb.charAt(Jlb.offset - 1); } if(Kjb.length == 0) { Kjb =" "; } return Kjb; }; };var Rab ="startbubble";var Sab ="stopbubble";var eba_bubble_adjust_x; var eba_bubble_adjust_y;var Tab = null;var Uab;var Vab;var Wab;var Xab;var Yab = null;function aab(){ var Zab = document.createElement("\x64i\x76"); Zab.id = Rab; Zab.style.zIndex ="998"; Zab.style.position ="\x61bsolut\x65"; Zab.style.display ="n\x6fne"; if(Jfa) { Zab.style.cursor ="hand"; } else { Zab.style.cursor ="pointer"; } cxa(Zab,'click', Fbb); var bab = document.createElement("img"); bab.setAttribute("src", $g_strFileLoc +"rwimgs/start_speak_popup.gif"); Zab.appendChild(bab); Yea.appendChild(Zab); var cab = document.createElement("\x64i\x76"); cab.id = Sab; cab.style.zIndex ="999"; cab.style.position ="\x61\x62solute"; cab.style.display ="n\x6fne"; if(Jfa) { cab.style.cursor ="hand"; } else { cab.style.cursor ="pointer"; } cxa(cab,'click', Gbb); var dab = document.createElement("img"); dab.setAttribute("src", $g_strFileLoc +"rwimgs/stop_speak_popup.gif"); cab.appendChild(dab); Yea.appendChild(cab);}function hab(){ var ulb = document.getElementById(Rab); if(ulb != null) { var fab = ulb.style.visibility; var gab = ulb.style.display; ulb.style.visibility ="hidden"; ulb.style.display ="inline"; Yab = ulb.offsetParent; if(Yab == document.body) { Yab = null; } ulb.style.visibility = fab; ulb.style.display = gab; Wab = 0; Xab = 0; if(typeof(eba_bubble_adjust_x) =="number") { Wab -= eba_bubble_adjust_x; } if(typeof(eba_bubble_adjust_y) =="number") { Xab -= eba_bubble_adjust_y; } }}function mab(evt){ if(vda && evt.shiftKey || !Hca) { return; } var iab = false; var jab = hDb(evt, false); if(jab != null && jab.node != document.body) { if(jab.node.nodeType == 1) { var Jjb = jab.node; var Xjb = Jjb.tagName.toLowerCase(); if(Xjb =="img") { var nab = Jjb.parentNode; if(nab.tagName.toLowerCase() =="div") { if(Jjb.id == Rab || Jjb.id == Sab) { return; } } var oab = Jjb.getAttribute("title"); if(oab == null || oab.length == 0) { var pab = Jjb.getAttribute("alt"); if(pab == null || pab.length == 0) { var qab = Jjb.getAttribute("msg"); if(qab == null || qab.length == 0) { return; } } } iab = true; } else { return; } } var rab = xDb(jab); if(rab != null) { if(typeof(Wab) =="undefined") { hab(); } if(Yab != null) { if(!Rbb(Yab, jab.node)) { return; } } if(iab) { var Bbb = fxa(jab.node); var tab = Xbb(jab.node); var uab = 0; var vab = 0; while(tab != null) { if(tab != Yab) { uab += tab.scrollLeft; vab += tab.scrollTop; tab = Xbb(tab); } else { tab = null; } } Bbb.x -= uab; Bbb.y -= vab; Cbb(Bbb.x - Wab, Bbb.y - Xab, rab); } else { var wab = rab.getCaretRange(); if(csa(wab)) { var start = wab.Pgb.node; if(rab.isRange()) { var end = wab.Qgb.node; start = LMb(start); end = QMb(end); var Ggb = qSb(start, 0); var Hgb; if(end.nodeType == 1) { Hgb = qSb(end, 0); } else { Hgb = qSb(end, end.nodeValue.length); } rab.range = new THRange(document.body, Ggb, Hgb); } var Bbb = Nbb(start); Cbb(Bbb.x - Wab, Bbb.y - Xab, rab); } else { } } } }}function Cbb(x, y, Dbb){ if(uda && Hca) { x = x - 32; if(x<0) { x = 0; } y = y - 18; if(y<0) { y = 0; } var scrollLeft; var scrollTop; if(Yab != null) { scrollLeft = 0; scrollTop = 0; } else { scrollLeft = rw_getScreenOffsetLeft(); scrollTop = rw_getScreenOffsetTop(); } Uab = x + scrollLeft; Vab = y + scrollTop; document.getElementById(Rab).style.display="inline"; document.getElementById(Rab).style.left = Uab +'px'; document.getElementById(Rab).style.top = Vab +'px'; Tab = Dbb; }}function Fbb(){ if(Tab != null) { $rw_event_stop(); Hbb(Uab, Vab); if(!Tab.isRange()) { var Ebb = rda; rda = false; rw_speakHoverTarget(Tab); rda = Ebb; } else { rw_speakHoverTarget(Tab); } }}function Gbb(){ $rw_event_stop();}function Hbb(x, y){ if(uda && Hca) { document.getElementById(Sab).style.display="inline"; document.getElementById(Sab).style.left = x +'px'; document.getElementById(Sab).style.top = y +'px'; }}function Ibb(){ if(document.getElementById(Rab)) { document.getElementById(Rab).style.display="none"; }}function Jbb(){ if(document.getElementById(Sab)) { try { document.getElementById(Sab).style.display="none"; } catch(e) { thLogE(e); } }}function Nbb(Wjb){ var x = 0; var y = 0; var Kbb = Xbb(Wjb); if(Yab != null && !Rbb(Yab, Kbb)) { Kbb = Yab; } var Rgb = Wjb; var Mbb; while(Kbb != null) { Mbb = ibb(ebb(Rgb, Kbb), Kbb); x += Mbb.x; y += Mbb.y; Rgb = Kbb; if(Kbb == Yab) { break; } Kbb = Xbb(Kbb); if(Yab != null && !Rbb(Yab, Kbb)) { Kbb = Yab; } } if(Yab == null) { Mbb = ibb(ebb(Rgb, Rgb.ownerDocument.body), Rgb.ownerDocument.body); x += Mbb.x; y += Mbb.y; } else { x += JRb(Yab); y += LRb(Yab); } return {x:x, y:y};}function Rbb(Sbb, Tbb){ if(Sbb == null || Tbb == null) { return false; } var ajb = Tbb.ownerDocument.body; var Bmb = Tbb; while(Bmb != null && Bmb != ajb) { if(Sbb == Bmb) { return true; } Bmb = Bmb.parentNode; } return false;}function Xbb(Wjb){ var Ubb = Wjb.parentNode; var Vbb = Wjb.ownerDocument.body; var Wbb = null; while(Ubb != null && Ubb != Vbb) { if(Ubb.tagName.toLowerCase() =="div"|| Ubb.tagName.toLowerCase() =="form") { var Zbb = Ubb.clientHeight; var abb = Ubb.clientWidth; var bbb = xPb(Ubb); var cbb = false; if(bbb != null && bbb.overflow !="visible") { if(Ubb.scrollHeight > Zbb && bbb.overflowY !="visible") { cbb = true; } if(Ubb.scrollWidth > abb && bbb.overflowX !="visible") { cbb = true; } } if(cbb) { Wbb = Ubb; break; } } Ubb = Ubb.parentNode; } return Wbb;}function ebb(fbb, kbb){ if(fbb.nodeType == 3) { fbb = fbb.parentNode; } var x = 0; var y = 0; var dbb = fbb; while(dbb != kbb && dbb != null) { x += dbb.offsetLeft; y += dbb.offsetTop; dbb = aSb(dbb, kbb); } return {x:x, y:y};}function ibb(jbb, kbb){ jbb.x -= JRb(kbb); jbb.y -= LRb(kbb); if(xPb(kbb).position =="static") { jbb.x -= kbb.offsetLeft; jbb.y -= kbb.offsetTop; } if(jbb.x < 0) { jbb.x = 0; } if(jbb.y < 0) { jbb.y = 0; } if(jbb.x > kbb.clientWidth) { jbb.x = kbb.clientWidth; } if(jbb.y > kbb.clientHeight) { jbb.y = kbb.clientHeight; } return {x:jbb.x, y:jbb.y};}function $rw_barCacheInit(){ if(Cfa) { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwcache.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwcacheSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var hlb =""; hlb +='<div id="rwGenerateCache" rwTHcomp="1" texthelpStopContinuous="1">'; hlb +='<div class="rwGenerateCachePopupOutline">'; hlb +='<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore="1">'; hlb +='Loading, please wait...'; hlb +='<img name="displayImg" align="right" src="'+ $g_strFileLoc +'rwimgs/thex.bmp" onMouseOver="$rw_divOver(9)" onMouseOut="$rw_divOut(9)" '+'onMouseUp="$rw_divPress(9)" />'; hlb +='</div>'; hlb +='<div class="rwGenerateCachePopupContent">'; hlb +='<span id="rwGenerateCachedisplay" ignore="1">'; hlb +=''; hlb +='</span>'; hlb +='</div>'; hlb +='</div>'; hlb +='</div>'; TQb(Yea, hlb, false);}function $rw_barCalInit(){ if(Cfa) { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwcalculator.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { TQb(Yea,"<link href=\""+ $g_strFileLoc +"rwcalculatorSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var hlb =""; hlb +='<div id="rwCal" rwTHcomp="1" style="visibility:hidden" texthelpStopContinuous="1">'; hlb +=' <div class="rwCalPopupOutline">'; if(rca == ENG_UK || rca == ENG_US) { hlb +='  <div id="rwDragMeCal" class="rwToolbarCaptionCal" >'; } else { hlb +='  <div id="rwDragMeCal" class="rwToolbarSpanCaptionCal" >'; } hlb +='    <img name="calImg" align="right" src="'+ $g_strFileLoc +'rwimgs/thex.bmp" onmouseover="$rw_divOver(8);" onmouseout="$rw_divOut(8);" '+'onmouseup="$rw_divPress(8);" /></div>'; hlb +='<div class="rwCalPopupContent">'; hlb +='<form name="rw_calForm" class="rw_calForm" id="rw_calForm">'; hlb +='<table class="rw_calTable">'; hlb +="<tbody>"; hlb +='<tr>'; hlb +='<td colSpan="2">'; hlb +='<input type="text" class="rwcaldisplay" id="rw_calDis" maxlength="40" name="rw_calDis" readonly="readonly" />'; hlb +='</td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td colSpan="2" class="rwcalspeechbutton">'; if(Pfa) { hlb +='<br/>'; } else { hlb +='<input type="checkbox" id="rw_calspeechbutton" name="rw_calspeechbutton" /><span>Speech on</span>'; } hlb +='</td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td> '; hlb +='<table>'; hlb +="<tbody>"; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="7" name="seven" onclick="rw_calAddDigit(\'7\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="8" name="eight" onclick="rw_calAddDigit(\'8\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="9" name="nine" onclick="rw_calAddDigit(\'9\');"/></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="4" name="four" onclick="rw_calAddDigit(\'4\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="5" name="five" onclick="rw_calAddDigit(\'5\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="6" name="six" onclick="rw_calAddDigit(\'6\');"/></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="1" name="one" onclick="rw_calAddDigit(\'1\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="2" name="two" onclick="rw_calAddDigit(\'2\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="3" name="three" onclick="rw_calAddDigit(\'3\');"/></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="+/-" name="toggle the sign of the number" onclick="rw_calPlusMinus();"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="0" name="zero" onclick="rw_calAddDigit(\'0\');"/></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="." name="decimal point" onclick="rw_calDec();"/></td>'; hlb +='</tr>'; hlb +="</tbody>"; hlb +='</table>'; hlb +='</td>'; hlb +='<td>'; hlb +='<table>'; hlb +="<tbody>"; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="C" name="clear" onclick="rw_calClearNum();" /></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="AC" name="clear memory" onclick="rw_calClearMem();" /></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="*" name="multiply" onclick="rw_calFunc(\'*\');" /></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="/" name="divide" onclick="rw_calFunc(\'/\');" /></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td><input type="button" class="rwcalbutton" value="+" name="plus" onclick="rw_calFunc(\'+\');" /></td>'; hlb +='<td><input type="button" class="rwcalbutton" value="-" name="minus" onclick="rw_calFunc(\'-\');" /></td>'; hlb +='</tr>'; hlb +='<tr>'; hlb +='<td colSpan="2"><input type="button" class="rwcalEqbutton" value="=" name="equals" onclick="rw_calEquals();" /></td>'; hlb +='</tr>'; hlb +="</tbody>"; hlb +='</table>'; hlb +='</td>'; hlb +='</tr>'; hlb +="</tbody>"; hlb +='</table>'; hlb +='</form>'; hlb +='</div></div></div>'; TQb(Yea, hlb, false);}var nbb = 0; var obb = 16; var pbb = 0; var qbb ="0"; var rbb = 0;function rw_calFunc(tbb){ if(nbb != 0) { rw_calEquals(); } if(tbb.indexOf("*") > -1) { nbb = 1; } if(tbb.indexOf("/") > -1) { nbb = 2; } if(tbb.indexOf("+") > -1) { nbb = 3; } if(tbb.indexOf("-") > -1) { nbb = 4; } pbb = rbb; qbb =""; }function rw_calDec(){ if(qbb.length == 0) { qbb ="0."; } else { if(( qbb.indexOf(".") == -1) && ( qbb.indexOf("e") == -1) ) { qbb = qbb +"."; } } rbb = parseFloat(qbb); Ecb(qbb); }function rw_calPlusMinus(){ if(qbb.indexOf("!") == -1) { rbb = rbb * -1; qbb =""+ rbb; } else { qbb ="Press 'AC'!"; } Ecb(qbb); }function rw_calEquals(){ if(qbb !="") { if((qbb.indexOf("!") == -1)) { if(nbb == 1) { rbb = pbb * rbb; } if(nbb == 2) { if(rbb != 0) { rbb = pbb / rbb; } else { qbb ="Cannot divide by zero!"; } } if(nbb == 3) { rbb = pbb + rbb; } if(nbb == 4) { rbb = pbb - rbb; } if(nbb == 2 && rbb == 0) { } else { qbb = rbb +""; } nbb = 0; pbb = 0; if(qbb.indexOf("Infinity") != -1) { qbb ="Value too long!"; } if(qbb.indexOf("NaN") != -1) { qbb ="N/A!"; } } else { qbb ="Press 'AC'!"; } Ecb(qbb); if(Ccb()) { $rw_speakText(qbb); } qbb ="0"; }}function rw_calAddDigit(ybb){ if(qbb.length < obb) { if(qbb.indexOf("!") == -1) { if((parseFloat(qbb) == 0) && (qbb.indexOf(".") == -1)) { qbb = ybb; } else { qbb = qbb + ybb; } rbb = parseFloat(qbb); } else { qbb ="Press 'AC'!"; } } Ecb(qbb); }function rw_calClearNum(){ rbb = 0; qbb =""+ rbb; Ecb(qbb); }function rw_calClearMem(){ rbb = 0; nbb = 0; pbb = 0; qbb =""+ rbb; Ecb(qbb); }function Ccb(){ var ulb = document.getElementById("rw_calspeechbutton"); if(ulb != null) { return ulb.checked; } else { return false; }}function Dcb(){ return document.getElementById("rw_calForm");}function Ecb(Fcb){ document.getElementById("rw_calDis").value = Fcb;}if(typeof($rw_userParameters) =="function"){ Zea = true; $rw_userParameters(); $rw_barInit(); tya();}